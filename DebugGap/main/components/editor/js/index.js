!function(){function e(e,t){function n(e){for(e="undefined"==typeof e?!1:e;x.length&&(" "===x[x.length-1]||x[x.length-1]===O||x[x.length-1]===z||e&&("\n"===x[x.length-1]||"\r"===x[x.length-1]));)x.pop()}function i(e){return e.replace(/^\s\s*|\s\s*$/,"")}function s(e){e=e.replace(/\x0d/g,"");for(var t=[],n=e.indexOf("\n");-1!==n;)t.push(e.substring(0,n)),e=e.substring(n+1),n=e.indexOf("\n");return e.length&&t.push(e),t}function a(){var e=Z;Z=!1,o(),Z=e}function o(e){if(S.eat_next_space=!1,(!Z||!u(S.mode))&&(e="undefined"==typeof e?!0:e,S.if_line=!1,n(),x.length)){"\n"===x[x.length-1]&&e||(D=!0,x.push("\n")),z&&x.push(z);for(var t=0;t<S.indentation_level;t+=1)x.push(O);S.var_line&&S.var_line_reindented&&x.push(O),S.case_body&&x.push(O)}}function r(){if("TK_COMMENT"===k)return o();if(S.eat_next_space)return void(S.eat_next_space=!1);var e=" ";x.length&&(e=x[x.length-1])," "!==e&&"\n"!==e&&e!==O&&x.push(" ")}function c(){D=!1,S.eat_next_space=!1,x.push(w)}function l(){S.indentation_level+=1}function h(){x.length&&x[x.length-1]===O&&x.pop()}function d(e){S&&E.push(S),S={previous_mode:S?S.mode:"BLOCK",mode:e,var_line:!1,var_line_tainted:!1,var_line_reindented:!1,in_html_comment:!1,if_line:!1,in_case_statement:!1,in_case:!1,case_body:!1,eat_next_space:!1,indentation_baseline:-1,indentation_level:S?S.indentation_level+(S.case_body?1:0)+(S.var_line&&S.var_line_reindented?1:0):0,ternary_depth:0}}function u(e){return"[EXPRESSION]"===e||"[INDENTED-EXPRESSION]"===e}function p(e){return _(e,["[EXPRESSION]","(EXPRESSION)","(FOR-EXPRESSION)","(COND-EXPRESSION)"])}function f(){if(K="DO_BLOCK"===S.mode,E.length>0){var e=S.mode;S=E.pop(),S.previous_mode=e}}function g(e,t){for(var n=0;n<e.length;n++){var s=i(e[n]);if(s.charAt(0)!==t)return!1}return!0}function m(e){return _(e,["case","return","do","if","throw","else"])}function _(e,t){for(var n=0;n<t.length;n+=1)if(t[n]===e)return!0;return!1}function v(e){for(var t=N,n=y.charAt(t);_(n,T)&&n!==e;){if(t++,t>=Q)return 0;n=y.charAt(t)}return n}function b(){var e,t;if(B=0,N>=Q)return["","TK_EOF"];M=!1;var s=y.charAt(N);N+=1;var a=Z&&u(S.mode);if(a){for(var r=0;_(s,T);){if("\n"===s?(n(),x.push("\n"),D=!0,r=0):"	"===s?r+=4:"\r"===s||(r+=1),N>=Q)return["","TK_EOF"];s=y.charAt(N),N+=1}if(-1===S.indentation_baseline&&(S.indentation_baseline=r),D){for(e=0;e<S.indentation_level+1;e+=1)x.push(O);if(-1!==S.indentation_baseline)for(e=0;e<r-S.indentation_baseline;e++)x.push(" ")}}else{for(;_(s,T);){if("\n"===s&&(B+=V?V>=B?1:0:1),N>=Q)return["","TK_EOF"];s=y.charAt(N),N+=1}if(H&&B>1)for(e=0;B>e;e+=1)o(0===e),D=!0;M=B>0}if(_(s,P)){if(Q>N)for(;_(y.charAt(N),P)&&(s+=y.charAt(N),N+=1,N!==Q););if(N!==Q&&s.match(/^[0-9]+[Ee]$/)&&("-"===y.charAt(N)||"+"===y.charAt(N))){var c=y.charAt(N);N+=1;var l=b();return s+=c+l[0],[s,"TK_WORD"]}return"in"===s?[s,"TK_OPERATOR"]:(!M||"TK_OPERATOR"===k||"TK_EQUALS"===k||S.if_line||!H&&"var"===j||o(),[s,"TK_WORD"])}if("("===s||"["===s)return[s,"TK_START_EXPR"];if(")"===s||"]"===s)return[s,"TK_END_EXPR"];if("{"===s)return[s,"TK_START_BLOCK"];if("}"===s)return[s,"TK_END_BLOCK"];if(";"===s)return[s,"TK_SEMICOLON"];if("/"===s){var h="",d=!0;if("*"===y.charAt(N)){if(N+=1,Q>N)for(;Q>N&&("*"!==y.charAt(N)||!y.charAt(N+1)||"/"!==y.charAt(N+1))&&(s=y.charAt(N),h+=s,"\n"!==s&&"\r"!==s||(d=!1),N+=1,!(N>=Q)););return N+=2,d&&0===B?["/*"+h+"*/","TK_INLINE_COMMENT"]:["/*"+h+"*/","TK_BLOCK_COMMENT"]}if("/"===y.charAt(N)){for(h=s;"\r"!==y.charAt(N)&&"\n"!==y.charAt(N)&&(h+=y.charAt(N),N+=1,!(N>=Q)););return M&&o(),[h,"TK_COMMENT"]}}if("'"===s||'"'===s||"/"===s&&("TK_WORD"===k&&m(j)||")"===j&&_(S.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])||"TK_COMMA"===k||"TK_COMMENT"===k||"TK_START_EXPR"===k||"TK_START_BLOCK"===k||"TK_END_BLOCK"===k||"TK_OPERATOR"===k||"TK_EQUALS"===k||"TK_EOF"===k||"TK_SEMICOLON"===k)){var p=s,f=!1,g=0,v=0;if(t=s,Q>N)if("/"===p){for(var w=!1;f||w||y.charAt(N)!==p;)if(t+=y.charAt(N),f?f=!1:(f="\\"===y.charAt(N),"["===y.charAt(N)?w=!0:"]"===y.charAt(N)&&(w=!1)),N+=1,N>=Q)return[t,"TK_STRING"]}else for(;f||y.charAt(N)!==p;)if(t+=y.charAt(N),g&&g>=v&&(g=parseInt(t.substr(-v),16),g&&g>=32&&126>=g&&(g=String.fromCharCode(g),t=t.substr(0,t.length-v-2)+(g===p||"\\"===g?"\\":"")+g),g=0),g?g++:f?(f=!1,Y&&("x"===y.charAt(N)?(g++,v=2):"u"===y.charAt(N)&&(g++,v=4))):f="\\"===y.charAt(N),N+=1,N>=Q)return[t,"TK_STRING"];if(N+=1,t+=p,"/"===p)for(;Q>N&&_(y.charAt(N),P);)t+=y.charAt(N),N+=1;return[t,"TK_STRING"]}if("#"===s){if(0===x.length&&"!"===y.charAt(N)){for(t=s;Q>N&&"\n"!==s;)s=y.charAt(N),t+=s,N+=1;return x.push(i(t)+"\n"),o(),b()}var $="#";if(Q>N&&_(y.charAt(N),I)){do s=y.charAt(N),$+=s,N+=1;while(Q>N&&"#"!==s&&"="!==s);return"#"===s||("["===y.charAt(N)&&"]"===y.charAt(N+1)?($+="[]",N+=2):"{"===y.charAt(N)&&"}"===y.charAt(N+1)&&($+="{}",N+=2)),[$,"TK_WORD"]}}if("<"===s&&"<!--"===y.substring(N-1,N+3)){for(N+=3,s="<!--";"\n"!==y.charAt(N)&&Q>N;)s+=y.charAt(N),N++;return S.in_html_comment=!0,[s,"TK_COMMENT"]}if("-"===s&&S.in_html_comment&&"-->"===y.substring(N-1,N+2))return S.in_html_comment=!1,N+=2,M&&o(),["-->","TK_COMMENT"];if(_(s,F)){for(;Q>N&&_(s+y.charAt(N),F)&&(s+=y.charAt(N),N+=1,!(N>=Q)););return","===s?[s,"TK_COMMA"]:"="===s?[s,"TK_EQUALS"]:[s,"TK_OPERATOR"]}return[s,"TK_UNKNOWN"]}var y,x,w,k,j,$,C,S,E,O,T,P,F,N,A,I,L,R,K,M,D,B,z="";t=t?t:{};var U;void 0!==t.space_after_anon_function&&void 0===t.jslint_happy&&(t.jslint_happy=t.space_after_anon_function),void 0!==t.braces_on_own_line&&(U=t.braces_on_own_line?"expand":"collapse"),U=t.brace_style?t.brace_style:U?U:"collapse";var W=t.indent_size?t.indent_size:4,q=t.indent_char?t.indent_char:" ",H="undefined"==typeof t.preserve_newlines?!0:t.preserve_newlines,V="undefined"==typeof t.max_preserve_newlines?!1:t.max_preserve_newlines,X="undefined"===t.jslint_happy?!1:t.jslint_happy,Z="undefined"==typeof t.keep_array_indentation?!1:t.keep_array_indentation,J="undefined"==typeof t.space_before_conditional?!0:t.space_before_conditional,G="undefined"==typeof t.indent_case?!1:t.indent_case,Y="undefined"==typeof t.unescape_strings?!1:t.unescape_strings;D=!1;var Q=e.length;for(O="";W>0;)O+=q,W-=1;for(;e&&(" "===e.charAt(0)||"	"===e.charAt(0));)z+=e.charAt(0),e=e.substring(1);for(y=e,C="",k="TK_START_EXPR",j="",$="",x=[],K=!1,T="\n\r	 ".split(""),P="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split(""),I="0123456789".split(""),F="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::",F+=" <%= <% %> <?= <? ?>",F=F.split(" "),A="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(","),E=[],d("BLOCK"),N=0;;){var ee=b();if(w=ee[0],R=ee[1],"TK_EOF"===R)break;switch(R){case"TK_START_EXPR":if("["===w){if("TK_WORD"===k||")"===j){_(j,A)&&r(),d("(EXPRESSION)"),c();break}"[EXPRESSION]"===S.mode||"[INDENTED-EXPRESSION]"===S.mode?"]"===$&&","===j?("[EXPRESSION]"===S.mode&&(S.mode="[INDENTED-EXPRESSION]",Z||l()),d("[EXPRESSION]"),Z||o()):"["===j?("[EXPRESSION]"===S.mode&&(S.mode="[INDENTED-EXPRESSION]",Z||l()),d("[EXPRESSION]"),Z||o()):d("[EXPRESSION]"):d("[EXPRESSION]")}else d("for"===C?"(FOR-EXPRESSION)":_(C,["if","while"])?"(COND-EXPRESSION)":"(EXPRESSION)");";"===j||"TK_START_BLOCK"===k?o():"TK_END_EXPR"===k||"TK_START_EXPR"===k||"TK_END_BLOCK"===k||"."===j?M&&o():"TK_WORD"!==k&&"TK_OPERATOR"!==k?r():"function"===C||"typeof"===C?X&&r():(_(j,A)||"catch"===j)&&J&&r(),c();break;case"TK_END_EXPR":if("]"===w)if(Z){if("}"===j){h(),c(),f();break}}else if("[INDENTED-EXPRESSION]"===S.mode&&"]"===j){f(),o(),c();break}f(),c();break;case"TK_START_BLOCK":if(d("do"===C?"DO_BLOCK":"BLOCK"),"expand"===U||"expand-strict"===U){var te=!1;"expand-strict"===U?(te="}"===v(),te||o(!0)):"TK_OPERATOR"!==k&&("="===j||m(j)&&"else"!==j?r():o(!0)),c(),te||l()}else"TK_OPERATOR"!==k&&"TK_START_EXPR"!==k?"TK_START_BLOCK"===k?o():r():u(S.previous_mode)&&","===j&&("}"===$?r():o()),l(),c();break;case"TK_END_BLOCK":f(),"expand"===U||"expand-strict"===U?("{"!==j&&o(),c()):("TK_START_BLOCK"===k?D?h():n():u(S.mode)&&Z?(Z=!1,o(),Z=!0):o(),c());break;case"TK_WORD":if(K){r(),c(),r(),K=!1;break}if(L="NONE","function"===w){if(S.var_line&&"TK_EQUALS"!==k&&(S.var_line_reindented=!0),(D||";"===j)&&"{"!==j&&"TK_BLOCK_COMMENT"!==k&&"TK_COMMENT"!==k){B=D?B:0,H||(B=1);for(var ne=0;2-B>ne;ne++)o(!1)}"TK_WORD"===k?"get"===j||"set"===j||"new"===j||"return"===j?r():o():"TK_OPERATOR"===k||"="===j?r():p(S.mode)||o(),c(),C=w;break}if("case"===w||"default"===w&&S.in_case_statement){":"===j||S.case_body?h():(G||S.indentation_level--,o(),G||S.indentation_level++),c(),S.in_case=!0,S.in_case_statement=!0,S.case_body=!1;break}"TK_END_BLOCK"===k?_(w.toLowerCase(),["else","catch","finally"])?"expand"===U||"end-expand"===U||"expand-strict"===U?L="NEWLINE":(L="SPACE",r()):L="NEWLINE":"TK_SEMICOLON"!==k||"BLOCK"!==S.mode&&"DO_BLOCK"!==S.mode?"TK_SEMICOLON"===k&&p(S.mode)?L="SPACE":"TK_STRING"===k?L="NEWLINE":"TK_WORD"===k?("else"===j&&n(!0),L="SPACE"):"TK_START_BLOCK"===k?L="NEWLINE":"TK_END_EXPR"===k&&(r(),L="NEWLINE"):L="NEWLINE",_(w,A)&&")"!==j&&(L="else"===j?"SPACE":"NEWLINE"),S.if_line&&"TK_END_EXPR"===k&&(S.if_line=!1),_(w.toLowerCase(),["else","catch","finally"])?"TK_END_BLOCK"!==k||"expand"===U||"end-expand"===U||"expand-strict"===U?o():(n(!0),r()):"NEWLINE"===L?m(j)?r():"TK_END_EXPR"!==k?"TK_START_EXPR"===k&&"var"===w||":"===j||("if"===w&&"else"===C&&"{"!==j?r():(S.var_line=!1,S.var_line_reindented=!1,o())):_(w,A)&&")"!==j&&(S.var_line=!1,S.var_line_reindented=!1,o()):u(S.mode)&&","===j&&"}"===$?o():"SPACE"===L&&r(),c(),C=w,"var"===w&&(S.var_line=!0,S.var_line_reindented=!1,S.var_line_tainted=!1),"if"===w&&(S.if_line=!0),"else"===w&&(S.if_line=!1);break;case"TK_SEMICOLON":c(),S.var_line=!1,S.var_line_reindented=!1,"OBJECT"===S.mode&&(S.mode="BLOCK");break;case"TK_STRING":"TK_END_EXPR"===k&&_(S.previous_mode,["(COND-EXPRESSION)","(FOR-EXPRESSION)"])?r():"TK_COMMENT"===k||"TK_STRING"===k||"TK_START_BLOCK"===k||"TK_END_BLOCK"===k||"TK_SEMICOLON"===k?o():"TK_WORD"===k&&r(),c();break;case"TK_EQUALS":S.var_line&&(S.var_line_tainted=!0),r(),c(),r();break;case"TK_COMMA":if(S.var_line){if((p(S.mode)||"TK_END_BLOCK"===k)&&(S.var_line_tainted=!1),S.var_line_tainted){c(),S.var_line_reindented=!0,S.var_line_tainted=!1,o();break}S.var_line_tainted=!1,c(),r();break}"TK_COMMENT"===k&&o(),"TK_END_BLOCK"===k&&"(EXPRESSION)"!==S.mode?(c(),"OBJECT"===S.mode&&"}"===j?o():r()):"OBJECT"===S.mode?(c(),o()):(c(),r());break;case"TK_OPERATOR":var ie=!0,se=!0;if(m(j)){r(),c();break}if("*"===w&&"TK_UNKNOWN"===k&&!$.match(/^\d+$/)){c();break}if(":"===w&&S.in_case){G&&(S.case_body=!0),c(),o(),S.in_case=!1;break}if("::"===w){c();break}_(w,["--","++","!"])||_(w,["-","+"])&&(_(k,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||_(j,A))?(ie=!1,se=!1,";"===j&&p(S.mode)&&(ie=!0),"TK_WORD"===k&&_(j,A)&&(ie=!0),"BLOCK"!==S.mode||"{"!==j&&";"!==j||o()):"."===w?ie=!1:":"===w?0===S.ternary_depth?("BLOCK"===S.mode&&(S.mode="OBJECT"),ie=!1):S.ternary_depth-=1:"?"===w&&(S.ternary_depth+=1),ie&&r(),c(),se&&r();break;case"TK_BLOCK_COMMENT":var ae,oe=s(w);if(g(oe.slice(1),"*"))for(o(),x.push(oe[0]),ae=1;ae<oe.length;ae++)o(),x.push(" "),x.push(i(oe[ae]));else for(oe.length>1?o():"TK_END_BLOCK"===k?o():r(),ae=0;ae<oe.length;ae++)x.push(oe[ae]),x.push("\n");"\n"!==v("\n")&&o();break;case"TK_INLINE_COMMENT":r(),c(),p(S.mode)?r():a();break;case"TK_COMMENT":","!==j||M||n(!0),"TK_COMMENT"!==k&&(M?o():r()),c(),o();break;case"TK_UNKNOWN":m(j)&&r(),c()}$=j,k=R,j=w}var re=z+x.join("").replace(/[\r\n ]+$/,"");return re}function t(e,t){function n(){return p=e.charAt(++g)}function i(){return e.charAt(g+1)}function s(t){for(var i=g;n();)if("\\"==p)n(),n();else{if(p==t)break;if("\n"==p)break}return e.substring(i,g+1)}function a(){for(var e=g;f.test(i());)g++;return g!=e}function o(){var e=g;do;while(f.test(n()));return g!=e+1}function r(){var t=g;for(n();n();)if("*"==p&&"/"==i()){g++;break}return e.substring(t,g+1)}function c(e,t){return b.slice(-e.length+(t||0),t).join("").toLowerCase()==e}function l(){v++,m+=_}function h(){v--,m=m.slice(0,-d)}t=t||{};var d=t.indent_size||4,u=t.indent_char||" ";"string"==typeof d&&(d=parseInt(d));var p,f=/^\s+$/,g=-1,m=e.match(/^[\r\n]*[\t ]*/)[0],_=Array(d+1).join(u),v=0;print={},print["{"]=function(e){print.singleSpace(),b.push(e),print.newLine()},print["}"]=function(e){print.newLine(),b.push(e),print.newLine()},print.newLine=function(e){if(!e)for(;f.test(b[b.length-1]);)b.pop();b.length&&b.push("\n"),m&&b.push(m)},print.singleSpace=function(){b.length&&!f.test(b[b.length-1])&&b.push(" ")};var b=[];for(m&&b.push(m);;){var y=o();if(!p)break;"{"==p?(l(),print["{"](p)):"}"==p?(h(),print["}"](p)):'"'==p||"'"==p?b.push(s(p)):";"==p?b.push(p,"\n",m):"/"==p&&"*"==i()?(print.newLine(),b.push(r(),"\n",m)):"("==p?(b.push(p),a(),c("url",-1)&&n()&&(")"!=p&&'"'!=p&&"'"!=p?b.push(s(")")):g--)):")"==p?b.push(p):","==p?(a(),b.push(p),print.singleSpace()):"]"==p?b.push(p):"["==p||"="==p?(a(),b.push(p)):(y&&print.singleSpace(),b.push(p))}var x=b.join("").replace(/[\n ]+$/,"");return x}function n(n,i){function s(){return this.pos=0,this.token="",this.current_mode="CONTENT",this.tags={parent:"parent1",parentcount:1,parent1:""},this.tag_type="",this.token_text=this.last_token=this.last_text=this.token_type="",this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}},this.get_content=function(){for(var e="",t=[],n=!1;"<"!==this.input.charAt(this.pos);){if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];if(e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(e,this.Utils.whitespace))t.length&&(n=!0),this.line_char_count--;else{if(n){if(this.line_char_count>=this.max_char){t.push("\n");for(var i=0;i<this.indent_level;i++)t.push(this.indent_string);this.line_char_count=0}else t.push(" "),this.line_char_count++;n=!1}t.push(e)}}return t.length?t.join(""):""},this.get_contents_to=function(e){if(this.pos==this.input.length)return["","TK_EOF"];var t="",n=new RegExp("</"+e+"\\s*>","igm");n.lastIndex=this.pos;var i=n.exec(this.input),s=i?i.index:this.input.length;return this.pos<s&&(t=this.input.substring(this.pos,s),this.pos=s),t},this.record_tag=function(e){this.tags[e+"count"]?(this.tags[e+"count"]++,this.tags[e+this.tags[e+"count"]]=this.indent_level):(this.tags[e+"count"]=1,this.tags[e+this.tags[e+"count"]]=this.indent_level),this.tags[e+this.tags[e+"count"]+"parent"]=this.tags.parent,this.tags.parent=e+this.tags[e+"count"]},this.retrieve_tag=function(e){if(this.tags[e+"count"]){for(var t=this.tags.parent;t&&e+this.tags[e+"count"]!==t;)t=this.tags[t+"parent"];t&&(this.indent_level=this.tags[e+this.tags[e+"count"]],this.tags.parent=this.tags[t+"parent"]),delete this.tags[e+this.tags[e+"count"]+"parent"],delete this.tags[e+this.tags[e+"count"]],1==this.tags[e+"count"]?delete this.tags[e+"count"]:this.tags[e+"count"]--}},this.get_tag=function(){var e="",t=[],n=!1;do{if(this.pos>=this.input.length)return t.length?t.join(""):["","TK_EOF"];e=this.input.charAt(this.pos),this.pos++,this.line_char_count++,this.Utils.in_array(e,this.Utils.whitespace)?(n=!0,this.line_char_count--):("'"!==e&&'"'!==e||t[1]&&"!"===t[1]||(e+=this.get_unformatted(e),n=!0),"="===e&&(n=!1),t.length&&"="!==t[t.length-1]&&">"!==e&&n&&(this.line_char_count>=this.max_char?(this.print_newline(!1,t),this.line_char_count=0):(t.push(" "),this.line_char_count++),n=!1),t.push(e))}while(">"!==e);var i,s=t.join("");i=-1!=s.indexOf(" ")?s.indexOf(" "):s.indexOf(">");var a=s.substring(1,i).toLowerCase();if("/"===s.charAt(s.length-2)||this.Utils.in_array(a,this.Utils.single_token))this.tag_type="SINGLE";else if("script"===a)this.record_tag(a),this.tag_type="SCRIPT";else if("style"===a)this.record_tag(a),this.tag_type="STYLE";else if(this.Utils.in_array(a,unformatted)){var o=this.get_unformatted("</"+a+">",s);t.push(o),this.tag_type="SINGLE"}else if("!"===a.charAt(0))if(-1!=a.indexOf("[if")){if(-1!=s.indexOf("!IE")){var o=this.get_unformatted("-->",s);t.push(o)}this.tag_type="START"}else if(-1!=a.indexOf("[endif"))this.tag_type="END",this.unindent();else if(-1!=a.indexOf("[cdata[")){var o=this.get_unformatted("]]>",s);t.push(o),this.tag_type="SINGLE"}else{var o=this.get_unformatted("-->",s);t.push(o),this.tag_type="SINGLE"}else"/"===a.charAt(0)?(this.retrieve_tag(a.substring(1)),this.tag_type="END"):(this.record_tag(a),this.tag_type="START"),this.Utils.in_array(a,this.Utils.extra_liners)&&this.print_newline(!0,this.output);return t.join("")},this.get_unformatted=function(e,t){if(t&&-1!=t.indexOf(e))return"";var n="",i="",s=!0;do{if(this.pos>=this.input.length)return i;if(n=this.input.charAt(this.pos),this.pos++,this.Utils.in_array(n,this.Utils.whitespace)){if(!s){this.line_char_count--;continue}if("\n"===n||"\r"===n){i+="\n",this.line_char_count=0;continue}}i+=n,this.line_char_count++,s=!0}while(-1==i.indexOf(e));return i},this.get_token=function(){var e;if("TK_TAG_SCRIPT"===this.last_token||"TK_TAG_STYLE"===this.last_token){var t=this.last_token.substr(7);return e=this.get_contents_to(t),"string"!=typeof e?e:[e,"TK_"+t]}if("CONTENT"===this.current_mode)return e=this.get_content(),"string"!=typeof e?e:[e,"TK_CONTENT"];if("TAG"===this.current_mode){if(e=this.get_tag(),"string"!=typeof e)return e;var n="TK_TAG_"+this.tag_type;return[e,n]}},this.get_full_indent=function(e){return e=this.indent_level+e||0,1>e?"":Array(e+1).join(this.indent_string)},this.printer=function(e,t,n,i,s){this.input=e||"",this.output=[],this.indent_character=t,this.indent_string="",this.indent_size=n,this.brace_style=s,this.indent_level=0,this.max_char=i,this.line_char_count=0;for(var a=0;a<this.indent_size;a++)this.indent_string+=this.indent_character;this.print_newline=function(e,t){if(this.line_char_count=0,t&&t.length){if(!e)for(;this.Utils.in_array(t[t.length-1],this.Utils.whitespace);)t.pop();t.push("\n");for(var n=0;n<this.indent_level;n++)t.push(this.indent_string)}},this.print_token=function(e){this.output.push(e)},this.indent=function(){this.indent_level++},this.unindent=function(){this.indent_level>0&&this.indent_level--}},this}var a,o,r,c,l;for(i=i||{},o=i.indent_size||4,r=i.indent_char||" ",l=i.brace_style||"collapse",c=0==i.max_char?1/0:i.max_char||70,unformatted=i.unformatted||["a"],a=new s,a.printer(n,r,o,c,l);;){var h=a.get_token();if(a.token_text=h[0],a.token_type=h[1],"TK_EOF"===a.token_type)break;switch(a.token_type){case"TK_TAG_START":a.print_newline(!1,a.output),a.print_token(a.token_text),a.indent(),a.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_END":if("TK_CONTENT"===a.last_token&&""===a.last_text){var d=a.token_text.match(/\w+/)[0],u=a.output[a.output.length-1].match(/<\s*(\w+)/);null!==u&&u[1]===d||a.print_newline(!0,a.output)}a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_TAG_SINGLE":a.print_newline(!1,a.output),a.print_token(a.token_text),a.current_mode="CONTENT";break;case"TK_CONTENT":""!==a.token_text&&a.print_token(a.token_text),a.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(""!==a.token_text){a.output.push("\n");var p=a.token_text;if("TK_SCRIPT"==a.token_type)var f="function"==typeof e&&e;else if("TK_STYLE"==a.token_type)var f="function"==typeof t&&t;if("keep"==i.indent_scripts)var g=0;else if("separate"==i.indent_scripts)var g=-a.indent_level;else var g=1;var m=a.get_full_indent(g);if(f)p=f(p.replace(/^\s*/,m),i);else{var _=p.match(/^\s*/)[0],v=_.match(/[^\n\r]*$/)[0].split(a.indent_string).length-1,b=a.get_full_indent(g-v);p=p.replace(/^\s*/,m).replace(/\r\n|\r|\n/g,"\n"+b).replace(/\s*$/,"")}p&&(a.print_token(p),a.print_newline(!0,a.output))}a.current_mode="TAG"}a.last_token=a.token_type,a.last_text=a.token_text}return a.output.join("")}function s(){}function a(e){this.width=500,this.height=300,this.buttons={cancel:lanObject.common.cancel,save:lanObject.common.save},this.content="",this.isShowing=!1,this.coverTransparent=!1,this.enableMove=!1,e&&this.setConfig(e),this.init()}function o(){this.menuName=[{name:lanObject.navHead.file,index:"File"},{name:lanObject.navHead.edit,index:"Edit"},{name:lanObject.navHead.find,index:"Find"},{name:lanObject.navHead.preferences,index:"Preferences"},{name:lanObject.navHead.webTools,index:"Web Tools"}],this.menu={File:[{name:lanObject.navHead.newFile,hotkeyId:1},"|",{name:lanObject.navHead.openFile,hotkeyId:2},{name:lanObject.navHead.openProject,hotkeyId:3},{name:lanObject.navHead.openRecent,loadSub:"loadOpenRecent",sub:[]},{name:lanObject.navHead.openImportant,loadSub:"loadOpenImportant",sub:[]},"|",{name:lanObject.navHead.save,hotkeyId:4},{name:lanObject.navHead.saveAs,hotkeyId:5},"|",{name:lanObject.navHead.quit,func:"close"}],Edit:[{name:lanObject.navHead.undo,func:"undo"},{name:lanObject.navHead.redo,func:"redo"},"|",{name:lanObject.common.copy,func:"copyItem",bindKey:{mac:"Command-C",win:"Ctrl-C"}},{name:lanObject.common.cut,func:"cutItem",bindKey:{mac:"Command-X",win:"Ctrl-X"}},{name:lanObject.common.paste,func:"pasteItem",bindKey:{mac:"Command-V",win:"Ctrl-V"}}],Find:[{name:lanObject.navHead.findCurrent,hotkeyId:50},{name:lanObject.navHead.findNext,hotkeyId:51},{name:lanObject.navHead.findPrevious,hotkeyId:52},{name:lanObject.navHead.findAll,hotkeyId:53},{name:lanObject.navHead.findInFiles,hotkeyId:54},{name:lanObject.navHead.replace,hotkeyId:55}],Preferences:[{name:lanObject.navHead.uiTheme,func:"loadUIPage"},{name:lanObject.navHead.languagePackage,func:"loadLanguagePage"},{name:lanObject.navHead.hotkeyConfig,func:"loadHotkeyPage"},{name:lanObject.navHead.editorConfig,func:"loadEditorSetting"}],"Web Tools":[{name:lanObject.navHead.qrCode,func:"qrCode"},{name:lanObject.navHead.encodeDecodeURL,func:"decodeURL"},{name:lanObject.navHead.jsonFormat,func:"jsonFormat"},"|",{name:lanObject.navHead.debugH5,func:"launchDebugGap"}]},this._dg115=new g}function r(e){this._dg108=e,this.project="",this.eventInited=!1,this.debugStatus="inactive"}function c(){this.init()}function l(){this._dg116=new c}function h(){this.fs=require("fs")}function d(){this.lists={},this.init()}function u(e){this.selector=".resource-recent",this.currentFiles={},this.editor=e,this.dragComponents=null,this.lastModifyInstance=new d,this.init()}function p(){this.openfiles=new u(this),this.currentFile="",this.comingFile="",this._dg110=new C,this._dg111=new N,this._dg112=new x,this._dg113=new z,this.context_dg107=new w,this.init()}function f(){this.selector="body",this.bindEvent()}function g(){this.recent=[],this.important={},this.init()}function m(){this.components=[{value:lanObject.resourceTree.activeProject,name:"Active"},{value:lanObject.resourceTree.allProjects,name:"All"}],this.init()}function _(){this._dg117=new l,this._dg118=new m,this._dg119=(new s).init(),this.projectName="",this.currentProject=null,this.init()}function v(e){this.dfop=null,this.treenodes=null,this.renderWrap=e,this.treeId="",this.projectName="",this.folderExpandStatus={},this.isEventInited=!1,this.filterOut=[".svn",".git"]}function b(e){this.folderMenu=[],this.leafMenu=[],this.folderMenu=[{name:lanObject.allResourceTree.active,func:"_dg114.activeProject"},{name:lanObject.allResourceTree["delete"],func:"_dg114.deleteProject"},{name:lanObject.allResourceTree.newWindow,func:"_dg114.openProjectInNewWindow"}],v.call(this,e),this.init()}function y(){this.folderMenu=[{name:lanObject.resourceTree.newFile,func:"_dg114.newFile"},{name:lanObject.resourceTree.newFolder,func:"_dg114.newFolder"},"|",{name:lanObject.resourceTree.rename,func:"_dg114.renameFolder"},{name:lanObject.resourceTree.pasteFile,func:"_dg114.pasteFile"},{name:lanObject.resourceTree.deleteFolder,func:"_dg114.deleteFolder"},{name:lanObject.resourceTree.showInFolder,func:"_dg114.revealPath"},"|",{name:lanObject.resourceTree.refreshFolders,func:"_dg114.refreshFolder"}],this.leafMenu=[{name:lanObject.resourceTree.rename,func:"_dg114.renameFile"},"|",{name:lanObject.resourceTree.copyFile,func:"_dg114.copyFile"},{name:lanObject.resourceTree.pasteFile,func:"_dg114.pasteFile"},{name:lanObject.resourceTree.deleteFile,func:"_dg114.deleteFile"},{name:lanObject.resourceTree.duplicate,func:"_dg114.duplicateFile"},"|",{name:lanObject.resourceTree.showInFolder,func:"_dg114.revealPath"}],this.folderWatch=null,v.call(this,".resource-tree"),this.init()}function x(){this.marks=[],this.linemarkClosed=!!localStorage.linemark_close,this.colors=["#fbbc05","#A6E22E","#66D9EF","#AE81FF","#F92672","#e54724"]}function w(){this.init()}function k(){this.boxShowing=!1,this.func=null,this.mode="",this._dg1()}function j(e){this.listprefix="prompt_list",this.listId=this.listprefix+(new Date).getTime(),this.isRegistered=!1,this.typedCharacters="",e&&(this.events=e)}function C(e){var t=this;j.call(this,e),this.prompts={},this.promptEngine=null,this.promptMode="",this.promptParameterInstance=new k,this._dg37("common"),this.events={down:function(e){e.stopPropagation()},up:function(e){e.stopPropagation()},right:function(e){t.clean(),e.stopPropagation()},left:function(e){t.clean()},clickItem:function(e){_dg106.editor.focus()}},this._dg1()}function S(){this.list=[],this.specialList=[],this.currentFile="",this.regRule=/([a-zA-Z_\$][a-zA-Z0-9_\$]+)/g,this.typedRule=/[a-zA-Z0-9_$]+$/,this.maxValueLength=30,this.cachedList=[],this.cachedValue="",this.keys={},this.init()}function E(e){S.call(this),this.promptEditor=e,this.specialList=["html","head","title","body","link","meta","script"],this.specialList.push("http-equiv","content","class","style","href"),this.regRule=/([a-zA-Z][a-zA-Z0-9]+)/g,this.typedRule=/[a-zA-Z0-9_\$\-]+$/,this.init()}function O(){S.call(this),this.specialValues={"font-size":["xx-small","x-small","small","medium","large","x-large","xx-large","smaller","larger"],"font-style":["italic","oblique","normal"],"font-weight":["normal","bold","bolder","lighter"],"font-variant":["small-caps","normal"],"font-family":["serif","sans-serif","cursive","fantasy","monospace","-webkit-body","-webkit-pictograph","Helvetica","Arial"],"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],"text-overflow":["clip","ellipsis"],"text-align":["left","center","right","justify","start","end"],"text-transform":["none","capitalize","uppercase","lowercase","full-width","full-size-kana"],"text-decoration":["none","underline","overline","line-through"],"text-shadow":[],"text-fill-color":[],"text-stroke":[],"letter-spacing":["-webkit-autostart","end","left","right","center","justify","-webkit-left","-webkit-right","-webkit-center"],"word-space":[],"vertical-align":["baseline","middle","sub","super","text-top","text-bottom","top","bottom","-webkit-baseline-middle"],"white-space":["normal","nowrap","pre","pre-line","pre-wrap"],"word-break":["break-all","break-word","normal"],"word-wrap":["break-word","normal"],direction:["ltr","rtl"],"line-height":[],"background-repeat":["repeat","repeat-x","repeat-y","no-repeat","space","round"],"background-url":[],background:[],"background-clip":["padding-box","border-box","content-box","text"],"background-attachment":["fixed","scroll","local"],"background-origin":["padding-box","border-box","content-box"],"background-position":["center","left","right","top","bottom"],display:["none","inline","block","list-item","inline-block","table","inline-table","table-caption","table-cell","table-row","table-row-group","table-column","table-column-group","table-header-group","table-footer-group","compact","run-in","ruby","ruby-base","ruby-text","ruby-base-group","ruby-text-group","box","inline-box","-webkit-box","-webkit-inline-box","flex","inline-flex","grid","inline-grid"],"float":["left","none","right"],clear:["none","both","left","right"],visibility:["visible","hidden","collapse"],clip:[],overflow:["hidden","auto","visible","overlay","scroll"],"box-orient":["horizontal","vertical"],"box-pack":["start","center","end","justify"],"box-align":["start","center","end","baseline","stretch"],"box-flex":[],"box-flex-group":[],"box-ordinal-group":[],"box-direction":["normal","reverse"],"box-lines":["single","multiple"],"border-style":["none","hidden","inset","groove","ridge","outset","dotted","dashed","solid","double"],"list-style":[],"list-style-type":["none","inline","disc","circle","square","decimal","decimal-leading-zero","arabic-indic","binary","bengali","cambodian","khmer","devanagari","gujarati","gurmukhi","kannada","lower-hexadecimal","lao","malayalam","mongolian","myanmar","octal","oriya","persian","urdu","telugu","tibetan","thai","upper-hexadecimal","lower-roman","upper-roman","lower-greek","lower-alpha","lower-latin","upper-alpha","upper-latin","afar","ethiopic-halehame-aa-et","ethiopic-halehame-aa-er","amharic","ethiopic-halehame-am-et","amharic-abegede","ethiopic-abegede-am-et","cjk-earthly-branch","cjk-heavenly-stem","ethiopic","ethiopic-halehame-gez","ethiopic-abegede","ethiopic-abegede-gez","hangul-consonant","hangul","lower-norwegian","oromo","ethiopic-halehame-om-et","sidama","ethiopic-halehame-sid-et","somali","ethiopic-halehame-so-et","tigre","ethiopic-halehame-tig","tigrinya-er","ethiopic-halehame-ti-er","tigrinya-er-abegede","ethiopic-abegede-ti-er","tigrinya-et","ethiopic-halehame-ti-et","tigrinya-et-abegede","ethiopic-abegede-ti-et","upper-greek","upper-norwegian","asterisks","footnotes","hebrew","armenian","lower-armenian","upper-armenian","georgian","cjk-ideographic","hiragana","katakana","hiragana-iroha","katakana-iroha"],"list-style-position":["outside","inside","hanging"],position:["absolute","fixed","relative","static"],transform:["none","matrix(<number>,<number>,<number>,<number>,<number>,<number>)","translate(<length>[, <length>])","translateX(<length>)","translateY(<length>)","rotate(<angle>)","scale(<number>[, <number>])","scaleX(<number>)","scaleY(<number>)","skew(<angle> [, <angle>])","skewX(<angle>)","skewY(<angle>)"],"transform-origin":["left","center","right","top","bottom"],transition:[],"transition-property":["all","none"],"transition-duration":[],"transition-timing-function":["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier(<number>, <number>, <number>, <number>)"],"transition-delay":[],animation:[],"animation-name":[],"animation-duration":[],"animation-timing-function":["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier(<number>, <number>, <number>, <number>)"],"animation-delay":[],"animation-iteration-count":["infinite"],"animation-direction":["normal","alternate"],"animation-play-state":["running","paused"],"animation-fill-mode":["none","forwards","backwards","both"],outline:[],"outline-width":["medium","thin","thick"],"outline-style":["none","dotted","dashed","solid","double","groove","ridge","inset","outset"],"outline-color":[],"outline-offset":[],"box-sizing":["content-box","border-box"],zoom:["auto","normal","active","inactive","disabled"],cursor:["none","copy","auto","crosshair","default","pointer","move","vertical-text","cell","context-menu","alias","progress","no-drop","not-allowed","-webkit-zoom-in","-webkit-zoom-out","e-resize","ne-resize","nw-resize","n-resize","se-resize","sw-resize","s-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","text","wait","help","all-scroll","-webkit-grab","-webkit-grabbing"]},this._dg45(),this.specialList=[],this.extendCssList(),this.typedKey="",this.regRule=/([a-zA-Z_][a-zA-Z0-9_\-]+)/g,this.typedRule=/[a-zA-Z0-9_-]+$/,this.init()}function T(){S.call(this),this.specialList=[],this.specialList.push("Window","document"),this.objectList=[],this.specialValues={Date:["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getYear"],String:["toString","toLowerCase","toUpperCase","charAt","concat","indexOf","lastIndexOf","match","slice","split","substr","substring","trim","valueOf"],
Array:["isArray","indexOf","lastIndexOf","every","some","forEach","map","filter","reduce","reduceRight"]},this.relationValues={Math:["PI","abs","acos","asin","atan","ceil","cos","exp","floor","max","min","pow","random","round","sin","sqrt","tan"],location:["hash","host","hostname","href","origin","pathname","port","reload","replace","search"],navigator:["appCodeName","appName","appVersion","cookieEnabled","doNotTrack","geolocation","getGamepads","getStorageUpdates","javaEnabled","language","maxTouchPoints","mimeTypes","onLine","platform","plugins","product","productSub","registerProtocolHandler","userAgent","vendor","vendorSub","vibrate","webkitGetGamepads","webkitGetUserMedia","webkitPersistentStorage","webkitTemporaryStorage"],localStorage:["clear","getItem","key"],JSON:["parse","stringify"],Object:["getPrototypeOf","getOwnPropertyDescriptor","getOwnPropertyNames","create","defineProperty","defineProperties","seal","freeze","preventExtensions","isSealed","isFrozen","isExtensible","keys"],console:["assert","clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","markTimeline","memory","profile","profileEnd","table","time","timeEnd","timeStamp","timeline","timelineEnd","trace","warn"]},this._dg45(),this.init()}function P(){S.call(this),this.specialList=[],this.objectList=[],this.objectKeysList=[],this.init()}function F(){}function N(){this.tools=[],this.filetool=null,this.init()}function A(){this.cleanDeltas=[]}function I(){A.call(this),this.buttons=[{value:lanObject.filetool.Format,func:"format"},{value:lanObject.filetool.unFormat,func:"unformat"}]}function L(){A.call(this),this.buttons=[{value:lanObject.filetool.beautify,func:"attr_beautify"},{value:lanObject.filetool.navigator,func:"attr_showFunctions"}],this.jsMapInstance=new R,this.init()}function R(){this.spaceRelation=[],this.methods=[],A.call(this)}function K(){this.version=""}function M(){A.call(this),this.buttons=[{value:lanObject.filetool.beautify,func:"beautify"}]}function D(){A.call(this),this.buttons=[{value:lanObject.filetool.beautify,func:"beautify"}]}function B(){A.call(this),this.buttons=[{value:lanObject.filetool.navigator,func:"showFunctions"}],this.spaceRelation=[],this.classes={},this.methods=[]}function z(){this.mapEngine=null,this.previousEngine=null,this.engines={},this.mousedownFlag=!1,this.keydownFlag=!1,this.mousePosition={},this.init()}function U(){this.variableReg="",this.propertyWord="",this.propertyPosition={},this.spaceRelation=[],this.definitionPosition={},this.mapAllowed=!1}function W(){this.callStack=[],this.index=0}function q(){U.call(this),this.variableReg="[a-zA-Z0-9_\\-]+",this.result={},this.relation={classes:"",nodeName:""},this.init()}function H(){U.call(this),this.variableReg="[\\$a-zA-Z0-9_]+",this.namespace=null,this.result={namespace_function:{},"function":{},"class":{}},this.init()}function V(){U.call(this),this.variableReg="[\\$a-zA-Z0-9_]+",this.namespace=null,this.result={"function":{},"class":{},define:{}},this.init()}function X(){this.wordReg=null,this.canSearch=!0,this.replaceCon="",this.result=[],this.matchCount=0,this.tasks,this.tasksLength=0,this.startIndex=0,this.endIndex=0,this.stopSearchFlag=0,this.init()}function Z(){this.init()}process.EventEmitter.defaultMaxListeners=0,window.uncaughtExceptionFunction=function(e){if(gui.developing){var t=require("fs"),n="";try{n="\n"+(new Date).toLocaleString()+"\n"+e.stack+"\n"}catch(e){n="error"}t.writeFileSync("./error",n,{flag:"a+"})}},process.on("uncaughtException",uncaughtExceptionFunction),"undefined"!=typeof exports&&(exports.js_beautify=e),"undefined"!=typeof exports&&(exports.css_beautify=t),"undefined"!=typeof exports&&(exports.html_beautify=n);var J={data:[],func:function(e){for(var t,n=$(e.target),i=J.data,s=0;s<i.length;s++)t=i[s],0==n.closest(t.selector).length?t.blur?t.blur(t.selector,e)&&(J.unregister(t.selector),s--):$(selector).hide():t.focus&&t.focus(t.selector,e)&&(J.unregister(t.selector),s--)},init:function(){$(document).bind("mousedown",J.func)},register:function(e,t,n){J.data.length||J.init();for(var i=J.data,s=0,a=i.length;a>s&&i[s].selector!=e;s++);s==a&&J.data.push({selector:e,focus:n||null,blur:t||null})},unregister:function(e){if(e){for(var t=J.data,n=0,i=t.length;i>n;n++)if(t[n].selector==e){t.splice(n,1);break}}else J.data=[];J.data.length||$(document).unbind("click",J.func)}};_dg122={isMouseover:function(e,t){var n=!1;return n=t.srcElement?e.contains(t.srcElement)&&!e.contains(t.fromElement):e.contains(t.target)&&!e.contains(t.relatedTarget)},isMouseout:function(e,t){var n=!1;return n=t.srcElement?e.contains(t.srcElement)&&!e.contains(t.toElement):e.contains(t.target)&&!e.contains(t.relatedTarget)}},$.extend(_dg122,{getFilenameByPath:function(e,t){return t=t?t:this.getPathSplitChar(),e.split(t).slice(-1)[0]},getDirByPath:function(e,t){t=t?t:this.getPathSplitChar();var n=e.lastIndexOf(t);return e.slice(0,n)},getExtension:function(e){return e.slice(e.lastIndexOf(".")+1)},getPathSplitChar:function(){var e=ace.require("ace/lib/useragent"),t=e.isWin?"\\":"/";return t},addBackslashForPath:function(e){var t=this.getPlatform();return t.isWin&&(e=e.replace(/\\/g,"\\\\")),e},getProjectPath:function(){var e=(require("fs"),ace.require("ace/lib/useragent")),t=location.pathname;return e.isWin&&(t=t.slice(1)),t=_dg122.getDirByPath(t,"/"),decodeURIComponent(t)}}),$.extend(_dg122,{getPlatform:function(){return ace.require("ace/lib/useragent")}}),_dg122.appName="./editor",_dg122.changeHotkey=function(e){var t=e.split("-");if("mac"==platforms.platform){var n={Ctrl:"⌃",Option:"⌥",Shift:"⇧",Command:"⌘"};e=[];for(var i in n)-1!=$.inArray(i,t)&&e.push(n[i]);return e.push(t[t.length-1].toUpperCase()),e.join("")}return t[t.length-1]=t[t.length-1].toUpperCase(),t.join("-")};var G={data:{},receive:function(e,t){for(var n=e.split("|"),i=0;i<n.length;i++)this.data[n[i]]||(this.data[n[i]]=[]),this.data[n[i]].push(t)},send:function(e){var t=this.data[e];if(t)for(var n=Array.prototype.slice.call(arguments,1),i=0,s=t.length;s>i;i++)t[i].apply(this,n)}};_dg122.emptyFn=function(){},$.extend(_dg122,{alert:function(e){alert(e)},prompt:function(e){var t=$.Deferred(),n=prompt(e);return n?t.resolve(n):t.reject(),t.promise()},confirm:function(e){var t=$.Deferred(),n=confirm(e);return n?t.resolve():t.reject(),t.promise()}}),$.extend(_dg122,{getConfig:function(e){var t=require("fs"),n=null;try{n=t.readFileSync(_dg122.getProjectPath()+"/config/"+e+".json"),n=n.toString(),n=JSON.parse(n)}catch(i){return void _dg122.alert("Could not find configuration file,please re-install application")}return n},saveConfig:function(e,t){var n=require("fs"),i=0;try{"object"==typeof t&&(t=JSON.stringify(t)),n.writeFileSync(_dg122.getProjectPath()+"/config/"+e+".json",t),i=1}catch(s){}return i}}),_dg122.loadSettingPage=function(e,t,n){var i=_dg122.getProjectPath()+"/setting/"+e+".html",s="./setting/"+e+".html";return _dg122.loadSettingPage.instance?t&&_dg122.loadSettingPage.instance.setConfig(t):_dg122.loadSettingPage.instance=new a(t),_dg122.loadSettingPage.instance.isShowing&&_dg122.loadSettingPage.instance.close(),_dg104.isExist(i)?(_dg122.loadSettingPage.instance.loadPage(s),_dg122.loadSettingPage.instance.show(),void _dg122.loadSettingPage.instance.injectVariables(n)):void _dg122.alert("Error: page doesn't exist")},_dg122.htmlspecialchars=function(e){var t="";if(void 0==e)return"undefined";if("number"==typeof e)return e+"";if(0==e.length)return'""';for(var n=0;n<e.length;n++)switch(e.substr(n,1)){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case" ":t+=" &nbsp;";break;case'"':t+="&quot;";break;default:t+=e.substr(n,1)}return t},_dg122.revertHtmlSpecialchars=function(e){return e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&nbsp;/g," "):""},_dg122.gotoLine=function(e,t,n){if(e&&/^untitled/.test(e)&&(e=""),e&&!_dg104.isExist(e)&&(e=_dg122.getProjectPath()+"/ext/"+e),n=n?n:0,e)if(_dg106.openfiles.fileExist(e))G.send("treeOpenFile",e);else if(!_dg104.openTabFile(e))return void G.send("self/reloadTree");_dg106.editor.gotoLine(t,n),setTimeout(function(){_dg106.editor.gotoLine(t,n)},5)},$.extend(_dg122,{sortObject:function(e){var t,n,i=[];n=$.extend(!0,{},e);for(t in n)n[t]._compareName_=t,i.push(n[t]);for(i.sort(function(e,t){return e._compareName_>t._compareName_?1:-1}),n={},t=0;t<i.length;t++)n[i[t]._compareName_]=i[t],delete i[t]._compareName_;return n},sortArray:function(e,t){e.sort(function(e,n){return e[t]>n[t]?1:-1})}}),$.extend(_dg122,{copy:function(e){var t=_dg106.editor.getSelectedText();if(t=e?e:t){var n=gui.Clipboard.get();n.set(t)}},cut:function(){var e=_dg106.editor.getSelectedText();if(e){var t=gui.Clipboard.get();t.set(e),_dg106.editor.onCut()}},paste:function(){var e=gui.Clipboard.get(),t=e.get();_dg106.editor.onPaste(t)}}),_dg122.colorRgb=function(e,t){if(e){if(4===e.length){for(var n="#",i=1;4>i;i+=1)n+=e.slice(i,i+1).concat(e.slice(i,i+1));e=n}for(var s=[],i=1;7>i;i+=2)s.push(parseInt("0x"+e.slice(i,i+2)));return void 0!=t?(s.push(t),"rgba("+s.join(",")+")"):"rgb("+s.join(",")+")"}return e},_dg122.process={threads:{},run:function(e,t,n,i,s){return(!i||t.length<i)&&(i=t.length),"linux"==platforms.platform?void this.compatibleLinux(e,t,n):(this.factory(e.name,i),void $.each(this.threads[e.name],function(){this.on("message",function(i){i.EOF?t.length&&this.send({source:e,sync:s,params:t.shift()}):n(i)&&setTimeout(_dg122.process.stop.bind(_dg122.process,e.name),100)}),this.send({source:e,sync:s,params:t.shift()})}))},factory:function(e,t){this.threads[e]&&this.stop(e);for(var n=[],i=0;t>i;i++)n.push(require("child_process").fork(_dg122.getProjectPath()+"/process/index.js"));return this.threads[e]=n,this.threads[e]},stop:function(e){if(this._tasks[e])return void(this._tasks[e]=[]);var t=this.threads[e];if(t){for(var n=0;n<t.length;n++)t[n].kill();delete this.threads[e]}},_tasks:{},compatibleLinux:function(e,t,n){this._tasks[e.name]=t;var i=require("./process/"+e.src+".js"),s=i[e.func];this._js_p0(e.name,s,n)},_js_p0:function(e,t,n){function i(i){i.EOF?setTimeout(_dg122.process._js_p0.bind(_dg122.process,e,t,n),0):n&&n(i)}if(this._tasks[e].length){var s=this._tasks[e].shift();s.push(i),t.apply(null,s)}}},function(){var e="en_us";localStorage.language?e=localStorage.language:(e=navigator.language,e=e.toLowerCase().replace("-","_"),localStorage.language=e);var t=require("fs");window.lanObject=null;try{lanObject=t.readFileSync(_dg122.getProjectPath()+"/language/"+e+".json")}catch(n){try{lanObject=t.readFileSync(_dg122.getProjectPath()+"/language/en_us.json"),localStorage.language="en_us"}catch(n){_dg122.alert("Language package occurs error!"),window.close()}}lanObject=lanObject.toString(),lanObject=JSON.parse(lanObject)}(),window.commands={saveFile:function(e){var t=_dg106.getCurrentPath(),n=e.getSession().getValue();commandsAction.saveFile(t,n)},saveAsFile:function(e){var t=_dg106.getCurrentPath(),n=e.getSession().getValue(),i=_dg122.getFilenameByPath(t);_dg104.saveAsDialog(i,n)},openFile:function(){_dg104.fileDialog(function(e){_dg104.openTabFile(e)})},openProject:function(){_dg104.directoryDialog(function(e){var t=_dg122.getFilenameByPath(e),n={path:e},i=_dg108.addProject(t,n);i&&(_dg108.projectName?window.open(location.origin+location.pathname+"#"+i.projectName):_dg108.loadProject(i.projectName,i.project))})},newFile:function(){_dg104.openNewFile("Untitled"),_dg106.editor.focus()},findInProject:function(){return _dg108.currentProject?void _dg122.loadSettingPage("search",{width:600,height:310,coverTransparent:!0,enableMove:!0,buttons:{replace:lanObject.search.replace,find:lanObject.search.find},ext:{getParams:function(){var e=$(".base-box-cover iframe")[0].contentWindow,t=!1;if(e){if(t=e.dgBridge.getParams(),!t)return!1;if(!t.find_con)return _dg122.alert(lanObject.search.findEmpty),!1;if(!t.path)return _dg122.alert(lanObject.search.pathEmpty),!1}return t},findClick:function(){var e=this.ext.getParams();e&&(e.replace_con="",G.send("findall/find",e),this.close())},replaceClick:function(){var e=this.ext.getParams();e&&(e.replace_con?(G.send("findall/find",e),this.close()):_dg122.alert(lanObject.search.replaceEmpty))}}},{path:_dg108.currentProject.path}):void _dg122.alert("No Project")}},window.commandsAction={saveFile:function(e,t){var n=$.Deferred();if(e&&_dg104.fs.existsSync(e)){var i=_dg104.saveFile(e,t);i?(G.send("saveFile",e),n.resolve(e)):n.reject()}else _dg104.saveAsDialog(e,t).done(function(t){G.send("open_files.js/saveAsFile",e,t),n.resolve(t)}).fail(function(){n.reject()});return n.promise()}},s.prototype={init:function(){return this.overwriteHotkey(),this.registerGlobal(),this},overwriteHotkey:function(){for(var e,t=ace.edit("editor"),n=(ace.require("ace/lib/keys"),require("fs"),_dg122.getConfig("hotkeys")),i=Object.keys(n),s=0,a=i.length;a>s;s++)e=n[i[s]],e.close?t.commands.removeCommand(e.func):e["default"]?t.commands.commands[e.func]&&t.commands.addCommand({name:e.func,bindKey:e.bindKey,exec:t.commands.commands[e.func].exec}):t.commands.addCommand({name:e.func,bindKey:e.bindKey,exec:commands[e.func]})},registerGlobal:function(){document.body.addEventListener("keydown",function(e){var t="";if(e.ctrlKey&&(t+="ctrl-"),e.altKey&&(t+="mac"==platforms.platform?"option-":"alt-"),e.shiftKey&&(t+="shift-"),"mac"==platforms.platform&&e.metaKey&&(t+="command-"),t&&(this.isPrintableKey(e.keyCode)||-1!=$.inArray(e.keyCode,[37,38,39,40]))){t+=-1!=$.inArray(e.keyCode,[37,38,39,40])?this.changeDirectoryWordByCode(e.keyCode):this.isPrintableKey(e.keyCode).toLowerCase();var n=this.findGlobalEvent(t);n&&(_dg106.editor.commands.exec(n.func,_dg106.editor),e.stopPropagation(),e.preventDefault())}}.bind(this),!0)},findGlobalEvent:function(e){var t=_dg122.getConfig("hotkeys"),n=null,i="mac"==platforms.platform?"mac":"win";for(var s in t)if(t[s].bindKey[i].toLowerCase()==e.toLowerCase()&&t[s].global){n=t[s];break}return n},changeDirectoryWordByCode:function(e){switch(e){case 37:e="Left";break;case 38:e="Up";break;case 39:e="Right";break;case 40:e="Down"}return e},hotkeyExist:function(e){var t=ace.require("ace/lib/keys"),n=ace.edit("editor"),i=n.commands.parseKeys(e),s=!1;if(-1!=i.hashId){var a=t.KEY_MODS[i.hashId]+i.key;s=!!n.commands.commandKeyBinding[a]}return s},isPrintableKey:function(e){var t=ace.require("ace/lib/keys"),n=t.PRINTABLE_KEYS[e];return n?n:!1}},function(){window.gui=require("nw.gui"),gui.developing=gui.App.manifest.window.developing;var e=gui.Window.get();window.platforms={platform:"",specific:""};var t=navigator.userAgent.toLowerCase();if(t.match(/windows/)?(platforms.platform="win",t.indexOf("win64")>=0||t.indexOf("wow64")>=0?platforms.specific="windows64":platforms.specific="windows32"):t.match(/linux/)?(platforms.platform="linux",t.indexOf("i686")>=0?platforms.specific="linux32":t.indexOf("x86_64")>=0?platforms.specific="linux64":platforms.specific="linux32"):(platforms.platform="mac",platforms.specific="mac"),"mac"==platforms.platform){var n=new gui.Menu({type:"menubar"});try{n.createMacBuiltin("DebugGap"),e.menu=n}catch(i){console.log(i.message)}var s;localStorage.debuggap_version&&gui.App.manifest.version==localStorage.debuggap_version||(s='"/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister" -kill -r -domain local -domain system -domain user',require("child_process").exec(s,function(e,t,n){e||(localStorage.debuggap_version=gui.App.manifest.version)})),s='"/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/Support/lsregister" -f '+process.execPath.match(/^.*DebugGap\.app\//)[0],require("child_process").exec(s,function(e,t,n){console.log(arguments)})}localStorage.search_history&&delete localStorage.search_history}(),a.prototype={init:function(){this.initEvent()},initEvent:function(){},cancelClick:function(){this.close()},saveClick:function(){var e=$(".base-box-cover iframe")[0].contentWindow,t="";e&&(t=e.returnData(),1==t.status&&t.msg?_dg122.alert(t.msg):0==t.status&&t.msg&&_dg122.alert("Error:"+t.msg)),this.close(),this.save&&this.save.call(this)},resetConfig:function(){this.coverTransparent=!1,this.enableMove=!1,this.buttons={},this.ext=null},setConfig:function(e){this.resetConfig();for(var t in e)this[t]=e[t]},loadPage:function(e){this.content='<iframe class="setting-page" src="'+e+'"></iframe>'},initBoxOutline:function(){var e=this.height+20+40,t='style="width:'+this.width+"px;height:"+e+"px;margin-left:-"+this.width/2+"px;margin-top:-"+e/2+'px"',n='style="height:'+this.height+'px;"',i=[];i.push('<div class="base-box-cover" style="'+(this.coverTransparent?"background-color:transparent;":"")+'">'),i.push('<div class="base-box" ',t,">"),i.push('<div class="base-box-top"><span class="dg-close-btn"></span></div>'),i.push('<div class="base-box-content" ',n,">",this.content?this.content:"","</div>"),i.push('<div class="base-box-bottom">');for(var s in this.buttons)i.push('<button class="btn btn-primary btn-UI" value="',s,'">',this.buttons[s],"</button>");i.push("</div></div></div>"),$(document.body).append(i.join(""))},registerEvent:function(){var e=this;$(".base-box-bottom button").bind("click",function(){var t=$(this).attr("value")+"Click";e[t]&&e[t].call(e),e.ext&&e.ext[t]&&e.ext[t].call(e)}),$(".base-box-top .dg-close-btn").bind("click",function(){e.close()}),$(document).bind("keydown",{self:this},this._js_p1),this.enableMove&&$(".base-box").draggable()},unregisterEvent:function(){$(".base-box-bottom button").unbind("click"),$(".base-box-top .dg-close-btn").unbind("click"),$(document).unbind("keydown",this._js_p1),this.enableMove&&$(".base-box").draggable("destroy")},_js_p1:function(e){var t=e.data.self;27==e.keyCode&&t.close()},show:function(){this.initBoxOutline(),this.registerEvent(),this.isShowing=!0},injectVariables:function(e){if(e&&$(".setting-page").length){var t,n=$(".setting-page")[0].contentWindow;for(t in e)n[t]=e[t]}},close:function(){this.unregisterEvent(),$(".base-box-cover").remove(),this.isShowing=!1}},function(){var e=[];"mac"==platforms.platform?e.push(".ace_editor{","font-size:12px;line-height:16px;}"):e.push(".ace_editor{","font-size:14px;line-height:16px;}"),e.length&&(e.unshift("<style>"),e.push("</style>"),document.write(e.join("")))}(),function(){function e(){for(;;);}var t=require("fs"),n=require("nw.gui").App.manifest;try{var i=t.readFileSync("./main/components/editor/js/index.js");i=i.toString(),n.window.developing||!i.substr(0,100).match(/\n/)&&!n.window.toolbar||e()}catch(s){return void(!n.window.developing&&e())}}(),function(){G.receive("hashchanged",function(e){delete localStorage.search_history}),G.receive("cleanjob_deleteProject",function(e){var t=JSON.parse(localStorage.projects);delete t[e],localStorage.projects=JSON.stringify(t),delete localStorage["openfile_"+e]})}(),function(){$.ajax({url:"http://www.debuggap.com/package/version.json",dataType:"json",success:function(e){if(e.version&&e.version>gui.App.manifest.version){var t=(new Date).getTime(),n=localStorage.update_expired?localStorage.update_expired:0;if(n>t)return;localStorage.update_expired=t+864e5,_dg122.loadSettingPage("update",{width:400,height:300,buttons:{cancel:lanObject.common.close},coverTransparent:1},{data:e})}}})}(),o.prototype={init:function(e){this.selector=e,this.showNav(),this.bindEvent()},bindEvent:function(){var e=this,t=_dg122.getConfig("hotkeys");$(this.selector).on("click",".dropdown-toggle",function(){$(".nav-head .dropdown").removeClass("open"),$(this).parent().addClass("open"),e.showMenu($(this).attr("_index"))}),$(this.selector).on("click",".dropdown-menu li",function(n){var i=$(this).attr("hotkeyId"),s=$(this).attr("func");$(".nav-head .dropdown").removeClass("open"),i&&t[i]?_dg106.editor.execCommand(t[i].func):s&&(_dg106.editor.commands.commands[s]?_dg106.editor.execCommand(s):Y[s].call(e,this))})},generateNav:function(){var e=this.menuName,t=['<ul class="nav">'];for(var n in e)t.push('<li class="dropdown"><a class="dropdown-toggle" _index="'+e[n].index+'" data-toggle="dropdown" href="javascript:void(0)">'+e[n].name+"</a></li>");return t.push("</ul>"),t.join("")},showNav:function(){$(this.selector).html(this.generateNav())},showMenu:function(e){this.checkAutoSubmenu(this.menu[e]);var t=_dg107._dg6(this.menu[e]);$(".dropdown.open .dropdown-menu").remove(),$(".dropdown.open").append(t),J.register(".nav-head .dropdown-menu,.nav-head .dropdown",function(){return $(".nav-head .dropdown.open").removeClass("open"),$(".nav-head .dropdown-menu").remove(),!0})},checkAutoSubmenu:function(e){for(var t,n=0,i=e.length;i>n;n++)t=e[n],"|"!=t&&t.loadSub&&this[t.loadSub]&&this[t.loadSub].call(this,t)},loadOpenRecent:function(e){e.sub=[],$.each(this._dg115.getRecent(),function(t,n){n.length>100&&(n=n.slice(0,100)+"..."),e.sub.push({name:n,func:"openFileFromNavRecent"})}),e.sub.length||delete e.sub},loadOpenImportant:function(e){e.sub=[],$.each(this._dg115.getImportant(),function(t,n){n.length>100&&(n=n.slice(0,100)+"..."),e.sub.push({name:n,func:"openFileFromNavImportant"})}),e.sub.length?(e.sub.push("|"),e.sub.push({name:"Clear Items",func:"clearImportantFiles"})):delete e.sub}};var Y={copyItem:function(){_dg122.copy()},cutItem:_dg122.cut,pasteItem:_dg122.paste,close:function(){require("nw.gui").Window.get().close()},loadUIPage:function(){_dg122.loadSettingPage("UI",{width:1e3,height:600,buttons:{cancel:lanObject.common.close}})},loadLanguagePage:function(){for(var e,t,n=_dg122.getProjectPath()+"/language/",i=0,s={},a=_dg104._js_p3(n);i<a.length;){e=_dg104.getFileContentSync(n+a[i]);try{e=JSON.parse(e)}catch(o){i++;continue}e&&e.packageName&&(t=a[i].split(".")[0],s[t]=e.packageName),i++}_dg122.loadSettingPage("language",{width:565,height:250,buttons:{cancel:lanObject.common.close}},{config:s})},loadHotkeyPage:function(){_dg122.loadSettingPage("hotkey",{width:1e3,height:600,buttons:{cancel:lanObject.common.cancel,save:lanObject.common.save},save:function(){_dg108._dg119.overwriteHotkey()}})},loadEditorSetting:function(){G.send("editorSetting")},qrCode:function(){_dg122.loadSettingPage("QRCode",{width:1e3,height:600,buttons:{cancel:lanObject.common.close}})},decodeURL:function(){_dg122.loadSettingPage("encode_decode",{width:1e3,height:600,buttons:{cancel:lanObject.common.close}})},jsonFormat:function(){_dg104.openNewFile("Untitled.json");var e="json";_dg106.session.setMode("ace/mode/"+e),_dg106._dg111._dg56(e),_dg106.openfiles.recordFileMode(_dg106.getCurrentPath(),e)},launchDebugGap:function(){var e=location.origin+location.pathname;e=e.replace("components/editor/","components/debuggap/"),winInstance=window.open(e+"#DebugGap","DebugGap"),winInstance.focus()},openFileFromNavRecent:function(e){var t=$(e).text();_dg104.openTabFile(t)},openFileFromNavImportant:function(e){var t=$(e).text();_dg104.openTabFile(t),_dg121._dg115.setImportant(t,1)},clearImportantFiles:function(){_dg121._dg115.clearImportant()}};G.receive("ready",function(){window._dg121=new o,_dg121.init(".nav-head")}),r.prototype={initEvent:function(){if(!this.eventInited){this.eventInited=!0;var e=this;$(".nav-shortcut .debug-btn img").bind("click",function(){"active"==e.debugStatus?(e.debugStatus="debugging",e.setDebugButton(),e.openSimulator()):"debugging"==e.debugStatus&&(e.debugStatus="active",e.setDebugButton(),e.closeSimulator())}),$("body").on("click",".simulator-bottom span",function(){var t=$(this).attr("func");t&&e[t].call(e)})}},rotate:function(){},back:function(){$("#nw_simulator").length&&$("#nw_simulator")[0].contentWindow.history.go(-1)},setDebugButton:function(){var e="./css/images/editor/";e+="debugging"==this.debugStatus?"stop_btn.gif":"active"==this.debugStatus?"active_btn.gif":"run_btn.gif",$(".nav-shortcut .debug-btn").length||$(".nav-shortcut").html('<div class="debug-btn"><img src="" /></div>'),$(".nav-shortcut .debug-btn img").attr("src",e)},load:function(e){this.project=e,this.project.debugURL?this.debugStatus="active":this.debugStatus="inactive",this.setDebugButton(),this.initEvent()},openSimulator:function(){if(!$("#nw_simulator").length){var e=document.createElement("div");e.className="simulator";var t=[];t.push('<div class="simulator-top"></div>'),t.push('<div class="simulator-middle">'),t.push('<div class="simulator-cover"></div>'),t.push('<iframe nwdisable nwfaketop id="nw_simulator"></iframe>'),t.push("</div>"),t.push('<div class="simulator-bottom">'),t.push('<div><span func="rotate">Rotate</span></div><div><span func="settting" class="sm-setting"></span></div><div><span func="back">Back</span></div>'),t.push("</div>"),e.innerHTML=t.join(""),$(document.body).append(e),this.setUserAgent()}$(".simulator").show(),$("#nw_simulator").attr("src",this.project.debugURL)},closeSimulator:function(){$(".simulator").hide(),$("#nw_simulator").attr("src","")},setUserAgent:function(){var e=_dg122.getConfig("simulator"),t=e.platforms[e.active].userAgent;$("#nw_simulator").attr("nwUserAgent",t)},bindFrameEvent:function(){var e=require("nw.gui"),t=e.Window.get();t.on("document-start",this.documentStart.bind(this),!1),t.on("document-end",this.documentEnd.bind(this),!1)},documentStart:function(e){var t=[];this.exec(e,t.join("\n"))},documentEnd:function(e){},exec:function(e,t){var n=require("nw.gui"),i=n.Window.get();i.eval(e,t),i=null}},c.prototype={init:function(){$(".nav-shortcut").append('<div class="nav-filepath"></div>'),this.initEvent()},initEvent:function(){G.receive("editor.js/modifyfilepath",function(e){$(".nav-filepath").text(e)})}},h.prototype={_dg0:function(e){var t=this._js_p3(e,1);return t=this._js_p2(t),{path:e,files:t}},getFilesUnderPathSync:function(e){var t=this._js_p3(e,0);return t=this._js_p2(t),{path:e,files:t}},getFilesUnderPath:function(e){var t=$.Deferred();return this._js_p4(e,function(n){n=this._js_p2(n),t.resolve({path:e,files:n})}.bind(this)),t.promise()},_js_p2:function(e){for(var t,n=[],i=[],s=[],a=0,o=e.length;o>a;a++)"string"==typeof e[a]?n.push(e[a]):(t=Object.keys(e[a])[0],e[a][t]=this._js_p2(e[a][t]),i.push(e[a]));return n.sort(function(e,t){return e.toLowerCase()>=t.toLowerCase()?1:-1}),i.sort(function(e,t){return Object.keys(e)[0].toLowerCase()>=Object.keys(t)[0].toLowerCase()?1:-1}),s=i.concat(n),n=null,i=null,s},_js_p3:function(e,t){for(var n,i,s=this.fs.readdirSync(e),a=[],o=0,r=s.length;r>o;o++){n=s[o];try{this.isDirectory(e+_dg122.getPathSplitChar()+n)?(i={},i[n]=t?this._js_p3(e+_dg122.getPathSplitChar()+n,t):[],a.push(i)):a.push(n)}catch(c){continue}}return a},_js_p4:function(e,t){this.fs.readdir(e,function(n,i){if(n)return void t([]);for(var s,a,o=[],r=0,c=i.length;c>r;r++){s=i[r];try{this.isDirectory(e+_dg122.getPathSplitChar()+s)?(a={},a[s]=[],o.push(a)):o.push(s)}catch(l){continue}}t(o)}.bind(this))},getFileContentSync:function(e){var t=this.fs.readFileSync(e);return t=t.length?t.toString():""},getFileContent:function(e){var t=$.Deferred();return this.fs.readFile(e,function(n,i){n?t.reject():t.resolve(i.toString(),e)}),t.promise()},saveFile:function(e,t){var n=1;try{this.fs.writeFileSync(e,t)}catch(i){alert(i.message),n=0}return n},deleteFile:function(e){var t=1;try{this.fs.unlinkSync(e)}catch(n){alert(n.message),t=0}return t},openFile:function(e){var t=1;try{_dg106.setValue(e,this.getFileContentSync(e))}catch(n){alert(n.message),t=0}return t},openTabFile:function(e){var t=1;try{_dg106._dg4(e,this.getFileContentSync(e))}catch(n){alert(n.message),t=0}return t},openNewFile:function(e){_dg106.addNewFile()},createFolder:function(e){var t=1;try{this.fs.mkdirSync(e)}catch(n){alert(n.message),t=0}return t},deleteFolder:function(e){var t=1;try{this.fs.rmdirSync(e)}catch(n){alert(n.message),t=0}return t},rename:function(e,t){var n=1;try{this.fs.renameSync(e,t)}catch(i){alert(i.message),n=0}return n},isDirectory:function(e){try{var t=this.fs.statSync(e);if(t.isDirectory())return!0}catch(n){}return!1},isExist:function(e){var t;return t=this.fs.existsSync(e)},filterAllFilesByPath:function(e,t){var n=[];return t.exclude||(t.exclude=[]),t.extention||(t.extention=[]),this._js_p5(e,t,n),n},_js_p5:function(e,t,n){for(var i,s,a=this.fs.readdirSync(e),o=0,r=a.length;r>o;o++){i=a[o],s=e+i;try{this.isDirectory(s)?-1==$.inArray(i,t.exclude)&&this._js_p5(s+_dg122.getPathSplitChar(),t,n):-1!=$.inArray(_dg122.getExtension(s),t.extention)&&n.push(s)}catch(c){continue}}},fileDialog:function(e){$(".fileOpener").remove();var t="file_"+(new Date).getTime();$(".nav-head").append('<input style="display:none;" class="fileOpener" type="file" id='+t+" />"),setTimeout(function(){$("#"+t).click()},10),$("#"+t).change(function(){var n=$("#"+t).val();n&&e(n)})},directoryDialog:function(e){$(".fileOpener").remove();var t="file_"+(new Date).getTime();$(".nav-head").append('<input style="display:none;" nwdirectory class="fileOpener" type="file" id='+t+" />"),setTimeout(function(){$("#"+t).click()},10),$("#"+t).change(function(){var n=$("#"+t).val();n&&e(n)})},saveAsDialog:function(e,t){var n=$.Deferred();$(".fileOpener").remove();var i="file_"+(new Date).getTime();"win"!=platforms.platform&&(e=process.env.HOME+"/"+e),$(".nav-head").append('<input style="display:none;" nwsaveas="'+e+'" class="fileOpener" type="file" id='+i+" />"),$("#"+i).click();var s=this;return $("#"+i).change(function(){var e=$("#"+i).val();if(e){var a=s.saveFile.call(s,e,t);a?n.resolve(e):n.reject(e)}}),n.promise()}},d.prototype={init:function(){this._dg1()},_dg1:function(){var e=this;G.receive("openfiles/addPath",function(t){var n=require("fs");n.stat(t,function(n,i){n||(e.lists[t]=i.mtime.getTime())})}),G.receive("openingfile",function(t){if(!_dg106.openfiles.currentFiles[t]){var n=require("fs");n.stat(t,function(n,i){n||(e.lists[t]=i.mtime.getTime())})}}),G.receive("saveFile",function(t){if(e.lists[t]){var n=require("fs");n.stat(t,function(n,i){n||(e.lists[t]=i.mtime.getTime())})}}),G.receive("openfiles/closePath",function(t){if(delete e.lists[t],6==Math.floor(10*Math.random())){var n=_dg106.openfiles.currentFiles,i=_dg106.getCurrentPath();for(var s in e.lists)s==i||n[s]||delete e.lists[t]}}),G.receive("openingfile|editor/click",function(t){if(e.lists[t]){var n=require("fs");n.stat(t,function(n,i){if(!n){var s=e.lists[t],a=i.mtime.getTime();a>s&&(e.lists[t]=a,G.send("modifyReload",t))}})}})}},u.prototype={init:function(){this._dg1(),this.initEvent(),this.loadOpeningFiles()},initEvent:function(){var e=this;$(e.selector+" ul").on("click","li",function(t){var n=$(this).attr("path");e.activePath(n),"searchResultTab"==$(this).attr("id")?_dg120.show():(_dg120.hide(),e.openActivePath(n),G.send("resource_tree.js/toggleActiveStatus",n))}),$(e.selector+" ul").on("click",".close",function(t){var n=$(this).parent().attr("path");e.closePath(n),t.stopPropagation()}),$(".resource-recent .resource-title").append('<span class="close" title="Close All"></span>'),$(".resource-recent .resource-title").on("click",".close",function(t){for(var n in e.currentFiles)e.closePath(n)})},initDragging:function(){if(!$(".resource-recent li").length)return void(this.dragComponents=null);var e=0,t=0,n=[],i=this;this.dragComponents=$(".resource-recent li"),this.dragComponents.draggable({axis:"y",containment:"parent",delay:200,distance:2,start:function(i,s){t=$(this).height(),e=$(this).parent().height()-t,$(this).addClass("dragging"),n=$(".resource-recent li").not(".dragging")},stop:function(e){$(this).removeClass("dragging"),n=$(".resource-recent li"),n.sort(function(e,t){return parseInt($(e).css("top"))>parseInt($(t).css("top"))?1:-1}),n.each(function(e){$(this).css("top",e*t)});var s={},a=[];n.each(function(e,t){var n=$(this).attr("path");a.push(n),s[n]=i.currentFiles[n]}),i.currentFiles=s;var o=location.hash;o&&(o=o.slice(1),localStorage["openfile_"+o]=JSON.stringify(a));var r=n.eq(0).index();0!=r&&n.eq(0).insertBefore($(".resource-recent li").eq(0));var c=$(".resource-recent li").eq(0);n.slice(1).each(function(){$(this).insertAfter(c),c=$(this)})},drag:function(e,i){var s,a=i.position.top;n.sort(function(e,t){return parseInt($(e).css("top"))>parseInt($(t).css("top"))?1:-1}),s=Math.round(a/t);for(var o=0;o<n.length;o++)s>o?$(n[o]).css("top",t*o):$(n[o]).css("top",t*(o+1));
}})},destroyDragging:function(){this.dragComponents&&(this.dragComponents.each(function(){try{$(this).draggable("destroy")}catch(e){}}),this.dragComponents=null)},_dg1:function(){var e=this;G.receive("saveFile",function(t){e.setModified(t,0),e.currentFiles[t]&&delete e.currentFiles[t].content}),G.receive("open_files.js/saveAsFile",function(t,n){e.currentFiles[n]=e.currentFiles[t],e.currentFiles[t]=null,delete e.currentFiles[t];var i=e.getNodeByPath(t);i.children(".status").remove(),i.attr("path",n),i.attr("title",n),i.children(".open-files-name").html(e.getOpenfileName(n)),e.editor.setCurrentPath(n),e.storeInLocalStorage(n);var s=ace.require("ace/lib/fileMode").getFileMode(n);s&&"text"!=s&&(_dg106.session.setMode("ace/mode/"+s),G.send("filemode",s))}),G.receive("treeOpenFile",function(t){e.openActivePath(t),e.activePath(t),_dg120.hide()}),G.receive("open_files.js/deleteFile",function(t){e.getNodeByPath(t).children(".close").trigger("click")}),G.receive("open_files.js/renameFile",function(t,n){var i=e.getNodeByPath(t),s=e.getOpenfileName(n);i.find(".open-files-name").html(s),i.attr("path",n),e.currentFiles[t]&&(e.currentFiles[n]=e.currentFiles[t],delete e.currentFiles[t]),_dg106.getCurrentPath()==t&&_dg106.setCurrentPath(n)}),G.receive("hashchanged",function(t){e.loadOpeningFiles(t)})},activePath:function(e){$(this.selector+" ul li").each(function(t,n){$(n).attr("path")==e?$(n).addClass("active"):$(n).removeClass("active")})},openActivePath:function(e){var t=this.currentFiles[e];if(t){void 0!=t.content?this.editor.setValue(e,t.content):_dg104.openFile(e),t.undoStack&&(this.editor.session.$undoManager.$undoStack=t.undoStack,this.editor.session.$undoManager.$redoStack=t.redoStack);var n=t.scroll?t.scroll:{left:0,top:0};this.editor.setCurrentScroll(n)}},fileExist:function(e){var t=!!this.currentFiles[e];return t},addPath:function(e){if(!this.fileExist(e)){var t=this.getOpenfileName(e),n=[];n.push('<li title="'+e+'" path="',e,'"><span class="close" title="Close"></span><span class="open-files-name">',t,"</span></li>"),$(this.selector+" ul").append(n.join("")),this.currentFiles[e]={},this.storeInLocalStorage(e),this.destroyDragging(),this.resetItemPosition(),G.send("openfiles/addPath",e)}},resetItemPosition:function(){var e=$(this.selector+" ul li"),t=e.length,n=0,i=e.eq(0).height();for($(this.selector+" ul").css("height",i*t),n=0;t>n;n++)e.eq(n).css("top",i*n);this.initDragging()},resetOpenfiles:function(){this.currentFiles={},$(this.selector+" ul").html("").css("height",0)},loadOpeningFiles:function(e){var t=location.hash;if(e?t=e:t&&(t=t.slice(1)),t){this.resetOpenfiles();var n="openfile_"+t;if(localStorage[n]){var i=JSON.parse(localStorage[n]);if(!$.isArray(i))return;for(var s=0,a=i.length;a>s;s++)"Searching Results"!=i[s]&&this.addPath(i[s])}}},storeInLocalStorage:function(e){var t=location.hash;if(t&&-1==$.inArray(e,["Searching Results"])){t=t.slice(1);var n=[],i="openfile_"+t;if(localStorage[i]){try{n=JSON.parse(localStorage[i])}catch(s){return void delete localStorage[i]}var a=$.inArray(e,n);arguments[1]?-1!=a&&n.splice(a,1):-1==a&&n.push(e)}else 1==arguments.length&&(n=[e]);localStorage[i]=JSON.stringify(n)}},recordUndoRedo:function(e,t){this.fileExist(e)&&(this.currentFiles[e].undoStack=t.$undoStack,this.currentFiles[e].redoStack=t.$redoStack)},recordScroll:function(e,t,n){if(this.fileExist(e)){var i=this.currentFiles[e].scroll;i||(i={left:0,top:0}),i[t]=n,this.currentFiles[e].scroll=i}},recordContent:function(e,t){this.fileExist(e)&&this.getModifiedStatus(e)&&(this.currentFiles[e].content=t)},recordFileMode:function(e,t){this.currentFiles[e]&&(this.currentFiles[e].filemode=t)},getFileMode:function(e){var t=this.currentFiles[e]&&this.currentFiles[e].filemode;return t?t:null},setModified:function(e,t){var n=this.getNodeByPath(e);n.children(".status").remove(),t&&n.append('<span class="status" title="Modified">M</span>')},addNewFile:function(e){var t=[];t.push('<li title="'+e+'" path="',e,'" class="active"><span class="close" title="Close"></span><span class="open-files-name">',e,'</span><span title="New" class="status">N</span></li>'),$(this.selector+" ul").append(t.join("")),this.activePath(e),this.currentFiles[e].content="",this.destroyDragging(),this.resetItemPosition()},showSearchResult:function(e){if($("#searchResultTab").length)return void this.activePath(e);var t=[];t.push('<li id="searchResultTab" title="'+e+'" path="',e,'" class="active"><span class="close" title="Close"></span><span class="open-files-name">',e,"</span></li>"),$(this.selector+" ul").append(t.join("")),this.activePath(e),this.destroyDragging(),this.resetItemPosition()},getUntitledName:function(){var e="untitled";if(this.currentFiles[e])for(var t=1;100>t&&(e="untitled("+t+")",this.currentFiles[e]);t++);return 30==t?(alert("Limit of untitled file is 30"),null):(this.currentFiles[e]={},e)},getModifiedStatus:function(e){var t=!1,n=this.getNodeByPath(e);return n.length&&(n=n.children("span.status"),n.length&&(t=n.text())),t},closePath:function(e){var t=this;if(this.destroyDragging(),this.getModifiedStatus(e)){var n=this.currentFiles[e].content;n||(n="");var i=!1;n&&(i=confirm(lanObject.common.saveChanges)),i?commandsAction.saveFile(e,n).done(function(e){t.cleanRecord(e)}):this.cleanRecord(e)}else this.cleanRecord(e);this.storeInLocalStorage(e,1),this.resetItemPosition(),G.send("openfiles/closePath",e)},cleanRecord:function(e){var t=this.getNodeByPath(e),n=t.prev();n.length||(n=t.next());var i=n.attr("path");i?this.openActivePath(i):e==this.editor.getCurrentPath()&&this.editor.clean(),t.remove(),delete this.currentFiles[e]},getOpenfileName:function(e){var t=e.split(_dg122.getPathSplitChar()).slice(-2);return t[0]="<i>"+t[0]+"/</i>",t.join(" ")},getNodeByPath:function(e){return $(this.selector+' ul li[path="'+_dg122.addBackslashForPath(e)+'"]')}},p.prototype={init:function(){this.initEvent(),this._dg1()},_dg1:function(){var e=this;G.receive("modifyReload",function(t){"M"==_dg106.openfiles.getModifiedStatus(t)?_dg122.confirm(t+"\n\n"+lanObject.editor.modifyReloadTips).done(function(){e.reloadEditorContent(t)}):e.reloadEditorContent(t)}),G.receive("ready",function(){e._dg112.init()})},initEvent:function(){var e=this;e.editor=ace.edit("editor"),e.session=e.editor.getSession(),e.session.on("change",function(){e.comingFile||e.currentFile?e.comingFile&&e.currentFile&&e.comingFile==e.currentFile&&(e.currentFile&&!e.openfiles.fileExist(e.currentFile)?(e._dg4(e.currentFile,e.editor.getValue()),e.openfiles.setModified(e.currentFile,!0)):e.currentFile&&!/^untitled/.test(e.currentFile)&&e.openfiles.setModified(e.currentFile,!0),e._dg5(),G.send("editor.js/editingFile",arguments[0],arguments[1])):e.addOpenFile()}),e.session.on("change",function(e){G.send("editor.js/fileChanged",arguments[0],arguments[1])}),e.editor.on("paste",function(t){if(/^[a-z0-9\(\)]*$/i.test(e.comingFile)&&t.text){var n=t.text,i=ace.require("ace/lib/fileMode").getFileModeByContent(n);e.session.setMode("ace/mode/"+i),e._dg111._dg56(i),e.openfiles.recordFileMode(e.currentFile,i)}}),e.session.on("changeScrollTop",function(t){e.currentFile&&e.currentFile==e.comingFile&&e.openfiles.recordScroll(e.currentFile,"top",t),G.send("editor.js/changeScroll")}),e.session.on("changeScrollLeft",function(t){e.currentFile&&e.currentFile==e.comingFile&&e.openfiles.recordScroll(e.currentFile,"left",t),G.send("editor.js/changeScroll")}),$(document.body).bind("dragover",function(e){e.preventDefault()}),$(document.body).bind("drop",function(e){e.preventDefault();for(var t,n=e.originalEvent.dataTransfer.files.length,i=0;n>i;)t=e.originalEvent.dataTransfer.files[i].path,_dg104.isDirectory(t)||_dg104.openTabFile(t),i++}),$(document.body).on("click",".ace_content",function(t){G.send("editor/click",e.getCurrentPath())})},setValue:function(e,t){if(t.length/1024/1024/100>1)return void _dg122.alert(lanObject.error.fileIsTooBig);if(_dg120.hide(),!e||e!=this.currentFile){this.openfiles.activePath(e),$(".image-container").remove();var n=ace.require("ace/lib/fileMode").getFileMode(e,t);if(n||!/\uFFFD/.test(t))n||(n=this.openfiles.getFileMode(e)?this.openfiles.getFileMode(e):"text"),"text"==n&&(n=ace.require("ace/lib/fileMode").getFileModeByContent(t),n||(n="text")),this.comingFile=e,this._dg5(),this.session.setMode("ace/mode/"+n),this.session.setValue(t),this.setCurrentPath(e),this._dg112.show(),G.send("openingfile",e),G.send("filemode",n);else{var i=ace.require("ace/lib/fileMode").getMediaMode(e,require("fs"));i?(this.showImage(e,i),this.setCurrentPath(e)):_dg122.confirm("Do you want to open it by default application?").done(function(){require("nw.gui").Shell.openItem(e)}),this._dg111.closeComponents(),this._dg112.hide()}}},_dg4:function(e,t){this.setValue(e,t),this.openfiles.addPath(e),this.openfiles.activePath(e),G.send("addTabFile",e)},addNewFile:function(e){var t=this.openfiles.getUntitledName();t&&(e=e?e:"",this.setValue(t,e),this.openfiles.addNewFile(t))},addOpenFile:function(){var e=this.openfiles.getUntitledName();this.setCurrentPath(e),this.openfiles.addNewFile(e),this._dg5()},showImage:function(e,t){var n=["<ul>"];for(var i in t)n.push("<li><span>"+i+"</span> : "+t[i]+"</li>");n.push("</ul>"),n=n.join(""),$(".content").append('<div class="image-container"><img src="'+e+'" />'+n+"</div>")},setCurrentPath:function(e){this.currentFile=e,this.comingFile=e,$("#file_path").val(e),G.send("editor.js/modifyfilepath",e)},getCurrentPath:function(){return $("#file_path").val()},getCurrentScroll:function(){var e=ace.edit("editor").renderer;return{left:e.scrollLeft,top:e.scrollTop}},setCurrentScroll:function(e){var t=ace.edit("editor").renderer;e.left&&t.scrollToX(e.left),e.top&&t.scrollToY(e.top)},_dg5:function(){(this.session.$undoManager.$undoStack.length||this.session.$undoManager.$redoStack.length)&&this.openfiles.recordUndoRedo(this.currentFile,this.session.$undoManager),this.openfiles.recordContent(this.currentFile,this.session.getValue())},reloadEditorContent:function(e){try{var t=_dg104.getFileContentSync(e);_dg106.session.setValue(t),G.send("saveFile",e),setTimeout(function(){_dg106.session.selection.clearSelection()},10)}catch(n){}},clean:function(){this.session.setValue(""),$(".image-container").remove(),$(".nav-shortcut .filetool-section ").text(""),$("#file_path").val(""),this.currentFile="",this.comingFile=""}},ace.define("ace/lib/fileMode",["require","exports","module"],function(e,t,n){var i=e("./imageInfo"),s={abap:["ABAP","abap","text/x-abap","other"],asciidoc:["AsciiDoc","asciidoc","text/x-asciidoc","other"],c9search:["C9Search","c9search","text/x-c9search","hidden"],c_cpp:["C, C++","c|cc|cpp|cxx|h|hh|hpp","text/x-c"],clojure:["Clojure","clj","text/x-script.clojure"],coffee:["CoffeeScript","*Cakefile|coffee|cf","text/x-script.coffeescript"],coldfusion:["ColdFusion","cfm","text/x-coldfusion","other"],csharp:["C#","cs","text/x-csharp"],css:["CSS","css","text/css"],dart:["Dart","dart","text/x-dart"],diff:["Diff","diff|patch","text/x-diff","other"],glsl:["Glsl","glsl|frag|vert","text/x-glsl","other"],golang:["Go","go","text/x-go"],groovy:["Groovy","groovy","text/x-groovy","other"],haml:["Haml","haml","text/haml","other"],haxe:["haXe","hx","text/haxe","other"],html:["HTML","htm|html|xhtml","text/html"],jade:["Jade","jade","text/x-jade"],java:["Java","java","text/x-java-source"],jsp:["JSP","jsp","text/x-jsp","other"],javascript:["JavaScript","js","application/javascript"],json:["JSON","json","application/json"],jsx:["JSX","jsx","text/x-jsx","other"],latex:["LaTeX","latex|tex|ltx|bib","application/x-latex","other"],less:["LESS","less","text/x-less"],lisp:["Lisp","lisp|scm|rkt","text/x-lisp","other"],liquid:["Liquid","liquid","text/x-liquid","other"],lua:["Lua","lua","text/x-lua"],luapage:["LuaPage","lp","text/x-luapage","other"],makefile:["Makefile","*GNUmakefile|*makefile|*Makefile|*OCamlMakefile|make","text/x-makefile","other"],markdown:["Markdown","md|markdown","text/x-markdown","other"],objectivec:["Objective-C","m","text/objective-c","other"],ocaml:["OCaml","ml|mli","text/x-script.ocaml","other"],perl:["Perl","pl|pm","text/x-script.perl"],pgsql:["pgSQL","pgsql","text/x-pgsql","other"],php:["PHP","php|phtml","application/x-httpd-php"],powershell:["Powershell","ps1","text/x-script.powershell","other"],python:["Python","py","text/x-script.python"],r:["R","r","text/x-r","other"],rdoc:["RDoc","Rd","text/x-rdoc","other"],rhtml:["RHTML","Rhtml","text/x-rhtml","other"],ruby:["Ruby","ru|gemspec|rake|rb","text/x-script.ruby"],scad:["OpenSCAD","scad","text/x-scad","other"],scala:["Scala","scala","text/x-scala"],scss:["SCSS","scss|sass","text/x-scss"],sh:["SH","sh|bash|bat","application/x-sh"],stylus:["Stylus","styl|stylus","text/x-stylus"],sql:["SQL","sql","text/x-sql"],svg:["SVG","svg","image/svg+xml","other"],tcl:["Tcl","tcl","text/x-tcl","other"],text:["Text","txt","text/plain","hidden"],textile:["Textile","textile","text/x-web-textile","other"],typescript:["Typescript","ts|str","text/x-typescript"],xml:["XML","xml|rdf|rss|wsdl|xslt|atom|mathml|mml|xul|xbl|plist","application/xml"],xquery:["XQuery","xq","text/x-xquery"],yaml:["YAML","yaml","text/x-yaml"]},a={};$.each(s,function(e,t){t[1].split("|").forEach(function(t){a[t]=e})}),t.getFileMode=function(e,t){var n=e.slice(e.lastIndexOf(".")+1);return n=a[n],"javascript"==n&&t&&/(import\x20|export\x20|\x20extends\x20|\x20let\x20)/.test(t)&&(n="jsx"),n},t.getFileModeByContent=function(e){var t="text";try{JSON.parse(e),t="json"}catch(n){if(/^\s*<\?php/.test(e))t="php";else{var i,s;i=[/<\x20*html/,/<\x20*body/,/<\x20*div/,/class/,/<\x20*span/,/style/,/<\x20*h[1-6]/,/<\x20*input/,/<\x20*form/,/<\x20*button/,/<\x20*ul/,/<\x20*li/,/<\x20*a/,/<\x20*p/,/<\x20*img/],s=0;for(var o=0,r=i.length;r>o;o++)i[o].test(e)&&s++;if(s>=3&&(t="html"),"text"==t){i=[/width\s*:/,/height\s*:/,/position\s*:/,/display\s*:/,/padding\s*:/,/float\s*:/,/top\s*:/,/left\s*:/,/right\s*:/,/bottom\s*:/,/z-index\s*:/],s=0;for(var o=0,r=i.length;r>o;o++)i[o].test(e)&&s++;s>=3&&(t="css")}}}return t=a[t]},t.getMediaMode=function(e,t){var n=t.readFileSync(e),s=i(n);return"image"!=s.type&&(s=null),s}}),ace.define("ace/lib/imageInfo",["require","exports","module"],function(e,t,n){function i(e,t,n){if(e.readUInt32)return e.readUInt32(t,n);var i;if(n){if(e.readUInt32BE)return e.readUInt32BE(t);i=(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]}else{if(e.readUInt32LE)return e.readUInt32LE(t);i=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}return i}function s(e,t,n){if(e.readUInt16)return e.readUInt16(t,n);var i;if(n){if(e.readUInt16BE)return e.readUInt16BE(t);i=(e[t]<<8)+e[t+1]}else{if(e.readUInt16LE)return e.readUInt16LE(t);i=e[t]+(e[t+1]<<8)}return i}function a(e,t,n){n>7&&(t+=Math.floor(n/8),n%=8);var i=e[t];7>n&&(i>>>=7-n);var s=1&i;return s}function o(e,t,n,i,s){var o=0,r=!1;s&&(a(e,t,n)>0&&(r=!0),i--,n++);for(var c=[],l=0;i>l;l++){var h=a(e,t,n+l);l>0&&(i-l)%8==0&&(c.push(o),o=0),o<<=1,o|=h}return c.push(o),o=new Buffer(c),o.negative=!!r,o}function r(e){var t=[73,72,68,82],n=12;return d(e,n,t)?(n+=4,{type:"image",format:"PNG",mimeType:"image/png",width:i(e,n,!0),height:i(e,n+4,!0)}):!1}function c(e){for(var t=2,n=e.length,i=[255,[192,194]];n>t;){if(d(e,t,i))return t+=5,{type:"image",format:"JPG",mimeType:"image/jpeg",width:s(e,t+2,!0),height:s(e,t,!0)};t+=2;var a=s(e,t,!0);t+=a}}function l(e){var t=6;return{type:"image",format:"GIF",mimeType:"image/gif",width:s(e,t,!1),height:s(e,t+2,!1)}}function h(t){var n,i=8,a=0;if(67===t[0])try{t=e("zlib").inflate(t.slice(8,100)),i=0}catch(r){return{type:"flash",format:"SWF",mimeType:"application/x-shockwave-flash",width:null,height:null}}var c=o(t,i,a,5)[0];a+=5,n=o(t,i,a,c,!0);var l=(c>9?s(n,0,!0):n[0])*(n.negative?-1:1);a+=c,n=o(t,i,a,c,!0);var h=(c>9?s(n,0,!0):n[0])*(n.negative?-1:1);a+=c,n=o(t,i,a,c,!0);var d=(c>9?s(n,0,!0):n[0])*(n.negative?-1:1);a+=c,n=o(t,i,a,c,!0);var u=(c>9?s(n,0,!0):n[0])*(n.negative?-1:1);return{type:"flash",format:"SWF",mimeType:"application/x-shockwave-flash",width:Math.ceil((h-l)/20),height:Math.ceil((u-d)/20)}}function d(e,t,n){for(var i=n.length,s=0;i>s;s++){var a=e[s+t],o=n[s],r=!1;if("number"==typeof o)r=o===a;else for(var c in o){var l=o[c];l===a&&(r=!0)}if(!r)return!1}return!0}n.exports=function(e,t){var n=[137,80,78,71,13,10,26,10],i=[255,216,255],s=[71,73,70,56,[55,57],97],a=[[70,67],87,83];return d(e,0,n)?r(e):d(e,0,i)?c(e):d(e,0,s)?l(e):d(e,0,a)?h(e):!1}}),f.prototype={_dg6:function(e,t){var n=platforms.platform;"mac"!=n&&(n="win");for(var i,s,a=(_dg106.editor.commands.commands,_dg122.getConfig("hotkeys")),o=['<ul class="dropdown-menu'+(t?" "+t:"")+'">'],r=0,c=e.length;c>r;r++)if(i=e[r],"|"==i)o.push('<li class="divider"></li>');else if(i.sub){for(var l=['<ul class="dropdown-submenu">'],h=i.sub,d=0,u=h.length;u>d;d++)"|"==h[d]?l.push('<li class="divider"></li>'):(func=h[d].func?h[d].func:"",l.push("<li func="+func+'><a href="javascript:void(0)">'+h[d].name+"</a></li>"));l.push("</ul>"),o.push('<li class="sub-menu"><a href="javascript:void(0)">'+i.name+'<span class="arrow"></span></a>'+l.join("")+"</li>")}else i.hotkeyId&&a[i.hotkeyId]?(s=a[i.hotkeyId],s=s.bindKey[n],o.push("<li hotkeyId="+i.hotkeyId+'><a href="javascript:void(0)">'+i.name),o.push('<span class="hotkey-desc">',_dg122.changeHotkey(s),"</span>","</a>")):i.bindKey?(o.push("<li ",this._js_p6(i),'><a href="javascript:void(0)">'+i.name),o.push('<span class="hotkey-desc">',_dg122.changeHotkey(i.bindKey[n]),"</span>","</a>")):o.push("<li ",this._js_p6(i),'><a href="javascript:void(0)">'+i.name+"</a>"),o.push("</li>");return o.push("</ul>"),o.join("")},_js_p6:function(e){var t=[];for(var n in e)"name"!=n&&"bindKey"!=n&&t.push(n,'="',e[n],'" ');return t.join("")},bindEvent:function(){var e=this;$(document).ready(function(){$(e.selector).on("mouseover",".sub-menu",function(e){_dg122.isMouseover(this,e)&&($(this).addClass("open"),$(this).children(".dropdown-submenu").css({left:$(this).width()}))}),$(e.selector).on("mouseout",".sub-menu",function(e){_dg122.isMouseout(this,e)&&$(this).removeClass("open")})})}},g.prototype={init:function(){if(localStorage.recent)try{this.recent=JSON.parse(localStorage.recent)}catch(e){}if(localStorage.important)try{this.important=JSON.parse(localStorage.important)}catch(e){}this._dg1()},_dg1:function(){var e=this;G.receive("addTabFile",function(t){e.setRecent(t)}),G.receive("openingfile",function(t){e.setImportant(t)})},setImportant:function(e,t){if(!/^untitled/.test(e)){t=t?t:1;var n=this.important[e]?this.important[e]:0;this.important[e]=n+t;for(var i=Object.keys(this.important),s=[],a=0,o=i.length;o>a;a++)s.push(this.important[i[a]]);try{var r=[];s.sort(function(e,t){var n=e>=t?-1:1;return r.push(n),n}),i.sort(function(){return r.shift()})}catch(c){return}this.important={};for(var a=0,o=i.length;o>a&&!(a>=20);a++)this.important[i[a]]=s[a];localStorage.important=JSON.stringify(this.important)}},getImportant:function(){var e=0,t=[];for(key in this.important){if(!(10>e))break;t.push(key),e++}return t},clearImportant:function(){this.important={},localStorage.important=JSON.stringify(this.important)},setRecent:function(e){if(!/^untitled/.test(e)){var t=this.recent.indexOf(e);-1!=t&&this.recent.splice(t,1),this.recent.unshift(e),this.recent=this.recent.slice(0,10),localStorage.recent=JSON.stringify(this.recent)}},getRecent:function(){return this.recent}},m.prototype={init:function(){this.initComponents(),this.initEvent(),this._dg1()},initEvent:function(){var e=this;$(".resource-nav span").bind("click",function(){$(".resource-nav span").removeClass("active"),$(this).addClass("active"),$(".resource-content").children().addClass("resource-hidden"),$(".resource-content").children().eq($(this).index()).removeClass("resource-hidden");var t=$(this).attr("name").toLowerCase(),n=e[t+"Finished"];n&&n.call(e)})},_dg1:function(){var e=this;G.receive("resource_nav.js/gotoTab",function(t){e.gotoTab(t)})},initComponents:function(){var e=this.components,t=[];t.push('<span class="active" title="',e[0].title,'" name="',e[0].name,'">',e[0].value,"</span>");for(var n=1;n<e.length;n++)t.push('<span title="',e[n].title?e[n].title:"",'" name="',e[n].name,'">',e[n].value,"</span>");$(".resource-nav").html(t.join(""))},gotoTab:function(e){$('.resource-nav span[name="'+e+'"]').click()},allFinished:function(){if(!this.allProjectsInited){this.allProjectsInited=!0;var e=_dg122.getConfig("projects");e=_dg122.sortObject(e);var t,n="",i=!1;for(var s in e){n="resource-tree-"+s,n=n.replace(/\./g,"-"),$(".all-resource-panel").append('<div class="all-resource-tree '+n+'"></div>'),t=new b("."+n);try{t.initTree(s,e[s].path)}catch(a){i=!0,delete e[s]}}i&&(localStorage.projects=JSON.stringify(e),_dg122.saveConfig("projects",e))}}},_.prototype={init:function(){this._dg9(),this._dg13(),this._dg12(),this.initEvent(),this._dg1()},_dg9:function(){var e={};localStorage.projects&&(e=JSON.parse(localStorage.projects)),_dg122.saveConfig("projects",e)},_dg10:function(){localStorage.projects=JSON.stringify(_dg122.getConfig("projects"))},_dg1:function(){var e=this;G.receive("hashchanged",function(t){e.activeProject(t)})},initEvent:function(){$(document.body).on("click",".resource-open-project button",function(){var e=$(".resource-open-project ul");"none"==e.css("display")&&(e.show(),J.register(".resource-open-project ul",function(){return e.hide(),delete e,!0},function(t,n){e.hide();var i=$(n.target).closest("li").children("a");return i.attr("_openProject")?commands.openProject():i.attr("href")&&(location.hash=i.attr("href")),delete e,!0}))})},_dg12:function(){$(".resource-open-project").length||this._js_p7(),this.projectName?($(".resource-open-project").hide(),$(".resource-tree").show()):($(".resource-open-project").show(),$(".resource-tree").hide())},_dg13:function(){var e=location.hash.slice(1);return e&&"#"!=e?void this.activeProject(e):void(this.projectName="")},activeProject:function(e){var t=this.getProject(e);t?this.loadProject(e,t):(this.projectName="",this._dg12())},addProject:function(e,t){var n=_dg122.getConfig("projects"),i=null,s=null;return $.each(n,function(e,n){return n.path==t.path?(i=e,!0):void 0}),i?s={projectName:i,project:n[i]}:(n[e]=t,_dg122.saveConfig("projects",n)?(s={projectName:e,project:t},this._dg10(e,t)):_dg122.alert("Could not add project '"+e+"'")),s},getProject:function(e){var t,n=null,i=_dg122.getConfig("projects");return i&&i[e]&&(t=i[e],t.path&&_dg104.isDirectory(t.path)?(n=t,localStorage.activeProjectName=e):(_dg122.alert(lanObject.error.projectNotExist),delete i[e],localStorage.projects=JSON.stringify(i),_dg122.saveConfig("projects",i))),n},loadProject:function(e,t){this.currentProject&&this.currentProject.path&&G.send("foldUnWatch",this.currentProject.path),location.hash=e,document.title=e,this.projectName=e,this.currentProject=t,_dg105.initTree(e,t.path),this._dg12(),G.send("foldWatch",t.path)},_js_p7:function(){var e=[],t=['<div class="resource-open-project btn-group">'];t.push('<button type="button" class="btn btn-UI btn-open-project dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'),t.push(lanObject.navHead.openProject),t.push('<span class="arrow"></span></button>'),t.push('<ul class="dropdown-menu">'),t.push('<li><a href="#" _openProject=1 onclick="commands.openProject();">'+lanObject.navHead.openNewProject+"</a></li>"),t.push('<li role="separator" class="divider"></li>');try{e=Object.keys(JSON.parse(localStorage.projects)).sort()}catch(n){}$.each(e,function(){t.push('<li><a href="#'+this+'">'+this+"</a></li>")}),t.push("</ul></div>"),$(".resource-project .resource-title").after(t.join(""))}},v.prototype={setRender:function(e){this.renderWrap=e},addTreeContent:function(e){var t={cbiconpath:"./css/images/icons/",onnodeclick:!1,data:null,theme:"bbit-tree-arrows",onLeafClick:!1,onLeafDblclick:!1,onLeafMenu:!1,onFolderMenu:!1};$.extend(t,e),this.dfop=t,this.treenodes=t.data;var n=$(this.renderWrap),i=n.attr("id");null!=i&&""!=i||(i="bbtree"+(new Date).getTime(),n.attr("id",i)),this.treeId=i;var s=[];this.buildtree(t.data,s),this.renderTree(s.join("")),s=null},renderTree:function(e){$(this.renderWrap).addClass("bbit-tree").html(e)},buildtree:function(e,t){if(t.push("<div class='bbit-tree-bwrap'>"),t.push("<div class='bbit-tree-body'>"),t.push("<ul class='bbit-tree-root ",this.dfop.theme,"'>"),e&&e.length>0)for(var n=e.length,i=0;n>i;i++)this.buildnode(e[i],t,0,i,i==n-1);t.push("</ul>"),t.push("</div>"),t.push("</div>")},buildnode:function(e,t,n,i,s){var a;e.id?a=e.id.replace(/[^\w]/gi,"_"):(a=this.treeId+"_"+i.toString().replace(/\./gi,"_"),e.id=a),t.push("<li class='bbit-tree-node'>"),t.push("<div id='",a,"' tpath='",i,"' unselectable='on' title='",e.text,"'");var o=[];if(o.push("bbit-tree-node-el"),e.hasChildren?(o.push(e.isexpand?"bbit-tree-node-expanded":"bbit-tree-node-collapsed"),o.push("bbit-tree-node-folder")):o.push("bbit-tree-node-leaf"),e.classes&&o.push(e.classes),t.push(" class='",o.join(" "),"'>"),t.push("<span class='bbit-tree-node-indent'>"),n>0){t.push("<img class='bbit-tree-icon' src='"+this.dfop.cbiconpath+"s.gif'/>");for(var r=1;n>r;r++)t.push("<img class='bbit-tree-elbow-line' src='"+this.dfop.cbiconpath+"/s.gif'/>")}if(t.push("</span>"),o.length=0,e.hasChildren?e.isexpand?o.push(s?"bbit-tree-elbow-end-minus":"bbit-tree-elbow-minus"):o.push(s?"bbit-tree-elbow-end-plus":"bbit-tree-elbow-plus"):o.push(s?"bbit-tree-elbow-end":"bbit-tree-elbow"),t.push("<img class='bbit-tree-ec-icon ",o.join(" "),"' src='"+this.dfop.cbiconpath+"s.gif'/>"),t.push("<a hideFocus class='bbit-tree-node-anchor' tabIndex=1 href='javascript:void(0);'>"),t.push("<span unselectable='on'>",e.text,"</span>"),t.push("</a>"),t.push("</div>"),e.hasChildren)if(e.isexpand){if(t.push("<ul  class='bbit-tree-node-ct'  style='z-index: 0; position: static; visibility: visible; top: auto; left: auto;'>"),e.ChildNodes)for(var c=e.ChildNodes.length,l=0;c>l;l++)e.ChildNodes[l].parent=e,this.buildnode(e.ChildNodes[l],t,n+1,i+"."+l,l==c-1);t.push("</ul>")}else t.push("<ul style='display:none;'></ul>");t.push("</li>"),e.render=!0},loadChildNodes:function(e,t){var n,i,s=[];t||(t=_dg104.getFilesUnderPathSync(e).files),t=this.filterOutFolder(t),e.slice(-1)!=_dg122.getPathSplitChar()&&(e+=_dg122.getPathSplitChar());for(var a=0,o=t.length;o>a;a++)"string"==typeof t[a]?(n=t[a],s.push({text:n,complete:!0,isexpand:!1,hasChildren:!1,path:e+n})):(n=Object.keys(t[a])[0],i=e+n+_dg122.getPathSplitChar(),s.push({ChildNodes:[],text:n,complete:!0,isexpand:_dg105.getFolderExpandStatus(i),hasChildren:!0,path:i}));return s},asnybuild:function(e,t,n,i,s){var a=e.length;if(a>0){for(var o=[],r=0;a>r;r++)e[r].parent=s,this.buildnode(e[r],o,t,n+"."+r,r==a-1);i.html(o.join("")),o=null}i.addClass("bbit-tree-node-ct").css({"z-index":0,position:"static",visibility:"visible",top:"auto",left:"auto",display:""}),i.prev().removeClass("bbit-tree-node-loading")},getItemByRealPath:function(e,t){t||(t=this.treenodes[0]);var n,i=null;if(t.path==e)return t;for(var s=0,a=t.ChildNodes.length;a>s;s++)if(n=t.ChildNodes[s].path,e.slice(0,n.length)==n){i=this.getItemByRealPath(e,t.ChildNodes[s]);break}return i},isCollapsed:function(){return!(!$(arrowEle).hasClass("bbit-tree-elbow-plus")&&!$(arrowEle).hasClass("bbit-tree-elbow-end-plus"))},filterOutFolder:function(e){for(var t=[],n=0,i=e.length;i>n;n++)"string"!=typeof e[n]&&(name=Object.keys(e[n])[0],-1!=$.inArray(name,this.filterOut))||t.push(e[n]);return t},initTreeEvent:function(){function e(e){for(var t=e.split("."),n=p.treenodes,i=0;i<t.length;i++)n=0==i?n[t[i]]:n.ChildNodes[t[i]];return n}function t(){var e=this,t=e.id.replace(/[^\w]/gi,"_"),n=$("#"+t+" img.bbit-tree-ec-icon");n.length>0&&n.click()}function n(n){var i=p.dfop,s=$(this).attr("tpath"),a=e(s);if(i.citem){var o=i.citem.id.replace(/[^\w]/gi,"_");$("#"+o).removeClass("bbit-tree-selected")}i.citem=a,$(this).addClass("bbit-tree-selected"),i.onLeafClick&&(a.expand||(a.expand=function(){t.call(a)}),i.onLeafClick.call(this,a))}function i(e){var t={x:e.pageX,y:e.pageY};return t}function s(e){var t=$(".dropdown-menu.tree-contextmenu")[0],n=(t.clientWidth,t.clientHeight),i=document.body.clientHeight;return e.y+n>i&&(e.y=e.y-n),e}function a(){J.register(".dropdown-menu.tree-contextmenu",function(){return $(".dropdown-menu.tree-contextmenu").remove(),$(".contentmenu-active").removeClass("contentmenu-active"),$(document.body).off("click",".dropdown-menu.tree-contextmenu li",d),!0})}function o(e){var t=p.dfop;if(t.onLeafMenu&&t.onLeafMenu.length){$(document.body).on("click",".dropdown-menu.tree-contextmenu li",d),$(this).addClass("contentmenu-active"),$(".dropdown-menu.tree-contextmenu").remove();var n=_dg107._dg6(t.onLeafMenu,"tree-contextmenu");$(document.body).append(n),$(".dropdown-menu.tree-contextmenu").css({display:"block"});var o=i(e);o=s(o),$(".dropdown-menu.tree-contextmenu").css({top:o.y,left:o.x}),$(".dropdown-menu.tree-contextmenu").attr("tpath",e.currentTarget.getAttribute("tpath")),a()}}function r(e){var t=p.dfop;if(t.onFolderMenu&&t.onFolderMenu.length){$(document.body).on("click",".dropdown-menu.tree-contextmenu li",d),$(this).addClass("contentmenu-active"),$(".dropdown-menu.tree-contextmenu").remove();var n=_dg107._dg6(t.onFolderMenu,"tree-contextmenu");$(document.body).append(n),$(".dropdown-menu.tree-contextmenu").css({display:"block"});var o=i(e);o=s(o),$(".dropdown-menu.tree-contextmenu").css({top:o.y,left:o.x}),$(".dropdown-menu.tree-contextmenu").attr("tpath",e.currentTarget.getAttribute("tpath")),a()}}function c(t){var n=p.dfop,i=$(this).attr("tpath"),s=e(i);if(n.citem){var a=n.citem.id.replace(/[^\w]/gi,"_");$("#"+a).removeClass("bbit-tree-selected")}n.citem=s,$(this).addClass("bbit-tree-selected"),n.onLeafDblclick&&n.onLeafDblclick.call(this,s)}function l(e,t){var n,i=1,s=0;if(e.length!=t.length)i=0;else for(n=e.length;n>s;s++)if(e[s].text!=t[s].text||t[s].hasChildren!=e[s].hasChildren){i=0;break}return i}function h(t){var n,i;$(this).hasClass("bbit-tree-node-folder")?(n=$(this),i=$(this).children(".bbit-tree-ec-icon")[0]):(n=$(this).parent(),i=this);var s=n.next(),a=n.attr("tpath"),o=e(a);if($(i).hasClass("bbit-tree-elbow-plus")||$(i).hasClass("bbit-tree-elbow-end-plus")){var r=[];if(o.hasChildren&&(r=p.loadChildNodes(o.path)),s.hasClass("bbit-tree-node-ct")&&l(r,o.ChildNodes))s.show();else{o.ChildNodes=r;var c=a.split(".").length;o.complete&&null!=o.ChildNodes&&p.asnybuild(o.ChildNodes,c,a,s,o)}$(i).hasClass("bbit-tree-elbow-plus")?$(i).swapClass("bbit-tree-elbow-plus","bbit-tree-elbow-minus"):$(i).swapClass("bbit-tree-elbow-end-plus","bbit-tree-elbow-end-minus"),n.swapClass("bbit-tree-node-collapsed","bbit-tree-node-expanded"),o.isexpand=!0,p.setFolderExpandStatus(o.path,o.ChildNodes.length)}else($(i).hasClass("bbit-tree-elbow-minus")||$(i).hasClass("bbit-tree-elbow-end-minus"))&&(s.hide(),$(i).hasClass("bbit-tree-elbow-minus")?$(i).swapClass("bbit-tree-elbow-minus","bbit-tree-elbow-plus"):$(i).swapClass("bbit-tree-elbow-end-minus","bbit-tree-elbow-end-plus"),n.swapClass("bbit-tree-node-expanded","bbit-tree-node-collapsed"),o.isexpand=!1,p.setFolderExpandStatus(o.path,null));t.stopPropagation()}function d(t){var n=$(this).attr("func");if(n){for(var i=$(this).closest(".dropdown-menu.tree-contextmenu").attr("tpath"),s=e(i),a=n.split("."),o=window;a.length&&o;)o=o[a.shift()];$(".dropdown-menu.tree-contextmenu").remove(),o&&o.call(this,s)}}function u(){$(p.renderWrap).on("click",".bbit-tree-node-leaf",n),$(p.renderWrap).on("contextmenu",".bbit-tree-node-el",function(e){$(this).hasClass("bbit-tree-node-leaf")?o.call(this,e):r.call(this,e)}),$(p.renderWrap).on("dblclick",".bbit-tree-node-leaf",c),$(p.renderWrap).on("click",".bbit-tree-ec-icon",h),$(p.renderWrap).on("dblclick",".bbit-tree-node-folder",h),$(p.renderWrap).on("selectstart",function(e){e.preventDefault(),e.stopPropagation()})}if(!this.isEventInited){this.isEventInited=!0;var p=this;u()}},_js_p8:function(e,t,n){n=n?n:0;for(var i,s,a,o=[],r=[],c=[],l=0;l<e.length;l++)if("string"==typeof e[l])r.push({text:e[l],complete:!0,isexpand:!1,hasChildren:!1,path:t+e[l]});else{if(s=Object.keys(e[l])[0],
-1!=$.inArray(s,[".svn",".git"]))continue;a=e[l][s],i=n?t+s+_dg122.getPathSplitChar():t,c.push({text:s,complete:!0,isexpand:n?this.getFolderExpandStatus(i):!0,hasChildren:!0,path:i,ChildNodes:this._js_p8(a,i,n+1)})}return o=c.concat(r)},_js_p9:function(e,t){return this.projectPath==e&&this.projectName==t},getCurrentItem:function(){return this.dfop&&this.dfop.citem},getFolderExpandStatus:function(e){return void 0!=this.folderExpandStatus[e]},getFolderExpandNum:function(e){return this.folderExpandStatus[e]},setFolderExpandStatus:function(e,t){if(null==t)for(var n=Object.keys(this.folderExpandStatus),i=e.length,s=0,a=n.length;a>s;s++)n[s].slice(0,i)==e&&(this.folderExpandStatus[n[s]]=null,delete this.folderExpandStatus[n[s]]);else this.folderExpandStatus[e]=t}},$.fn.swapClass=function(e,t){return this.removeClass(e).addClass(t)},b.prototype=new v,$.extend(b.prototype,{init:function(){this.initEvent()},initTree:function(e,t){this.loadTree(e,t),this.initTreeEvent()},loadTree:function(e,t){this.projectName=e,t.slice(-1)!=_dg122.getPathSplitChar()&&(t+=_dg122.getPathSplitChar()),this.projectPath=t;var n=this._dg14();this.addTreeContent(n)},_dg14:function(){var e=[{ChildNodes:[],complete:!0,hasChildren:!0,isexpand:!1,path:this.projectPath,text:this.projectName}],t={showcheck:!0,data:e,onLeafClick:function(e){e.hasChildren||(_dg106.openfiles.fileExist(e.path)?G.send("treeOpenFile",e.path):_dg104.openFile(e.path)||G.send("self/reloadTree"))},onLeafDblclick:function(e){e.hasChildren||_dg104.openTabFile(e.path)},onLeafMenu:this.leafMenu,onFolderMenu:this.folderMenu};return t},renderTree:function(e){$(this.renderWrap).addClass("bbit-tree").append(e)},reload:function(){this.loadTree(this.projectName,this.projectPath)},initEvent:function(){var e=this;$(".all-resource-panel").bind("scroll",function(){e.scrollDaemon(this)})},daemonInstance:null,scrollDaemon:function(e){e.style.webkitTransform="translate3d(0px,0px,1px)";var t=this;this.daemonInstance&&(clearInterval(this.daemonInstance),this.daemonInstance=null),this.daemonInstance=setTimeout(function(){e.style.webkitTransform="translate3d(0px,0px,0px)",t.daemonInstance=null},100)}}),y.prototype=new v,$.extend(y.prototype,{init:function(){this._dg1(),this.initEvent()},initTree:function(e,t){this.loadTree(e,t),this.initTreeEvent()},loadTree:function(e,t){this.projectName=e,t.slice(-1)!=_dg122.getPathSplitChar()&&(t+=_dg122.getPathSplitChar()),this.projectPath=t;var n=this._dg14();this.addTreeContent(n)},_js_p10:function(e,t){e.ChildNodes=this.loadChildNodes(t);var n,i,s=e.ChildNodes.length;for(n=0;s>n;n++)i=e.ChildNodes[n],this.getFolderExpandStatus(i.path)&&(i.isexpand=!0,this._js_p10(i,i.path))},_dg14:function(){var e={ChildNodes:[],complete:!0,hasChildren:!0,isexpand:!0,path:this.projectPath,text:this.projectName};this._js_p10(e,this.projectPath),this.setFolderExpandStatus(this.projectPath,e.ChildNodes.length);var t=[e],n={showcheck:!0,data:t,onLeafClick:function(e){e.hasChildren||(_dg106.openfiles.fileExist(e.path)?G.send("treeOpenFile",e.path):_dg104.openFile(e.path)||G.send("self/reloadTree"))},onLeafDblclick:function(e){e.hasChildren||_dg104.openTabFile(e.path)},onLeafMenu:this.leafMenu,onFolderMenu:this.folderMenu};return n},_dg1:function(){var e=this;G.receive("resource_tree.js/toggleActiveStatus",function(t){var n=e.getCurrentItem();n&&n.path!=t&&$(".bbit-tree-selected").removeClass("bbit-tree-selected")}),G.receive("self/reloadTree",function(){e.reload()}),G.receive("foldWatch",function(t){e.folderWatch&&(clearInterval(e.folderWatch),e.folderWatch=null),e.folderWatch=setInterval(e.calculateFileChange.bind(e),1500)})},initEvent:function(){var e=this;$(".active-resource-panel").bind("mousewheel",function(t){var n;t.originalEvent.wheelDeltaX&&(n=this.scrollLeft,this.scrollLeft=n-t.originalEvent.wheelDeltaX),t.originalEvent.wheelDeltaY&&(n=this.scrollTop,this.scrollTop=n-t.originalEvent.wheelDeltaY),e.scrollDaemon(this),t.preventDefault(),t.stopPropagation()})},reload:function(){this.loadTree(this.projectName,this.projectPath)},refreshFilesByPath:function(e,t){if(this.getFolderExpandStatus(e)){var n=this.loadChildNodes(e,t),i=this.getItemByRealPath(e);if(i&&i.id){i.ChildNodes=n;var s=$("#"+i.id).next(),a=$("#"+i.id).attr("tpath");s&&this.asnybuild(i.ChildNodes,a.split(".").length,a,s,i),this.setFolderExpandStatus(e,n.length)}}},calculateFileChange:function(){for(var e=Object.keys(this.folderExpandStatus),t=0,n=e.length;n>t;t++)_dg104.getFilesUnderPath(e[t]).then(function(e){e.files=this.filterOutFolder(e.files);var t;try{t=_dg105.getItemByRealPath(e.path).ChildNodes.length}catch(n){t=0}e.files.length!=t&&this.refreshFilesByPath(e.path,e.files)}.bind(this))},daemonInstance:null,scrollDaemon:function(e){e.style.webkitTransform="translate3d(0px,0px,1px)";var t=this;this.daemonInstance&&(clearInterval(this.daemonInstance),this.daemonInstance=null),this.daemonInstance=setTimeout(function(){e.style.webkitTransform="translate3d(0px,0px,0px)",t.daemonInstance=null},200)}}),window._dg114={newFile:function(e){var t=prompt("Please enter filename","untitled");if(t){var n=e.path+t;_dg104.saveFile(n,"")&&(_dg114.refreshFolder(e),_dg104.openTabFile(n))}},deleteFile:function(e){var t=confirm("Do you want to delete '"+e.path+"'");t&&_dg104.deleteFile(e.path)&&(_dg114.refreshFolder(e.parent),G.send("open_files.js/deleteFile",e.path))},renameFile:function(e){var t=prompt("Please rename file '"+e.text+"'  with ",e.text);if(t&&t!=e.text){var n=_dg122.getPathSplitChar(),i=e.path.split(n);i[i.length-1]=t;var s=i.join(n);_dg104.rename(e.path,s)&&(_dg114.refreshFolder(e.parent),G.send("open_files.js/renameFile",e.path,s))}},refreshFolder:function(e){_dg105.refreshFilesByPath(e.path)},revealPath:function(e){var t=require("child_process").exec,n="",i=_dg122.getDirByPath(e.path);n="mac"==platforms.platform?"open "+i:"win"==platforms.platform?"start "+i:"nautilus "+i,n&&t(n,function(e,t,n){})},_file:"",copyFile:function(e){window._dg114._file=e.path},pasteFile:function(e){var t=window._dg114._file;t&&window._dg114._js_p11(t,e.path)},_js_p11:function(e,t){try{for(var n=_dg122.getDirByPath(t),i=_dg122.getExtension(e),s=_dg122.getFilenameByPath(e).slice(0,-1-i.length),a=n+"/"+s+"."+i,o=0;5>o&&_dg104.isExist(a);)s+="-copy",a=n+"/"+s+"."+i,o++;if(o>=5)return void _dg122.alert("File Exists");_dg104.getFileContent(e).done(function(e){_dg104.fs.writeFile(a,e,function(e){e&&_dg122.alert("Error")})}).fail(function(){_dg122.alert("Error")})}catch(r){_dg122.alert("Error")}},duplicateFile:function(e){window._dg114._js_p11(e.path,e.path)},newFolder:function(e){var t=prompt("Please enter folder name","untitled");if(t){var n=e.path+t;_dg104.createFolder(n)&&(_dg105.setFolderExpandStatus(e.path,!0),_dg114.refreshFolder(e))}},deleteFolder:function(e){var t=e.path;if(t){var n=confirm("Do you want to delete this folder '"+t+"'");n&&_dg104.deleteFolder(t)&&_dg114.refreshFolder(e.parent)}},renameFolder:function(e){var t=prompt("Please rename folder '"+e.text+"'  with ","");if(t&&t!=e.text){var n=_dg122.getPathSplitChar(),i=e.path.split(n);i[i.length-2]=t;var s=i.join(n);_dg104.rename(e.path,s)&&_dg114.refreshFolder(e.parent)}},activeProject:function(e){for(;e&&e.parent;)e=e.parent;e=e.text,G.send("resource_nav.js/gotoTab","Active"),location.hash=e},deleteProject:function(e){_dg122.confirm(lanObject.allResourceTree.confirmDeleteProject).done(function(){for(;e&&e.parent;)e=e.parent;e=e.text,$(".all-resource-panel .resource-tree-"+e.replace(/\./g,"-")).remove(),G.send("cleanjob_deleteProject",e),e==_dg108.projectName&&(location.hash="__empty__")})},openProjectInNewWindow:function(e){for(;e&&e.parent;)e=e.parent;e&&e.text?window.open(location.origin+location.pathname+"#"+e.text):_dg122.alert("Error")}},x.prototype={init:function(){if(!$("#editor textarea").length)return void setTimeout(this.init.bind(this),100);if(localStorage.lineMarks)try{this.marks=JSON.parse(localStorage.lineMarks)}catch(e){this.marks=[]}this.show(),this.initEvent(),this._dg1()},initEvent:function(){var e=this,t=0;$(".linemark-button").bind("click",function(){return t?void(t=0):void e.addMark()}),$(".linemark-button").on("click","span",function(t){e.closeLinemark(),t.preventDefault(),t.stopPropagation()}),$(".linemark ul").on("click","li div",function(){if(t)return void(t=0);var n=e.marks[$(this).parent().index()];n&&_dg122.gotoLine(n.path,n.row)}),$(".linemark ul").on("click","li span",function(){e.marks.splice($(this).parent().index(),1),e._dg17(),e._dg18()});var n=0;$(".linemark").draggable({axis:"y",start:function(e,t){n=$(".linemark").offsetParent().height()-$(".linemark").height()},stop:function(e){t=1},drag:function(e,t){t.position.top<0?t.position.top=0:t.position.top>n&&(t.position.top=n)}})},_dg17:function(){localStorage.lineMarks=JSON.stringify(this.marks)},_dg18:function(){for(var e,t=[],n=0,i=this.marks.length;i>n;n++)e=this.marks[n],t.push('<li title="',e.content,'"><div style="background-color:',this.colors[e.colorIndex],'">'),t.push(e.content),t.push('</div><span class="btn-close" style="background-color:',this.colors[e.colorIndex],'"></span></li>');$(".linemark ul").html(t.join(""))},_dg19:function(e){for(var t=!1,n=0,i=this.marks.length;i>n;n++)if(this.marks[n].path==e.path){if(this.marks[n].content==e.content){this.marks[n].row=e.row,t=!0;break}if(this.marks[n].row==e.row){this.marks[n].content=e.content,t=!0;break}}return t},addMark:function(){if(this.linemarkClosed&&(this.linemarkClosed=!1,delete localStorage.linemark_close,this._js_p12()),!(this.marks.length>=this.colors.length)){var e=_dg106.session.selection.getCursor(),t="",n={};e&&void 0!=e.row&&_dg106.currentFile&&(t=_dg106.session.getLine(e.row),t=t.trim(),n.path=_dg106.currentFile,n.row=e.row+1,t?n.content=_dg122.htmlspecialchars(t):n.content=_dg122.htmlspecialchars(_dg122.getFilenameByPath(_dg106.currentFile)+":"+n.row),this._dg19(n)||(this._dg21(n),this.marks.push(n)),this._dg17(),this._dg18())}},closeLinemark:function(){this.linemarkClosed=!0,localStorage.linemark_close=1,this.marks=[],this._dg17(),this.hide()},_dg20:function(){for(var e,t=[],n=[],i=0,s=this.marks.length;s>i;i++)e=this.marks[i],e.path==_dg106.getCurrentPath()&&e.content!=_dg122.htmlspecialchars(_dg106.session.getLine(e.row-1).trim())&&(t.push(i),n.push(e.content));if(t.length){for(var a=_dg106.session.getLength(),o=0,r=[];r.length!=t.length;)r.push([]);for(;a>o;){for(var c,l=_dg106.session.getLines(o,o+9),h=0,d=l.length;d>h;h++)for(c=_dg122.htmlspecialchars(l[h].trim()),i=0,s<t.length;s>i;i++)n[i]==c&&r[i].push(o+h);o+=10}var u,p=0;for(i=0,s=r.length;s>i;i++)u=this.marks[t[i]].row-1,r[i].length&&(p=r[i].shift(),$.each(r[i],function(e,t){0>=u-t&&Math.abs(u-t)<Math.abs(u-p)&&(p=t)}),this.marks[t[i]].row=p+1);this._dg17(),this._dg18()}},_dg21:function(e){for(var t,n={},i=0,s=this.marks.length;s>i;i++)t=this.marks[i],n[t.colorIndex]=!0;for(var i=0,s=this.colors.length;s>i;i++)if(!n[i]){e.colorIndex=i;break}delete n},_dg1:function(){var e=this;G.receive("editor.js/cleanMark",function(){$(".linemark-button").hide()}),G.receive("editor.js/fileChanged",function(){if(_dg106.comingFile==_dg106.currentFile)try{e._dg20()}catch(t){}}),G.receive("addLinemark",function(){e.addMark()})},hide:function(){$(".linemark").hide()},show:function(){this._js_p12(),this._dg18()},_js_p12:function(){$(".linemark").length||$(".content #editor").append('<div class="linemark"><div class="linemark-button btn-UI">'+lanObject.markActiveLine+'<span class="btn-close"></span></div><ul></ul></div>'),this.linemarkClosed?this.hide():$(".linemark").show()}},w.prototype={init:function(){this.initEvent(),this._dg1()},initEvent:function(){this._js_p13();var e=this;$(document.body).on("click",".editor-contextmenu li",function(t){var n=$(this).attr("func");-1!=$.inArray(n,["copy","cut","paste"])?(_dg122[n](),_dg106.editor.focus()):"copyPath"==n?e._js_p15():"showInFolder"==n?e._js_p14():(n="linemark")&&G.send("addLinemark"),e.destroy()})},_js_p13:function(){if(!$(".ace_scroller").length)return void setTimeout(this._js_p13.bind(this),50);var e=this;$(".ace_scroller")[0].addEventListener("mousedown",function(t){2==t.button&&(e.openMenu(t),t.stopPropagation(),t.preventDefault())},!0)},_dg1:function(){var e=this;G.receive("editor.js/fileChanged|editor.js/changeScroll|saveFile",function(){e.destroy()})},getLists:function(){var e=_dg106.getCurrentPath(),t=[{name:lanObject.common.copy,func:"copy",bindKey:{win:"Ctrl-c",mac:"Command-c"}},{name:lanObject.common.cut,func:"cut",bindKey:{win:"Ctrl-x",mac:"Command-x"}},{name:lanObject.common.paste,func:"paste",bindKey:{win:"Ctrl-v",mac:"Command-v"}},"|",{name:lanObject.markActiveLine,func:"linemark"}];return"N"!=_dg106.openfiles.getModifiedStatus(e)&&(t.push("|"),t.push({name:lanObject.editorContextMenu.copyFilePath,func:"copyPath"}),t.push({name:lanObject.resourceTree.showInFolder,func:"showInFolder"})),t},openMenu:function(e){this.destroy();var t=this.getLists(),n=_dg107._dg6(t,"editor-contextmenu");$(document.body).append(n);var i=$(".editor-contextmenu")[0].offsetHeight,s=$(".editor-contextmenu")[0].offsetWidth,a={top:e.pageY,left:e.pageX};a.top+i>document.body.offsetHeight?a.top=a.top-i+_dg106.editor.renderer.layerConfig.lineHeight/2:a.top-=_dg106.editor.renderer.layerConfig.lineHeight/2,a.left+s>document.body.offsetWidth?a.left=a.left-s-2:a.left+=2,$(".editor-contextmenu").css(a);var o=this;J.register(".editor-contextmenu",function(){return o.destroy(),!0},function(){return!0})},_js_p14:function(){window._dg114.revealPath({path:_dg106.getCurrentPath()})},_js_p15:function(){_dg122.copy(_dg106.getCurrentPath())},destroy:function(){$(".editor-contextmenu").remove()}},function(){function e(){this._dg1(),this.eventInited=!1}e.prototype={_dg1:function(){var e=this;G.receive("editorSetting",function(){_dg106.editor.commands.exec("showSettingsMenu",_dg106.editor),setTimeout(function(){$("#ace_settingsmenu").show(),"mac"==platforms.platform||localStorage.settingOptions||$("#ace_settingsmenu #setFontSize").val(14);var e=["setKeyboardHandler","setMode","setOptions","setTheme","setNewLineMode"],t=$("#ace_settingsmenu").children("div");$.each(e,function(e,n){t.filter('div[contains="'+n+'"]').remove()}),t.last().remove()},100),e.initEvent()}),G.receive("ready",function(){try{if(!localStorage.settingOptions)return;var e=JSON.parse(localStorage.settingOptions);setTimeout(function(){for(var t=0;t<e.length;t++)"renderer"==e[t].object?_dg106.editor.renderer[e[t].func](e[t].value):"session"==e[t].object?_dg106.session[e[t].func](e[t].value):"editor"==e[t].object&&_dg106.editor[e[t].func](e[t].value)},1e3)}catch(t){console.log(t)}})},initEvent:function(){this.eventInited||(this.eventInited=!0,$(document.body).on("change","#ace_settingsmenu input",function(){var e,t,n,i=[];$("#ace_settingsmenu div input").each(function(){e=$(this).attr("name"),t=$(this).attr("class"),"checkbox"==$(this).attr("type")?n=this.checked:"text"==$(this).attr("type")&&(n=this.value),i.push({func:e,value:n,object:t})});try{localStorage.settingOptions=JSON.stringify(i)}catch(s){}}))}},new e}(),k.prototype={_dg1:function(){G.receive("addPromptParameter",function(e,t,n){setTimeout(this._dg26.bind(this,e,t,n),200)}.bind(this));var e=this;G.receive("saveFile|editor.js/changeScroll",function(){e.boxShowing&&e._dg27()}),G.receive("editor.js/fileChanged",function(t){if(e.boxShowing)try{e.checkParams(t.data)}catch(n){e._dg27()}})},_dg26:function(e,t,n){this.mode=n,$(".parameter-float-box").remove();try{e=JSON.parse(decodeURIComponent(e))}catch(i){return}this.boxShowing=!0,t=t.replace(/\(|\)/g,""),this.func=t,_dg106.editor.selection.moveCursorBy(0,-1),this._js_p18(e),this._dg30()},_dg27:function(){this.boxShowing=!1,$(".parameter-float-box").remove()},checkParams:function(e){var t=e.text.replace(/^\x20*|\x20*$/g,""),n=e.action,i=_dg106.editor.selection.getCursor(),s=_dg106.editor.session.getLine(i.row).slice(0,i.column);"insertText"==n&&(s+=t);var a=s.lastIndexOf(this.func);if(a+=this.func.length,s=s.slice(a),""==s)return void this._dg27();if(e&&t&&!(t.length>1)&&!/[\w\$]/.test(t)){if("\n"==t)return void this._dg27();if(this._js_p16(s))return void this._dg27();a=this._js_p17(s),a<$(".parameter-float-box").attr("count")?a!=$(".parameter-float-box span.active").index()&&(this._dg29(a),"insertText"==n&&this._dg30()):this._dg27()}},_js_p16:function(e){return e?!!/^\((.*?)\)[^\w\$]{1}$/.test(e):!0},_js_p17:function(e){var t,n=0,i=[];for(t=0;t<e.length;t++)'"'!=e[t]&&"'"!=e[t]||(i.length&&i[i.length-1]==e[t]&&"\\"!=e[t-1]?i.pop():i.push(e[t])),i.length||","!=e[t]||"\\"==e[t-1]||n++;return n},_js_p18:function(e){var t=[],n=1;for(t.push('<div class="editor-base parameter-float-box" count="',e.length,'"><span class="ace_variable">'),t.push('<span class="active">',e[0],"</span>");n<e.length;)t.push(",<span>",e[n],"</span>"),n++;t.push("</div>"),$(document.body).append(t.join("")),setTimeout(this._dg28.bind(this),10)},_dg28:function(){var e,t,n=$(".ace_cursor").offset(),i=$(".parameter-float-box")[0].clientWidth,s=document.documentElement.clientWidth;e=n.left-10,t=n.top-_dg106.editor.renderer.layerConfig.lineHeight,e+i>s&&(e=s-i-10),$(".parameter-float-box").css({visibility:"visible",left:e,top:t})},_dg29:function(e){$(".parameter-float-box span.active").removeClass("active"),$(".parameter-float-box span.ace_variable span").eq(e).addClass("active")},_dg30:function(){var e=$(".parameter-float-box span.active").text(),t=e.match(/^\x20*[\w\$\_]+/);t&&(e=t[0]),setTimeout(function(){_dg106.editor.insert(e);var t=_dg106.editor.selection.getRange();t.start.column-=e.length,_dg106.editor.selection.setRange(t)},10)}},j.prototype={_callbacks:{keydown:function(e){var t=this;38==e.keyCode?(t._dg33(function(){t.events&&t.events.up&&t.events.up.call(t,e)}),e.preventDefault()):40==e.keyCode?(t._dg32(function(){t.events&&t.events.down&&t.events.down.call(t,e)}),e.preventDefault()):39==e.keyCode?(t.events&&t.events.right&&t.events.right.call(t,e),e.preventDefault()):37==e.keyCode&&t.events&&t.events.left&&t.events.left.call(t,e)},click:function(e){var t=e.data.self;t._js_p22($(this).index()),t.addPrompt(),t._dg34(function(){t.events&&t.events.clickItem&&t.events.clickItem.call(t,e)})},pressEnter:function(e){var t=this;13==e.keyCode&&(t._dg34(function(){t.events&&t.events.pressEnter&&t.events.pressEnter.call(t,e)}),e.preventDefault())}},_dg31:function(){var e=this;J.register("#"+this.listId,function(){return e.clean(),!0})},_js_p19:function(e,t){this.listId&&$("#"+this.listId).length||($(document.body).append('<div id="'+this.listId+'" class="'+this.listprefix+' editor_prompt_box"><ul></ul></div>'),this.registerEvent(),this._dg31(),this.isRegistered=!0);var n=this._js_p20(e);$("#"+this.listId+" ul").html(n);var i=document.documentElement.clientHeight,s=document.documentElement.clientWidth,a=$("#"+this.listId).height(),o=$("#"+this.listId).width(),r=t.left,c=t.top+t.height;c+a>i&&(c-=a+t.height),r+o>s&&(r=s-o-5),$("#"+this.listId).css({left:r,top:c}),this.addPrompt()},_js_p20:function(e){for(var t=JSON.parse(JSON.stringify(e)),n=[],i=0;i<t.length;i++)"string"==typeof t[i]?0==i?n.push('<li class="active">',t[i],"</li>"):n.push("<li>",t[i],"</li>"):(0==i&&(t[i]["class"]?/active/.test(t[i]["class"])||(t[i]["class"]+=" active"):t[i]["class"]="active"),n.push("<li ",this._js_p6(t[i]),">",t[i].text,"</li>"));return n.join("")},_js_p6:function(e){var t=[];for(var n in e)"text"!=n&&t.push(n,'="',e[n],'" ');return t.join("")},_js_p22:function(e){var t=$("#"+this.listId+" li");t.removeClass("active"),t.eq(e).addClass("active")},_js_p23:function(){var e=$("#"+this.listId+" li.active");return e.attr("value")?e.attr("value"):e.text()},_js_p24:function(e){var t=$("#"+this.listId+" li.active");return t.attr(e)?t.attr(e):""},_dg32:function(e){var t=$("#"+this.listId+" li.active").index();t++;var n=$("#"+this.listId+" li"),i=n.length;t>=i&&(t=0),this._js_p22(t);var s=n.eq(t)[0];this.calculateHeight(s),this.addPrompt(),e.call(this)},_dg33:function(e){var t=$("#"+this.listId+" li.active").index();t--;var n=$("#"+this.listId+" li"),i=n.length;0>t&&(t=i-1),this._js_p22(t);var s=n.eq(t)[0];this.calculateHeight(s),this.addPrompt(),e.call(this)},_dg34:function(e){var t=$(this.elem).find("span").text();t||$(this.elem).text()||(t=this._js_p23()),$(this.elem).find("span").remove(),$(this.elem).append(t),this.setCursor(),this.clean(),e.call(this)},calculateHeight:function(e){var t=(e.parentNode.clientHeight,e.offsetTop),n=e.parentNode.parentNode.clientHeight,i=0;i=t>=n?Math.floor(t/n)*n:0,e.parentNode.parentNode.scrollTop=i},clean:function(){this.isRegistered&&(this.isRegistered=!1,this.cleanEvent(),$("#"+this.listId).remove(),this.finishClean())},isShowing:function(){return!(!this.listId||!$("#"+this.listId).length)},addPrompt:_dg122.emptyFn,finishClean:_dg122.emptyFn,registerEvent:_dg122.emptyFn,cleanEvent:_dg122.emptyFn,setCursor:_dg122.emptyFn},C.prototype=new j,$.extend(C.prototype,{_dg1:function(){var e=this;G.receive("saveFile",function(t){e.promptEngine&&e.promptEngine.scanCurrentFile(!0),e.clean()}),G.receive("editor.js/changeScroll",function(t){e.clean()}),G.receive("filemode",function(t){e._dg37(t)}),G.receive("editor.js/fileChanged",function(t){e.showPrompt(t.data),t.data.text&&10==t.data.text.charCodeAt(t.data.text.length-1)&&e.promptEngine&&e.promptEngine.scanCurrentFile(!0)}),G.receive("add_property_to_prompt",function(t,n){var i=null;"js"==t&&(t="javascript"),$.isArray(t)&&(t=t[0]),i=e._dg38(t),i._dg43&&i._dg43(n)})},registerEvent:function(){this.binds={keydown:this._callbacks.keydown.bind(this),pressEnter:this._callbacks.pressEnter.bind(this)},document.body.addEventListener("keydown",this.binds.keydown,!0),document.body.addEventListener("keypress",this.binds.pressEnter,!0),$("#"+this.listId).on("click","li",{self:this},this._callbacks.click)},cleanEvent:function(){document.body.removeEventListener("keydown",this.binds.keydown,!0),document.body.removeEventListener("keypress",this.binds.pressEnter,!0),$("#"+this.listId).off("click","li",this._callbacks.click)},_dg34:function(e){var t=this._js_p23(),n=this._js_p24("params"),i=this.typedCharacters;if(void 0!=i&&t){var s=_dg106.editor.selection.getRange();s.start.column-=i.length,_dg106.session.replace(s,t),n&&G.send("addPromptParameter",n,t,this.promptMode),this.clean(),e.call(this)}},showList:function(e){var t=$(".ace_cursor")[0].getBoundingClientRect();this._js_p19(e,t)},_dg37:function(e){var t=this._dg38(e);this.promptEngine&&this.promptEngine!=t&&this.promptEngine.mopup&&this.promptEngine.mopup(),this.promptEngine=t,this.promptEngine.preparation&&this.promptEngine.preparation()},_dg38:function(e){if(-1!=$.inArray(e,["scss","less"])&&(e="css"),!this.prompts[e])switch(e){case"javascript":this.prompts[e]=new T;break;case"css":this.prompts[e]=new O;break;case"html":this.prompts[e]=new E(this);break;case"php":this.prompts[e]=new P(this);break;default:this.prompts[e]=new S}return this.promptMode=e,this.prompts[e]},showPrompt:function(e){if("removeText"!=e.action||this.isShowing()){var t=[];if(e&&e.text&&/^\S+$/.test(e.text)&&e.range&&void 0!=e.range.start.row&&e.range.start.row==e.range.end.row){this.typedCharacters=this.promptEngine._dg40(e);try{t=this.promptEngine._dg41(this.typedCharacters,e)}catch(n){if(gui.developing)throw n;t=[]}}t&&t.length?setTimeout(this.showList.bind(this,t),100):this.clean()}}}),S.prototype={init:function(){this.list=this.list.concat(this.specialList),this.setKeys(this.list)},scanCurrentFile:function(e){var t=_dg106.getCurrentPath();if(t!=this.currentFile||e){this.currentFile=t;var n=_dg106.session.getValue();if(n){var i=n.match(this.regRule);i&&this.setKeys(i),this.list=Object.keys(this.keys).sort()}}},_dg39:function(){return this.scanCurrentFile(),this.list},setKeys:function(e){for(var t,n=0,i=e.length;i>n;)t=e[n++],t.length<=this.maxValueLength&&!this.keys[t]&&(this.keys[t]=1)},_dg40:function(e){try{var t,n=ace.edit("editor").session,i=n.getLine(e.range.start.row),s="";if("insertText"==e.action&&1==e.text.length)t=i.slice(0,e.range.end.column),s=i.slice(e.range.end.column,e.range.end.column+1);else{if("removeText"!=e.action||1!=e.text.length)return"";t=i.slice(0,e.range.start.column),s=i.slice(e.range.start.column,e.range.start.column+1)}if(s&&this.typedRule.test(s))return"";var a=t.match(this.typedRule);return a&&a[0]&&(a=a[0]),a?a:""}catch(o){return""}},_dg41:function(e){if(!e)return this.cachedList=[],!1;var t=this.getBasicList(e);return 0==t.length||1==t.length&&t[0]==e?void 0:t},_dg42:function(e,t){if(!t)return e;var n=0,i=e.length,s=[];try{for(var a=t.replace(/\$/,"\\$"),o=new RegExp("^"+a,"i");i>n;)e[n]&&("object"==typeof e[n]&&o.test(e[n].key)||o.test(e[n]))&&s.push(e[n]),n++;if(!s.length)for(o=new RegExp(t,"i");n++<i;)o.test(e[n])&&s.push(e[n])}catch(r){}return s},getBasicList:function(e){var t,n;this.cachedValue&&this.cachedList.length&&e.slice(0,this.cachedValue.length)==this.cachedValue?(t=this.cachedList,n=this._dg42(t,e)):(this.cachedValue=e,t=this._dg39(e),n=this._dg42(t,e),this.cachedList=n=$.unique(n));var i=null;return e.charCodeAt(0)<=122&&e.charCodeAt(0)>=97?(i=function(e,t){var n,i;return n="object"==typeof e?/^[A-Z]/.test(e.key):/^[A-Z]/.test(e),i="object"==typeof t?/^[A-Z]/.test(t.key):/^[A-Z]/.test(t),n==i?e>t?1:-1:n&&!i?1:-1},n.sort(i)):n.sort()}},E.prototype=new S,$.extend(E.prototype,{_dg43:function(e){var t,n,i=0,s=[];for(t=Object.keys(e),n=t.length;n>i;)t[i].replace(/\.([\w\-\_]+)/g,function(e,t){s.push(t)}),i++;this.setKeys(s)},_dg39:function(){this.scanCurrentFile();var e=this.promptEditor._dg38("javascript")._dg39();this.setKeys(e);var t=this.promptEditor._dg38("css")._dg39();return this.setKeys(t),Object.keys(this.keys).sort()}}),O.prototype=new S,$.extend(O.prototype,{extendCssList:function(){var e,t,n,i=this.specialValues;for(t in i){this.specialList.push(t),e=i[t];for(n in i[t])this.specialList.push(i[t][n])}},_dg45:function(){this.specialValues["overflow-x"]=this.specialValues["overflow-y"]=this.specialValues.overflow,this.specialValues["border-top-style"]=this.specialValues["border-right-style"]=this.specialValues["border-bottom-style"]=this.specialValues["border-left-style"]=this.specialValues["border-style"];var e,t,n=[];for(e in this.specialValues)if(n=this.specialValues[e],n.length)for(t=0;t<n.length;t++)/<[\w]+>/.test(n[t])&&(n[t]={key:n[t],value:n[t],text:n[t].replace(/<[\w]+>/g,function(e){return'<span class="params">'+_dg122.htmlspecialchars(e)+"</span>"})})},_dg41:function(e,t){if(t.text&&(1==t.text.length||":;"==t.text)&&(!t.text||"removeText"!=t.action||":;"!=t.text)&&(e||";"!=t.text)){var n,i=[],s=_dg106.editor.getCursorPosition(),a="";if("insertText"==t.action?a=_dg106.editor.session.getLine(s.row).slice(0,t.range.end.column):"removeText"==t.action&&(a=_dg106.editor.session.getLine(s.row).slice(0,t.range.start.column)),n=a.match(/([a-z\-]+)\x20*:\x20*([^;]*);*$/),n&&n[1]&&this.specialValues[n[1]]){if(!e&&"removeText"==t.action)return!1;i=this.specialValues[n[1]],n[2]&&(i=this._dg42(i,n[2])),i.sort(function(e,t){var n,i;return n="object"==typeof e?e.key:e,i="object"==typeof t?t.key:t,n>i?1:-1})}return e&&!i.length&&(i=this.getBasicList(e)),0==i.length||1==i.length&&i[0]==e?void 0:i}}}),T.prototype=new S,$.extend(T.prototype,{_dg43:function(e){var t,n,i,s,a,o,r=[],c={},l=[],h=0,d=[];if(e["function"])for(t=Object.keys(e["function"]),n=0,i=t.length;i>n;)for(s=t[n++],l=e["function"][s],h=0;h<l.length;)a=s+l[h].params,d=this._js_p25(l[h].params),o=d.length?encodeURIComponent(JSON.stringify(d)):"",c[a]||(c[a]=1,r.push({key:s,value:s+"()",params:o,text:s+'(<span class="params">'+d.join(",")+'</span>) - <span class="file">'+_dg122.getFilenameByPath(l[h].path)+"</span>"})),h++;if(e.namespace_function)for(t=Object.keys(e.namespace_function),n=0,i=t.length;i>n;)for(s=t[n++],l=e.namespace_function[s],h=0;h<l.length;)a=s+l[h].params,d=this._js_p25(l[h].params),o=d.length?encodeURIComponent(JSON.stringify(d)):"",c[a]||(c[a]=1,r.push({key:s,value:s+"()",params:o,text:s+'(<span class="params">'+d.join(",")+'</span>) - <span class="file">'+_dg122.getFilenameByPath(l[h].path)+"</span>"})),h++;this.objectList=r},_dg48:function(e){var t,n,i,s=[];if(e["function"])for(t=Object.keys(e["function"]),n=0,i=t.length;i>n;)s.push(t[n++]);if(e.namespace_function)for(t=Object.keys(e.namespace_function),n=0,i=t.length;i>n;)s.push(t[n++]);this.objectList=s},_dg39:function(){return this.scanCurrentFile(),this.list.concat(this.objectList)},_dg45:function(){var e,t,n,i;e=$.extend(this.specialValues,this.relationValues);for(n in e){this.specialList.push(n),t=e[n];for(i in e[n])this.specialList.push(e[n][i])}delete e},_js_p25:function(e){return e=e.trim().replace(/^\(|\)$/g,"").trim(),""==e?[]:e.split(",")},_dg41:function(e,t){if(t.text&&1==t.text.length){var n=_dg106.editor.getCursorPosition(),i="";"insertText"==t.action?i=_dg106.editor.session.getLine(n.row).slice(0,t.range.end.column):"removeText"==t.action&&(i=_dg106.editor.session.getLine(n.row).slice(0,t.range.start.column)),e&&(i=i.slice(0,i.length-e.length));var s,a=null,o=[];if(s=i.match(/([\w\$]+)\.$/),s&&s[1]&&(a=s[1],this.relationValues[a])){if(!e&&"removeText"==t.action)return!1;o=this.relationValues[a],e&&(o=this._dg42(o,e))}if(o.length)o.sort();else{if(!e)return!1;o=this.getBasicList(e)}return 0==o.length||1==o.length&&o[0]==e?void 0:o}}}),P.prototype=new S,$.extend(P.prototype,{_dg43:function(e){var t,n,i,s,a,o,r=[],c=[];if(e["function"])for(t=Object.keys(e["function"]),n=0,i=t.length;i>n;)s=t[n++],c.push(s),o=this._js_p25(e["function"][s].params),a=o.length?encodeURIComponent(JSON.stringify(o)):"",r.push({key:s,value:s+"()",params:a,text:s+'(<span class="params">'+o.join(",")+'</span>) - <span class="file">'+_dg122.getFilenameByPath(e["function"][s].path)+"</span>"});if(e["class"])for(t=Object.keys(e["class"]),n=0,i=t.length;i>n;)s=t[n],c.push(s),r.push({key:s,value:s,text:s+' - <span class="file">'+_dg122.getFilenameByPath(e["class"][s].path)+"</span>"}),n++;if(e.define)for(t=Object.keys(e.define),n=0,i=t.length;i>n;)s=t[n],c.push(s),r.push({key:s,value:s,text:s+' - <span class="file">'+_dg122.getFilenameByPath(e.define[s].path)+"</span>"}),n++;this.objectList=r,this.objectKeysList=c},setKeys:function(e){for(var t,n=0,i=e.length;i>n;)t=e[n++],t.length<=this.maxValueLength&&!this.keys[t]&&-1==this.objectKeysList.indexOf(t)&&(this.keys[t]=1)},_dg39:function(){return this.scanCurrentFile(),this.list.concat(this.objectList)},_dg41:function(e,t){if(t.text&&1==t.text.length){var n=_dg106.editor.getCursorPosition(),i="";"insertText"==t.action?i=_dg106.editor.session.getLine(n.row).slice(0,t.range.end.column):"removeText"==t.action&&(i=_dg106.editor.session.getLine(n.row).slice(0,t.range.start.column));var s=null,a=[];if(e&&(i=i.slice(0,i.length-e.length)),/\$(this|\w+)\x20*->\x20*$/.test(i)){if(!e&&"removeText"==t.action)return!1;var o=i.match(/\$(this|\w+)\x20*->\x20*$/)[1];s="this"==o?V.prototype._dg90(n.row,n.column):V.prototype._dg91(n.row,n.column,o);var r={properties:{},methods:{}};s&&(this._js_p26(s,r),r.variables=_dg122.sortObject(r.variables),r.methods=_dg122.sortObject(r.methods)),a=this.filterPropertiesByValueV2(r,e),e&&!a.length&&(a=this.getBasicList(e))}else if(/(self|parent|[a-zA-Z0-9_]+)\x20*::\x20*$/.test(i)){if(!e&&"removeText"==t.action)return!1;if(s=i.match(/(self|parent|[a-zA-Z0-9_]+)\x20*::\x20*$/)[1],"self"==s)s=V.prototype._dg90(n.row,n.column);else if("parent"==s){s=V.prototype._dg90(n.row,n.column);try{s=_dg106._dg113.mapEngine.result["class"][s].parent}catch(c){}}var r={properties:{},methods:{}};s&&(this._js_p27(s,r),r.variables=_dg122.sortObject(r.variables),r.methods=_dg122.sortObject(r.methods)),a=this.filterPropertiesByValueV2(r,e)}else{if(!e)return!1;a=this.getBasicList(e)}return 0==a.length||1==a.length&&a[0]==e?void 0:a}},_js_p26:function(e,t){var n=_dg106._dg113.engines.php.result["class"][e];if(!n)return!1;var i,s=n.parent;for(i in n.variables)"static"==n.variables[i].type||t.properties[i]||(t.properties[i]={text:i+' - <span class="class">'+n.variables[i].className+"</span>",value:i});var a,o=[];
for(i in n.methods)"static"==n.methods[i].type||t.methods[i]||(o=this._js_p25(n.methods[i].params),a=o.length?encodeURIComponent(JSON.stringify(o)):"",t.methods[i]={value:i+"()",params:a,text:i+'(<span class="params">'+o.join(",")+'</span>) - <span class="class">'+n.methods[i].className+"</span>"});s&&arguments.callee.call(this,s,t)},_js_p27:function(e,t){var n=_dg106._dg113.engines.php.result["class"][e];if(!n)return!1;var i,s=n.parent;for(i in n.variables)"static"!=n.variables[i].type||t.properties[i]||(t.properties[i]={text:i+' - <span class="class">'+n.variables[i].className+"</span>",value:i});var a,o=[];for(i in n.methods)"static"!=n.methods[i].type||t.methods[i]||(o=this._js_p25(n.methods[i].params),a=o.length?encodeURIComponent(JSON.stringify(o)):"",t.methods[i]={value:i+"()",params:a,text:i+'(<span class="params">'+o.join(",")+'</span>) - <span class="class">'+n.methods[i].className+"</span>"});s&&arguments.callee.call(this,s,t)},_js_p28:function(e){var t=this._js_p25(e);return t.join(",")},_js_p25:function(e){var t=[];if(/^\([^\)]+\)$/.test(e)){var n=e.match(/^\((.+)\)$/);try{n=$.trim(n[1]);var i,s=[],a=[];for(i=0;i<n.length;i++)'"'!=n[i]&&"'"!=n[i]||(a.length&&a[a.length-1]==n[i]&&"\\"!=n[i-1]?a.pop():a.push(n[i])),a.length||","!=n[i]?s.push(n[i]):(t.push(s.join("")),s=[]);!a.length&&s.length&&t.push(s.join("")),s=[];var n;for(i=0;i<t.length;i++)n=t[i].match(/.*?\x20\&*(\$.*)/),n&&n[1]?s.push(n[1]):s.push(t[i]);t=s}catch(o){t=[]}}return t},_js_p30:function(e){var t=this._js_p25(e);if(!t.length)return"()";var n,s=[];for(i=0;i<t.length&&(n=t[i].indexOf("="),-1==n);i++)s.push(t[i]);return"("+s.join(",")+")"},filterPropertiesByValueV2:function(e,t){var n,i=[];try{var s=t.replace(/\$/,"\\$"),a=new RegExp("^"+s,"i");for(n in e.properties)a.test(n)&&i.push(e.properties[n]);for(n in e.methods)a.test(n)&&i.push(e.methods[n])}catch(o){}return i}}),F.prototype={initEvent:function(){var e=this;$(".cmd-console").on("click",".cmd-cleanlog",function(){e._js_p37()}),$(".cmd-console").on("click",".close",function(){e.close()}),$(".cmd-console").on("change",'input[type="color"],input[type="range"]',function(){localStorage[$(this).attr("name")]=$(this).val(),e._js_p33()}),$(".cmd-console").on("click",".cmd-console-link",function(){e.close(),_dg122.gotoLine($(this).attr("_path"),$(this).attr("_row"),$(this).attr("_column"))}),$(".cmd-console").draggable({containment:document.body})},offEvent:function(){$(".cmd-console").off("click"),$(".cmd-console").draggable("destroy")},_js_p31:function(e){if(!$(".cmd-console").length){this._js_p32();var t=[];t.push('<div class="cmd-console">'),t.push('<link rel="stylesheet" type="text/css" href="css/cmd_console.css" />'),t.push('<div class="cmd-console-head">'),t.push('<span>Log Color: <input type="color" name="cmdConsole_logColor" value="'+localStorage.cmdConsole_logColor+'" /></span>'),t.push('<span>Error Color: <input type="color" name="cmdConsole_errorColor" value="'+localStorage.cmdConsole_errorColor+'" /></span>'),t.push('<span>Background Color: <input type="color" name="cmdConsole_backgroundColor" value="'+localStorage.cmdConsole_backgroundColor+'" /></span>'),t.push('<span>Opacity: <input type="range" name="cmdConsole_opacity" min="0" max="10" style="width:50px" value="'+localStorage.cmdConsole_opacity+'" /></span>'),t.push('<span><input type="button" class="btn btn-UI cmd-cleanlog" value="Clean Log" /></span>'),t.push('<span class="close"></span>'),t.push("</div>"),t.push('<div class="cmd-console-content">'),t.push("</div>"),t.push("</div>"),$(document.body).append(t.join("")),this._js_p33(),this.initEvent()}},_js_p32:function(){localStorage.cmdConsole_logColor||(localStorage.cmdConsole_logColor="#7bf90b"),localStorage.cmdConsole_errorColor||(localStorage.cmdConsole_errorColor="#ff0000"),localStorage.cmdConsole_backgroundColor||(localStorage.cmdConsole_backgroundColor="#000000"),localStorage.cmdConsole_opacity||(localStorage.cmdConsole_opacity=7)},_js_p33:function(){$("#overwriteConsole").remove();var e=[];e.push('<style id="overwriteConsole">'),e.push(".cmd-console-content p.cmd-console-output{color:"+localStorage.cmdConsole_logColor+"}"),e.push(".cmd-console-content p.cmd-console-error{color:"+localStorage.cmdConsole_errorColor+"}"),e.push(".cmd-console-content{background-color:"+_dg122.colorRgb(localStorage.cmdConsole_backgroundColor,(localStorage.cmdConsole_opacity/10+"").slice(0,3))+"}"),e.push("</style>"),$(".cmd-console").append(e.join(""))},_js_p34:function(e){$(".cmd-console-content").append('<p class="cmd-console-output">'+e+"</p>"),this._js_p36()},_js_p35:function(e){$(".cmd-console-content").append('<p class="cmd-console-error">'+e+"</p>"),this._js_p36()},_js_p36:function(){for(var e=$(".cmd-console-content")[0],t=0;e.scrollHeight>5e3&&10>t;)$(".cmd-console-content p:first").remove(),t++;e.scrollTop=999999},_js_p37:function(){$(".cmd-console-content").text("")},close:function(){this.offEvent(),$(".cmd-console").remove()}},N.prototype={init:function(){this.initEvent(),this._dg1()},_dg1:function(){var e=this;G.receive("filemode",function(t){e._dg56(t)})},initEvent:function(){var e=this;$(".nav-shortcut").on("click",".filetool-section input",function(){var t=$(this).attr("func");t&&e.filetool[t]&&e.filetool[t].call(e.filetool)})},_dg56:function(e){if(e&&(e=e.toLowerCase()),!this.tools[e])switch(e){case"json":this.tools[e]=new I;break;case"javascript":this.tools[e]=new L;break;case"css":this.tools[e]=new M;break;case"html":this.tools[e]=new D;break;case"php":this.tools[e]=new B}this.tools[e]?this.filetool=this.tools[e]:this.filetool=null,this.showComponents()},showComponents:function(){if(this.filetool){$(".nav-shortcut .filetool-section").length||$(".nav-shortcut").append('<div class="filetool-section"></div>');for(var e=[],t=0,n=this.filetool.buttons.length;n>t;t++)e.push('<input type="button" class="btn btn-UI" value="',this.filetool.buttons[t].value,'" func="',this.filetool.buttons[t].func,'" />');e.length&&$(".nav-shortcut .filetool-section").html(e.join(""))}else this.closeComponents()},closeComponents:function(){$(".nav-shortcut .filetool-section").text("")}},A.prototype={clean:function(){var e=_dg106.session.getLength();if(!(1>e)){var t=_dg106.session.getLine(e-1).length;_dg106.session.remove({start:{row:0,column:0},end:{row:e-1,column:t}})}},_dg57:function(){this.cleanDeltas=[];var e=_dg106.session.getLength();if(!(1>e)){var t=(_dg106.session.getLine(e-1).length,[]);e>=2&&t.push({action:"removeLines",lines:_dg106.session.getLines(0,e-2),range:{start:{row:0,column:0},end:{row:e-1,column:0}},nl:"\n"}),this.cleanDeltas=t}},addUndoRecord:function(){var e=_dg106.session.getLength();if(!(1>e)){this.cleanDeltas.push({action:"insertText",range:{start:{row:0,column:0},end:{row:0,column:_dg106.session.getLine(0).length}},text:_dg106.session.getLine(0)}),e>=2&&(this.cleanDeltas.push({action:"insertText",range:{start:{row:0,column:_dg106.session.getLine(0).length},end:{row:1,column:0}},text:"\n"}),this.cleanDeltas.push({action:"insertLines",lines:_dg106.session.getLines(1,e-1),range:{start:{row:1,column:0},end:{row:e-1,column:0}}}));var t=[{deltas:this.cleanDeltas,group:"doc"}];_dg106.session.$undoManager.execute({action:"aceupdate",args:[t,_dg106.session],merge:!1})}},_js_p38:function(e){return U.prototype._dg71(e)},_js_p39:function(e){var t=this;this.spaceRelation=[],e&&(e.replace(/\n/g,function(e,n){t.spaceRelation.push(n)}),this.spaceRelation.push(e.length))},_dg58:function(e){return 1==this.spaceRelation.length?1:this._js_p40(0,this.spaceRelation.length-1,e)+1},_js_p40:function(e,t,n){var i=Math.floor((e+t)/2);return e==i&&e+1==t?n>this.spaceRelation[i]?t:e:this.spaceRelation[i]==n?i:this.spaceRelation[i]>n?this._js_p40(e,i,n):this._js_p40(i,t,n)}},I.prototype=new A,$.extend(I.prototype,{format:function(){var e=_dg106.session.getValue();try{e=JSON.parse(e)}catch(t){return void _dg122.alert(lanObject.error.invalidJSON)}this.clean();var n=this._js_p41(e,4);_dg106.session.insert({row:0,column:0},n)},_js_p41:function(e,t){var n;return n="array"==this.type(e)?this.deal_array(e,t):this.deal_object(e,t)},deal_array:function(e,t){var n=[];n.push("["),0!=e.length&&n.push("\n");for(var i=0,s=e.length;s>i;i++){switch(n.push(this.fileIndent(t)),this.type(e[i])){case"boolean":case"number":n.push(e[i]+"");break;case"string":n.push(JSON.stringify(e[i]));break;case"object":n.push(this.deal_object(e[i],t+4));break;case"array":n.push(this.deal_array(e[i],t+4));break;default:n.push('"',e[i].toString(),'"')}i!=s-1&&n.push(","),n.push("\n")}return n.push(this.fileIndent(t-4),"]"),n.join("")},deal_object:function(e,t){var n=[];n.push("{");var i=Object.keys(e);0!=i.length&&n.push("\n");for(var s=0,a=i.length;a>s;s++){switch(n.push(this.fileIndent(t),'"',i[s],'": '),this.type(e[i[s]])){case"boolean":case"number":n.push(e[i[s]]+"");break;case"string":n.push(JSON.stringify(e[i[s]]));break;case"object":n.push(this.deal_object(e[i[s]],t+4));break;case"array":n.push(this.deal_array(e[i[s]],t+4));break;default:n.push('"',e[i[s]].toString(),'"')}s!=a-1&&n.push(","),n.push("\n")}return n.push(this.fileIndent(t-4),"}"),n.join("")},type:function(e){var t="";return t="object"==typeof e?null==e?"boolean":$.isArray(e)?"array":$.isPlainObject(e)?"object":"other":typeof e},fileIndent:function(e){for(var t=0,n="";t++<e;)n+=" ";return n},unformat:function(){var e=_dg106.session.getValue();try{e=JSON.parse(e)}catch(t){return void _dg122.alert(lanObject.error.invalidJSON)}this.clean(),_dg106.session.insert({row:0,column:0},JSON.stringify(e))}}),L.prototype=new A,$.extend(L.prototype,{init:function(){"mac"==platforms.platform&&-1==process.env.PATH.indexOf("/usr/local/bin")&&(process.env.PATH+=":/usr/local/bin"),localStorage.env_path&&(process.env.PATH=localStorage.env_path)},attr_beautify:function(){var t=_dg106.session.getValue();this.clean(),t=e(t),_dg106.session.insert({row:0,column:0},t)},attr_showFunctions:function(){this.jsMapInstance.showFunctions()},runAsNodejs:function(){var e=this;this.nodejsInstance.checkNodejs().done(function(){localStorage.env_path=process.env.PATH,e.nodejsInstance.run()}).fail(function(){e._js_p42()})},_js_p42:function(){var e=this;_dg122.prompt(lanObject.filetool.addNodejsPath).done(function(t){process.env.PATH+=":"+t,e.runAsNodejs()})}}),R.prototype=new A,$.extend(R.prototype,{showFunctions:function(){this.methods=[];var e,t=_dg106.getCurrentPath();e="N"==_dg106.openfiles.getModifiedStatus(t)?_dg106.editor.getValue():_dg104.getFileContentSync(t),e.length/1e6>1&&_dg122.alert(lanObject.error.fileIsTooBig),e=this._js_p38(e),this._js_p39(e),this._js_p43(e),this._js_p19()},_js_p43:function(e){var t=this;e.replace(/\n{0,1}\x20*([a-zA-Z0-9_\$]+)\s*:\s*function\s*([^{\n]+)\n*{/g,function(e,n,i,s){t.methods.push({func:n,name:n.toLowerCase(),line:t._dg58(s+1)})}),e.replace(/\n{0,1}\x20*var\s+([a-zA-Z0-9_\$]+)\s*=\s*function\s*([^{\n]+)\n*{|\n{0,1}\x20*function\s*([a-zA-Z_\$]+)\s*([^{\n]+)\n*{/g,function(e,n,i,s,a,o){var r;r=n?n:s,10==e.charCodeAt(0)&&o++;var c=t._dg58(o);t.methods.push({line:c,name:r.toLowerCase(),func:r})}),e.replace(/\n{0,1}\x20*([a-zA-Z0-9_\$.]+)\s*=\s*function\s*([^{\n]+)\n*{/g,function(e,n,i,s){var a=n.split(".");1!=a.length&&(n=a.pop(),10==e.charCodeAt(0)&&s++,t.methods.push({func:n,name:n.toLowerCase(),line:t._dg58(s)}))})},_js_p19:function(){$(".func-nav").remove();var e=[];if(this.methods.length){_dg122.sortArray(this.methods,"name");for(var t=0,n=this.methods.length;n>t;t++)e.push({name:"<span>F</span>"+this.methods[t].func,line:this.methods[t].line,"class":"fn-function"})}else e.length&&e.pop();var i=_dg107._dg6(e,"func-nav");$(document.body).append(i);var s=$(".content").offset();$(".func-nav").css("top",s.top),B.prototype._js_p46.call(this)}}),K.prototype=new F,$.extend(K.prototype,{checkNodejs:function(){var e=$.Deferred(),t=this;return require("child_process").exec("node -v",function(n,i){n?e.reject():(t.version=i,e.resolve())}),e.promise()},run:function(){this._js_p31(),setTimeout(this._js_p45.bind(this),50)},_js_p45:function(){var e=this,t=_dg106.getCurrentPath(),n=require("child_process").spawn("node",[t]),i=(new Date).getTime();this._js_p34("------------------------------ Start Nodejs("+this.version.trim()+") ------------------------------"),n.stdout.on("data",function(t){return t=t.toString(),/Error:/.test(t)?void n.stderr.emit("data",t):(str=t.replace(/\n/g,"<br/>").replace(/\x20/g,"&nbsp;"),void e._js_p34(str))}),n.stderr.on("data",function(t){if(t=t.toString().trim()){try{var n=t;n=n.replace(/([\w\\\/\.:_]+)\.js(:\d+){1,2}/g,function(e,t){if(/^[\w_]+$/.test(t))return e;var n=e.split(":");return _dg104.isExist(n[0])?'<a href="javascript:void(0)" _path="'+n[0]+'" _row="'+n[1]+'" _column="'+n[2]+'" class="cmd-console-link">'+e+"</a>":e}),t=n}catch(i){}e._js_p35(t)}}),n.on("exit",function(t){var n=(new Date).getTime()-i;setTimeout(function(){e._js_p34("------------------------------ Running Time: "+n+"ms ------------------------------")},10)})}}),M.prototype=new A,$.extend(M.prototype,{beautify:function(){var e=_dg106.session.getValue();this.clean(),e=t(e),_dg106.session.insert({row:0,column:0},e)}}),D.prototype=new A,$.extend(D.prototype,{beautify:function(){var e=_dg106.session.getValue();this.clean(),e=n(e),_dg106.session.insert({row:0,column:0},e)}}),B.prototype=new A,$.extend(B.prototype,{showFunctions:function(){this.classes={},this.methods=[];var e,t=_dg106.getCurrentPath();e="N"==_dg106.openfiles.getModifiedStatus(t)?_dg106.editor.getValue():_dg104.getFileContentSync(t),e.length/1e6>1&&_dg122.alert(lanObject.error.fileIsTooBig),e=this._js_p38(e),this.search(e),this.showList()},showList:function(){$(".func-nav").remove();var e,t,n=[];for(var i in this.classes){n.push({name:"<span>C</span>"+i,line:this.classes[i].line,"class":"fn-class"}),t=this.classes[i].variables,_dg122.sortArray(t,"name");for(var s=0,a=t.length;a>s;s++)n.push({name:"<span>V</span>"+t[s].name,type:t[s].type,line:t[s].line,"class":"fn-method"});e=this.classes[i].methods,_dg122.sortArray(e,"name");for(var s=0,a=e.length;a>s;s++)n.push({name:"<span>"+("static"==e[s].type?"S":"M")+"</span>"+e[s].name,type:e[s].type,line:e[s].line,"class":"fn-method"});n.push("|")}if(this.methods.length){_dg122.sortArray(this.methods,"name");for(var s=0,a=this.methods.length;a>s;s++)n.push({name:"<span>F</span>"+this.methods[s].func,line:this.methods[s].line,"class":"fn-function"})}else n.length&&n.pop();var o=_dg107._dg6(n,"func-nav");$(document.body).append(o);var r=$(".content").offset();$(".func-nav").css("top",r.top),this._js_p46()},_js_p46:function(){J.register(".func-nav",function(){return $(".func-nav").remove(),!0},function(e,t){var n=$(t.target).closest("li");if(n.length){var i=n.attr("line");_dg122.gotoLine(_dg106.getCurrentPath(),i)}return $(".func-nav").remove(),!0})},search:function(e){this._js_p39(e),e=this._dg59(e),this._js_p39(e),this._dg60(e)},_dg59:function(e){var t=this,n=[];if(e.replace(/class[a-zA-Z0-9_\$\s\\]+{/g,function(i,s){var a,o,r=null;-1!=i.indexOf("extends")?(a=i.match(/class\s+([a-zA-Z0-9\$_]+)\s*extends\s+([a-zA-Z0-9\$\\_]+)/),r=a[2]):a=i.match(/class\s+([a-zA-Z0-9\$_]+)/),o=a[1],t.classes[o]={line:t._dg58(s),methods:[],variables:[]};var c,l=t._dg61(e,s);n.push(l),l.replace(/\n[\x20\t]*([a-zA-Z0-9_\$\x20]*)function\x20+&*\x20*([\w]+)\x20*\(/g,function(e,n,i,a){c="public","-1"!=n.indexOf("static")?c="static":"-1"!=n.indexOf("public")?c="public":"-1"!=n.indexOf("private")?c="private":"-1"!=n.indexOf("protected")&&(c="protected"),10==e.charCodeAt(0)&&a++,t.classes[o].methods.push({type:c,name:i,line:t._dg58(s+a)})}),l.replace(/static\x20+(?!function)([a-zA-Z0-9_\$]+)|const\x20+([a-z-A-Z_\$]+)/g,function(e,n,i,a){var r=n?n:i;t.classes[o].variables.push({type:"static",name:r,line:t._dg58(s+a)})}),l.replace(/(private|public|protected|var)\x20+\$([a-zA-Z_0-9]+)/g,function(e,n,i,a){"var"==n&&(n="public"),t.classes[o].variables.push({type:n,name:i,line:t._dg58(s+a)})})}),n.length)for(var i,s,a=ace.require("ace/lib/lang").stringRepeat;n.length;)i=n.shift(),s=i.match(/\n/g),s=s?a("\n",s.length):"",e=e.replace(i,s);return e},_dg60:function(e){var t=this;e.replace(/function\x20+&*\x20*([a-zA-Z0-9_\$]+)\x20*([^{\n]+)\s*{/g,function(e,n,i,s){t.methods.push({func:n,line:t._dg58(s)})})},_dg61:function(e,t){return V.prototype._dg61(e,t)}}),z.prototype={init:function(){this._dg1(),this.initEvent()},initEvent:function(){var e=this;$(document.body).bind("keydown",function(t){t.ctrlKey&&17==t.keyCode||t.metaKey&&91==t.keyCode?($(document.body).bind("keyup",function(t){17!=t.keyCode&&91!=t.keyCode||($(this).unbind("keyup",arguments.callee),e.keydownFlag=!1,$(".ace_scroller")[0].removeEventListener("mousedown",e._dg62,!0),e.mousedownFlag=!1,e.cleanMap())}),e.keydownFlag=!0,e.getProperty()):e.keydownFlag&&(e.keydownFlag=!1)}),document.body.addEventListener("keyup",function(){e.keydownFlag=!1},!1);var t=setInterval(function(){1==$(".ace_content").length&&($(".ace_content").bind("mousemove",{self:e},e.getProperty),clearInterval(t))},1e3)},_dg62:function(e){var t=_dg106._dg113;return t.mapEngine.mapAllowed&&0!=t.keydownFlag?(t.keydownFlag=!1,t.mapEngine._dg62(),e.preventDefault(),void e.stopPropagation()):($(".ace_scroller")[0].removeEventListener("mousedown",arguments.callee,!0),void t.cleanMap())},getProperty:function(e){var t;if(e){if(t=e.data.self,t.mousePosition={x:e.offsetX,y:e.offsetY},!t.keydownFlag)return}else t=this;if(t.mapEngine){var n,i,s=t.mousePosition.x,a=t.mousePosition.y,o=_dg106.editor.renderer.layerConfig;n=Math.round((s-o.padding)/o.characterWidth),0>n&&(n=0);var r=Math.floor(a/o.lineHeight),c=$(".ace_gutter-layer .ace_gutter-cell").eq(r).clone(!0);c.find("span").remove();try{i=parseInt(c.text())-1}catch(e){i=c.text()}delete c,i<=o.lastRow&&t.mapEngine&&t.mapEngine.mapProperty(i,n,r),t.mapEngine.mapAllowed&&!t.mousedownFlag?(t.mousedownFlag=!0,$(".ace_scroller")[0].addEventListener("mousedown",t._dg62,!0)):t.mapEngine.mapAllowed||(t.mousedownFlag=!1,$(".ace_scroller")[0].removeEventListener("mousedown",t._dg62,!0))}},_dg1:function(){var e=this;G.receive("filemode",function(t){e._dg64(t)}),G.receive("hashchanged",function(){e.destroyMapEngine()}),G.receive("editor.js/changeScroll",function(){$(".map-definition").remove(),J.unregister(".map-definition")}),G.receive("saveFile",function(t){e.mapEngine&&e.mapEngine._dg81&&e.mapEngine._dg81(t)}),G.receive("editor.js/editingFile",function(t){var n="";try{n=t.data.text?t.data.text:t.data.nl}catch(t){}if(/\n/.test(n)&&e.mapEngine&&e.mapEngine._dg81){var i=_dg106.getCurrentPath(),s=_dg106.editor.getValue();setTimeout(function(){e.mapEngine._dg81(i,s)},50)}})},destroyMapEngine:function(){for(var e=Object.keys(this.engines);e.length;)delete this.engines[e.pop()];this.engines={},this.mapEngine=null},_dg64:function(e){if("php"==e?e=ace.require("ace/lib/fileMode").getFileModeByContent(_dg104.getFileContentSync(_dg106.getCurrentPath())):-1!=$.inArray(e,["scss","less"])&&(e="css"),!this.engines[e])switch(e){case"javascript":this.engines[e]=new H;break;case"css":this.engines[e]=new q;break;case"php":this.engines[e]=new V}this.engines[e]?(this.previousEngine&&this.previousEngine!=this.engines[e]&&U.callStackInstance._dg77(),this.previousEngine=this.mapEngine=this.engines[e]):this.mapEngine=null},cleanMap:function(){this.mapEngine&&this.mapEngine._dg67()}},U.prototype={mapProperty:function(e,t,n){var i=_dg106.editor.session.getLine(e);i=i.replace(/\t/g,function(){return"    "});var s=this._js_p47(i,t);s?(this.propertyPosition={row:e,column:t,mapRowIndex:n},this._dg65(i,s)):this._dg67()},_js_p47:function(e,t){var n,i,s,a=[],o=t;return t<e.length?(n=e.slice(0,t),s=new RegExp(this.variableReg+"$"),i=n.match(s),i&&(a.unshift(i[0]),o=t-i[0].length),n=e.slice(t),s=new RegExp("^"+this.variableReg),i=n.match(s),i&&a.push(i[0]),{pos:o,word:a.join("")}):null},initScan:function(e){if(_dg105.projectPath){var t=_dg104.filterAllFilesByPath(_dg105.projectPath,{extention:e,exclude:["node_modules"]}),n=this;G.send("add_property_to_prompt",e,n.result);var i=setInterval(function(){if(!t.length)return clearInterval(i),void G.send("add_property_to_prompt",e,n.result);for(var s=t.splice(0,5),a=0,o=s.length;o>a;a++)_dg104.getFileContent(s[a]).done(function(e,t){n._dg82(t,e)})},50)}},_dg65:function(e){return!1},_dg66:function(e){if(!this.mapAllowed)return void this._dg67();var t,n=_dg106.editor.renderer.layerConfig;if(this.propertyPosition.row>=n.firstRow&&this.propertyPosition.row<=n.lastRow){t=this.propertyPosition.mapRowIndex;for(var i,s=$(".ace_text-layer .ace_line").eq(t)[0],a=s.childNodes,o=0,r=0,c=a.length;c>r&&!(o>e.pos);r++)i=1==a[r].nodeType?$(a[r]).text():a[r].nodeValue,o+=i.length;var l=s.childNodes[r-1];this._dg67();var h=$(l).html();h=h.replace(this.propertyWord,'<span class="map-property">'+this.propertyWord+"</span>"),$(l).html(h)}},_dg67:function(){$(".ace_text-layer .map-property").after($(".map-property").text()),$(".ace_text-layer span.map-property").remove()},initResultObject:function(e,t,n){n=n?n:[],e[t]&&"function"!=typeof e[t]||(e[t]=n)},_dg68:function(e){var t=this;this.spaceRelation=[],e&&(e.replace(/\n/g,function(e,n){t.spaceRelation.push(n)}),this.spaceRelation.push(e.length))},_dg58:function(e){return 1==this.spaceRelation.length?1:this._js_p40(0,this.spaceRelation.length-1,e)+1},_js_p40:function(e,t,n){var i=Math.floor((e+t)/2);return e==i&&e+1==t?n>this.spaceRelation[i]?t:e:this.spaceRelation[i]==n?i:this.spaceRelation[i]>n?this._js_p40(e,i,n):this._js_p40(i,t,n)},_dg70:function(){return this.definitionPosition},_dg71:function(e){var t,n=ace.require("ace/lib/lang").stringRepeat;t=e.replace(/\/\*[\s\S]+?\*\//g,function(e){var t=e.match(/\n/g);return t?n("\n",t.length):""});var i,s=t.split("\n"),a=s.length;for(i=0;a>i;i++)/^\s*\/\//.test(s[i])?s[i]="":/\/\//.test(s[i])&&(s[i]=this._js_p49(s[i]));return t=s.join("\n")},_js_p49:function(e){for(var t=0,n=[],i=e.length;i>t;){if('"'!=e[t]&&"'"!=e[t]||"\\"==e[t-1]){if(0==n.length&&"//"==e.substr(t,2))break}else-1!=n.indexOf(e[t])?n.splice(n.indexOf(e[t])):n.push(e[t]);t++}return e.slice(0,t)},_dg62:function(){if(this.definitionPosition){var e=this._dg70();1==e.length?this.gotoLine(e[0].path,e[0].line):$.isArray(e)?this._dg73(e):this.gotoLine(e.path,e.line)}},_dg73:function(e){var t=$(".map-property").offset();if(t){var n=this;$(".map-definition").remove(),e.sort(function(e,t){return _dg122.getFilenameByPath(e.path)<_dg122.getFilenameByPath(t.path)?-1:1});var i=this._dg74(e),s=_dg107._dg6(i,"map-definition");$(document.body).append(s);var a=$(".map-definition")[0].offsetHeight;t.top+_dg106.editor.renderer.layerConfig.lineHeight+a>_dg106.editor.renderer.layerConfig.height?t.top=t.top-a:t.top+=_dg106.editor.renderer.layerConfig.lineHeight,$(".map-definition").css(t),J.register(".map-definition",function(){return $(".map-definition").remove(),!0},function(e,t){var i=$(t.target).closest("li");if(i.length){var s=decodeURIComponent(i.attr("path")),a=i.attr("line");n.gotoLine(s,a)}return $(".map-definition").remove(),!0})}},_dg74:function(e){var t,n,i=[];for(var s in e)t=e[s],n={name:_dg122.getFilenameByPath(t.path)+" : "+t.line,path:encodeURIComponent(t.path),title:t.path,line:t.line},t.path==_dg106.getCurrentPath()?(i.unshift("|"),i.unshift(n)):i.push(n);return i},gotoLine:function(e,t){U.callStackInstance.callStack.shift(),U.callStackInstance._dg75(_dg106.getCurrentPath(),this.propertyPosition.row+1),U.callStackInstance.callStack.unshift({path:e,line:t}),U.callStackInstance._dg76(),_dg122.gotoLine(e,t)}},W.prototype={initEvent:function(){var e=this;$(".content .callstack ul").on("click","li",function(){var t=$(this).attr("_path"),n=$(this).attr("_line");e.index=$(this).index(),e._dg76(),_dg122.gotoLine(t,n)}),$(".content .callstack-button").bind("mouseover",function(){$(this).text(lanObject.callstack.close)}),$(".content .callstack-button").bind("mouseout",function(){$(this).text(lanObject.callstack.callstack)}),$(".content .callstack-button").bind("click",function(){e._dg77()})},_dg75:function(e,t){if(this.index=0,this.callStack.length){var n=this.callStack[0];if(n.path==e&&n.line==t)return}this.callStack.unshift({path:e,line:t}),this.callStack.length>=10&&this.callStack.splice(10),this._dg76()},_dg76:function(){$(".content .callstack").length||($(".content #editor").append('<div class="callstack"><div class="callstack-button">'+lanObject.callstack.callstack+"</div><ul></ul></div>"),this.initEvent()),this.callStack.length?$(".content .callStack").show():$(".content .callStack").hide();for(var e,t,n=[],i=0,s=this.callStack.length;s>i;i++)t=this.callStack,e=_dg122.getFilenameByPath(t[i].path)+":"+t[i].line,n.push('<li title="',e,'" _path="',t[i].path,'" _line="',t[i].line,'" ',i==this.index?'class="active"':"",">",e,"</li>");$(".content .callstack ul").html(n.join(""))},_dg77:function(){this.callStack=[],$(".content .callstack ul").html(""),$(".content .callStack").hide()}},U.callStackInstance=new W,q.prototype=new U,$.extend(q.prototype,{init:function(){this.initScan(["css","scss","less"])},_dg65:function(e,t){var n,i=e.slice(0,t.pos),s=e.slice(t.pos+t.word.length),a=this;if(this.definitionPosition=[],/class\s*=\s*['"][a-zA-Z0-9\-_\x20]*$/.test(i)){this.relation.classes="",n=i.match(/[^'"]*$/),n&&(this.relation.classes+=n),this.relation.classes+=t.word,n=s.match(/^[^'"]*/),n&&(this.relation.classes+=n),n=i.match(/<([a-zA-Z]+)[^<]*$/),n&&(this.relation.nodeName=n[1].toLowerCase());var o=new RegExp("\\."+t.word+"$");$.each(this.result,function(e,t){o.test(e)&&(a.definitionPosition=a.definitionPosition.concat(t))})}this.definitionPosition.length?(this.propertyWord=t.word,this.mapAllowed=!0,this._dg66(t)):(this.propertyWord="",this.mapAllowed=!1,this._dg67())},_dg74:function(e){var t,n,i=[];for(var s in e)t=e[s],n={name:_dg122.getFilenameByPath(t.path)+" : "+t.line+" (<span>"+t.definition+"</span>)",path:encodeURIComponent(t.path),title:t.path,line:t.line},t.path==_dg106.getCurrentPath()?(i.unshift("|"),i.unshift(n)):i.push(n);return i},_dg70:function(){var e,t,n=this.definitionPosition,i=[],s=this;return t=new RegExp("\\x20*([a-zA-Z]+)\\."+this.relation.classes+"$"),$.each(n,function(n,a){e=a.definition.match(t),e?e[1].toLowerCase()==s.relation.nodeName&&i.push(a):i.push(a)}),i},_dg81:function(e,t){var n=_dg122.getExtension(e);if("css"==n){var i,s,a;i=this.result;for(s in i){for(a=0;a<i[s].length;a++)i[s][a].path==e&&(i[s].splice(a,1),a--);0==i[s].length&&delete i[s]}this._dg82(e,t)}},_dg82:function(e,t){t||(t=_dg104.getFileContentSync(e)),t.length/1e6>1||(t=this._dg71(t),this._dg68(t),this._dg83(e,t))},_dg83:function(e,t){var n=this;t.replace(/([a-zA-Z0-9_\-\.\x20,]+){/g,function(t,i,s){i=i.split(","),$.each(i,function(t,i){i=i.trim(),n.initResultObject(n.result,i,[]),n.result[i].push({path:e,line:n._dg58(s),definition:i})})})}}),H.prototype=new U,$.extend(H.prototype,{init:function(){setTimeout(this.initScan.bind(this,["js"]),300)},_dg65:function(e,t){var n=e.slice(0,t.pos),i=e.slice(t.pos+t.word.length),s=null;s=n.match(/[a-zA-Z0-9_\$.]{2,}$/),s?s=s[0]:" "!=n[n.length-1]&&0!=t.pos||(s="");var a=!1;a=i.match(/^\s*\(/),/function\x20+$/.test(n)&&(a=!1),this.definitionPosition=null,a&&null!=s?""==s&&(this.result["class"][t.word]||this.result["function"][t.word])?this.definitionPosition=this.result["class"][t.word]?this.result["class"][t.word]:this.result["function"][t.word]:""!=s&&this.result.namespace_function[t.word]&&(this.definitionPosition=this.result.namespace_function[t.word]):a&&(this.definitionPosition=this.result.namespace_function[t.word]),this.definitionPosition?(this.propertyWord=t.word,this.namespace=s,this.mapAllowed=!0,this._dg66(t)):(this.propertyWord="",this.namespace=null,this.mapAllowed=!1,this._dg67())},_dg81:function(e,t){for(var n,i,s,a=["class","function","namespace_function"];a.length;){n=this.result[a.shift()];for(i in n){for(s=0;s<n[i].length;s++)n[i][s].path==e&&(n[i].splice(s,1),s--);0==n[i].length&&delete n[i]}}this._dg82(e,t)},_dg82:function(e,t){t||(t=_dg104.getFileContentSync(e)),t.length/1e6>1||(t=this._dg71(t),this._dg68(t),this._dg60(e,t))},_dg60:function(e,t){var n=this;t.replace(/\n{0,1}\x20*([a-zA-Z0-9_\$]+)\s*:\s*function\s*([^{\n]+)\n*{/g,function(t,i,s,a){n.initResultObject(n.result.namespace_function,i),n.result.namespace_function[i].push({path:e,params:$.trim(s),line:n._dg58(a+1)})}),t.replace(/\n{0,1}\x20*var\s+([a-zA-Z0-9_\$]+)\s*=\s*function\s*([^{\n]+)\n*{|\n{0,1}\x20*function\s*([a-zA-Z_\$]+)\s*([^{\n]+)\n*{/g,function(t,i,s,a,o,r){var c,l;c=i?i:a,l=s?s:o,l=$.trim(l),n.initResultObject(n.result["function"],c),n.initResultObject(n.result["class"],c),10==t.charCodeAt(0)&&r++;var h=n._dg58(r);n.result["function"][c].push({path:e,params:l,line:h}),n.result["class"][c].push({path:e,params:l,line:h})}),t.replace(/\n{0,1}\x20*([a-zA-Z0-9_\$.]+)\s*=\s*function\s*([^{\n]+)\n*{/g,function(t,i,s,a){var o,r,c=i.split(".");1!=c.length&&(i=c.pop(),o=c.join("."),n.initResultObject(n.result.namespace_function,i),10==t.charCodeAt(0)&&a++,r={path:e,params:$.trim(s),line:n._dg58(a)},o&&(r.namespace=o),n.result.namespace_function[i].push(r))})},_dg70:function(){var e=[];if(this.namespace){var t=this;$.each(this.definitionPosition,function(n,i){i.namespace&&"this"!=i.namespace&&-1!=t.namespace.indexOf(i.namespace)&&e.push(i)}),e.length||(e=this.definitionPosition)}else e=this.definitionPosition;return e}}),V.prototype=new U,$.extend(V.prototype,{init:function(){var e=this;_dg104.getFileContent(_dg122.getProjectPath()+"/ext/php/php.json").done(function(t){try{t=JSON.parse(t),e.result=t}catch(n){}}).always(function(){setTimeout(e.initScan.bind(e,["php"]),300)})},_dg65:function(e,t){var n=e.slice(0,t.pos),i=e.slice(t.pos+t.word.length),s=null,a=!1;if(this.definitionPosition=null,this.namespace=null,/new\x20+$/.test(n)||/extends\x20+$/.test(n)||/^\x20*\:{2}/.test(i))this.result["class"][t.word]&&(this.definitionPosition={path:this.result["class"][t.word].path,line:this.result["class"][t.word].line});else if(a=/^\s*\(/.test(i),/function\x20+$/.test(n)&&(a=!1),s=n.match(/([a-zA-Z0-9_\$]{1,})\x20*\:\:\x20*$/),a||s)if(s){if(s=s[1],"self"==s)s=this._dg90(this.propertyPosition.row,t.pos);else if("parent"==s){s=this._dg90(this.propertyPosition.row,t.pos);try{s=_dg106._dg113.mapEngine.result["class"][s].parent}catch(o){}}s&&(this.namespace=s,this.definitionPosition=this._dg92(s,t.word,a?"methods":"variables"))}else s=n.match(/\$([a-zA-Z0-9_]{1,})\x20*->\x20*$/),s&&(s=s[1],s="this"==s?this._dg90(this.propertyPosition.row,t.pos):this._dg91(this.propertyPosition.row,this.propertyPosition.column,s),s&&(this.namespace=s,this.definitionPosition=this._dg94(s,t.word))),s||(""==$.trim(n)||"->"!=$.trim(n).slice(-2)?this.definitionPosition=this.result["function"][t.word]:this.definitionPosition=this._dg95(t.word));else/^[A-Z0-9_]+$/.test(t.word)&&!/['"]$/.test(n)?this.definitionPosition=this.result.define[t.word]:a||(/\$this\x20*->\x20*$/.test(n)?s=this._dg90(this.propertyPosition.row,t.pos):/\$(\w+)\x20*->\x20*$/.test(n)&&(s=n.match(/\$(\w+)\x20*->\x20*$/)[1],s=this._dg91(this.propertyPosition.row,t.pos,s)),s&&(this.definitionPosition=this._dg93(s,t.word)));this.definitionPosition?(this.propertyWord=t.word,this.mapAllowed=!0,this._dg66(t)):(this.propertyWord="",this.mapAllowed=!1,this._dg67())},_dg90:function(e,t){var n=_dg106.editor.session.getLines(0,e-1).join("\n")+_dg106.editor.session.getLine(e).slice(0,t),i="";if(n.replace(/class[a-zA-Z0-9_\$\s]+{/g,function(e){i=e}),""==i)return null;var s,a=null;return s=-1!=i.indexOf("extends")?i.match(/class\s+([a-zA-Z0-9\$_]+)\s*extends\s+([a-zA-Z0-9\$_]+)/):i.match(/class\s+([a-zA-Z0-9\$_]+)/),a=s[1]},_dg91:function(e,t,n){var i,s=this._dg102(e,t),a=new RegExp("\\$"+n+"\\x20*=\\x20*new\\x20*(\\w+)"),o=s.match(a);return i=o?o[1]:null},_dg92:function(e,t,n){n=n?n:"methods";var i=this.result["class"];return i[e]?!i[e][n][t]||"static"!=i[e][n][t].type&&-1==$.inArray(t,["__construct","__destruct"])?i[e].parent?this._dg92(i[e].parent,t,n):null:i[e][n][t]:null},_dg93:function(e,t){var n=this.result["class"];return n[e]?n[e].variables[t]&&"static"!=n[e].variables[t].type?n[e].variables[t]:n[e].parent?this._dg93(n[e].parent,t):null:null;
},_dg94:function(e,t){var n=this.result["class"];return n[e]?n[e].methods[t]&&"static"!=n[e].methods[t].type?n[e].methods[t]:n[e].parent?this._dg94(n[e].parent,t):null:null},_dg95:function(e){var t,n,i,s=[],a=this.result["class"];for(n in a){t=a[n].methods;for(i in t)i==e&&"static"!=t[i].type&&s.push(t[i])}return s.length||(s=null),s},_dg81:function(e,t){for(var n,i,s=["class","function","define"];s.length;){n=this.result[s.shift()];for(i in n)n[i].path==e&&delete n[i]}this._dg82(e,t)},_dg82:function(e,t){t||(t=_dg104.getFileContentSync(e)),t.length/1e6>1||(t=this._dg71(t),this.search(e,t))},search:function(e,t){this._dg68(t),t=this._dg59(e,t),this._dg68(t),this._dg60(e,t),this.searchDefine(e,t)},_dg59:function(e,t){var n=this,i=[];if(t.replace(/class[a-zA-Z0-9_\$\s\\]+{/g,function(s,a){var o,r,c=null;-1!=s.indexOf("extends")?(o=s.match(/class\s+([a-zA-Z0-9\$_]+)\s*extends\s+([a-zA-Z0-9\$\\_]+)/),c=o[2]):o=s.match(/class\s+([a-zA-Z0-9\$_]+)/),r=o[1],n.initResultObject(n.result["class"],r,{path:e,line:n._dg58(a),parent:c,methods:{},variables:{}});var l,h=n._dg61(t,a);i.push(h),h.replace(/\n[\x20\t]*([a-zA-Z0-9_\$\x20]*)function\x20+&*\x20*([\w]+)\x20*([^{\n]+)/g,function(t,i,s,o,h){l="public","-1"!=i.indexOf("static")?l="static":"-1"!=i.indexOf("public")?l="public":"-1"!=i.indexOf("private")?l="private":"-1"!=i.indexOf("protected")&&(l="protected"),s=$.trim(s),10==t.charCodeAt(0)&&h++,n.result["class"][r].methods[s]={className:r,parent:c,type:l,path:e,params:$.trim(o),line:n._dg58(a+h)}}),h.replace(/static\x20+(?!function)([a-zA-Z0-9_\$]+)|const\x20+([a-z-A-Z_\$]+)/g,function(t,i,s,o){var l=i?i:s;n.result["class"][r].variables[l]={className:r,parent:c,type:"static",path:e,line:n._dg58(a+o)}}),h.replace(/(private|public|protected|var)\x20+\$([a-zA-Z_0-9]+)/g,function(t,i,s,o){"var"==i&&(i="public"),n.result["class"][r].variables[s]={className:r,parent:c,type:i,path:e,line:n._dg58(a+o)}})}),i.length)for(var s,a,o=ace.require("ace/lib/lang").stringRepeat;i.length;)s=i.shift(),a=s.match(/\n/g),a=a?o("\n",a.length):"",t=t.replace(s,a);return t},_dg60:function(e,t){var n=this;t.replace(/function\x20+&*\x20*([\w\$]+)\x20*([^{\n]+)\s*{/g,function(t,i,s,a){n.result["function"][i]={path:e,params:$.trim(s),line:n._dg58(a)}})},searchDefine:function(e,t){var n=this;t.replace(/define\x20*\(([A-Z0-9_'"]+),/g,function(t,i,s){i=i.replace(/'/g,"").replace(/"/g,""),n.result.define[i]={path:e,line:n._dg58(s)}})},_dg70:function(){if(!this.namespace)return this.definitionPosition;if(!$.isArray(this.definitionPosition))return this.definitionPosition;var e=this.namespace.replace(/->$/g,"");e=e.split("->");var t=this.definitionPosition,n=null;if(1==e.length&&"$this"==e[0])$.each(t,function(e,t){return t.path==_dg106.getCurrentPath()?(n=t,!1):void 0}),n&&(t=n);else{var i=e[e.length-1].toLowerCase().replace("$","");$.each(t,function(e,t){return t.className.toLowerCase()==i?(n=t,!1):void 0}),n&&(t=n)}return t},_dg61:function(e,t){for(var n=t,i=[],s=0;n<e.length&&("{"==e[n]&&"\\"!=e[n-1]?(i.push(e[n]),s=1):"}"==e[n]&&"\\"!=e[n-1]?"{"==i[i.length-1]?i.pop():(i.push(e[n]),s=1):'"'!=e[n]&&"'"!=e[n]||"\\"==e[n-1]||(-1!=i.indexOf(e[n])?i.splice(i.indexOf(e[n])):(i.push(e[n]),s=1)),!s||i.length);)n++;return e.slice(t,n+1)},_dg102:function(e,t){var n=_dg106.editor.getValue();n=this._dg71(n);var i=_dg106.editor.session.getLines(0,e-1).join("\n")+_dg106.editor.session.getLine(e).slice(0,t);i=this._dg71(i);var s=0,a=[];i.replace(/function\x20*[&\w]+\x20*\(.*?\)\s*{/g,function(e,t){s=t+e.length-1});var a=null;return s>0&&(a=this._dg61(n,s)),a||(a=i),a}}),X.prototype={init:function(){this._dg1(),this.initEvent()},initEvent:function(){$(document.body).on("dblclick",".search-result-page .file-section ul li",function(){var e=$(this).attr("_line");e=e.split(":"),_dg122.gotoLine($(this).closest(".file-section").attr("_path"),e[0],e[1])}),$(document.body).on("click",".search-result-page .search-result-stop",function(e){_dg122.process.stop("find"),this.setProgressStatus(1),e.preventDefault(),e.stopPropagation()}.bind(this)),$(document.body).on("click",".search-result-page",function(){$(".search-result-content").css("-webkit-transform","translateZ("+Math.floor(10*Math.random())+"px)")}.bind(this))},_dg1:function(){var e=this;G.receive("findall/find",function(t){e.show(),e.findInProject(t),_dg106.openfiles.showSearchResult("Searching Results")})},reset:function(){this.result=[],this.matchCount=0,this.tasksFinish=0,this.tasksLength=0,this.replaceCon="",this.stopSearchFlag=0,this.setProgressStatus(0)},findInProject:function(e){if(this.canSearch){this.reset(),e.replace_con&&(this.replaceCon=e.replace_con);var t=e.find_con;e.reg_tag||(t=t.replace(/[^0-9a-zA-Z]/g,function(e){return"\\"+e}));try{this.wordReg=new RegExp(t,"g"+(e.case_tag?"i":""))}catch(n){return void _dg122.alert(lanObject.search.invalidReg)}this.wordReg=this.wordReg.toString(),e.path+=_dg122.getPathSplitChar(),this.replaceCon?this.tasks=[[e.path,e.type,this.wordReg,e.exclude,this.replaceCon]]:this.tasks=[[e.path,e.type,this.wordReg,e.exclude]],this.startFind(),this.canSearch=!1,setTimeout(this._js_p50.bind(this,this.replaceCon?"replace":"find"),100)}},_js_p50:function(e){_dg122.process.run({src:"find",func:e,name:"find"},this.tasks,function(e){if(!this.stopSearchFlag){if(0==e.total&&1==e.done)return this.setMatchCount(0),this._js_p51(100),this.finishFind(),!0;var t,n,i,s,a,o=[],r=0;for(n=e.data,s=n.length,this.tasksFinish=e.done,this.tasksLength=e.total,i=0;s>i;i++)t=n[i],t.success&&t.match.length&&(a={path:t.path,count:t.match.length,match:t.match},o.push(a),r+=a.count);return this.showMatch(o),this.setMatchCount(r),this._js_p51(),this.tasksFinish==this.tasksLength?(this.finishFind(),!0):this.tasksFinish>1e4?(this.stopSearchFlag=1,setTimeout(function(){_dg122.alert(lanObject.search.searchFileLimit)},100),this.finishFind(),!0):void 0}}.bind(this))},showMatch:function(e){for(var t,n,i,s=[];e.length;){for(i=e.shift(),s.push('<div class="file-section" _path="',i.path,'"><h3 class="ace_entity ace_name ace_function">',i.path,"</h3><ul>"),t=0;t<i.match.length;t++)n=i.match[t],s.push('<li _line="',n.row+":"+n.column,'"><span class="ace_entity ace_name ace_function sr-position">',n.row,":",n.column,"</span>",n.line,"</li>");s.push("</ul></div>")}$(".search-result-content").append(s.join(""))},startFind:function(){$(".search-result-desc .sr-files").text(this.tasksLength),$(".search-result-desc .sr-matches").text(this.matchCount),$(".search-result-content").text(""),this._js_p51()},finishFind:function(){this.canSearch=!0,this.setProgressStatus(1)},_js_p51:function(e){e||(e=Math.floor(this.tasksFinish/this.tasksLength*100)),e=e?e+"%":"1%",$(".search-result-progress-bar").css("width",e).text(e),$(".search-result-desc .sr-files").text(this.tasksLength)},setProgressStatus:function(e){$(".search-result-stop")[0].disabled=!!e,e?$(".search-result-stop").addClass("disable"):$(".search-result-stop").removeClass("disable")},setMatchCount:function(e){this.matchCount+=e,$(".search-result-desc .sr-matches").text(this.matchCount)},setEndIndex:function(e){},show:function(){if(!$(".search-result-page").length){var e=[];e.push('<div class="search-result-page editor-base">'),e.push('<div class="top-status-bar"><div class="search-result-stop">Stop</div><div class="search-result-progress">'),e.push('<div class="search-result-progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" style="width: 0%;">0%</div></div>'),e.push('<div class="search-result-desc"><label>Files : <span class="sr-files">0</span></label><label>Matches : <span class="sr-matches">0</span></label></div></div>'),e.push('<div class="search-result-content"></div></div>'),$(".content").append(e.join(""))}this.canSearch=!0,$(".search-result-page").css("-webkit-transform","rotateX(0deg)")},hide:function(){$(".search-result-page").css("-webkit-transform","rotateX(90deg)")}},Z.prototype={init:function(){var e=_dg122.getConfig("UI");this.cleanDefaultTheme(),this.setTheme(e.theme)},setTheme:function(e){-1==$.inArray(e,["monokai","fresh","sky-blue"])&&(e="sky-blue"),document.body.className="theme-"+e},cleanDefaultTheme:function(){$("#ace-tm").remove()},getUIConfig:function(){}},$(document).ready(function(){function e(e){e=e.replace(/^"|"$/g,""),e=e.split('"'),e=e[e.length-1],"function"!=typeof gui.App._events.open&&0!=gui.App._events.open.indexOf(arguments.callee)||(_dg104.openTabFile(e),window&&window.focus())}window._dg104=new h,window._dg105=new y,window._dg106=new p,window._dg107=new f,window._dg108=new _,window._dg120=new X,window._dg109=new Z,G.send("ready");var t=gui.Window.get();if(t.on("close",function(){if(confirm(lanObject.common.exitPrompt)){try{gui.App.removeListener("open",e),process.removeListener("uncaughtException",uncaughtExceptionFunction),$(document.body).off("click"),$(document.body).unbink("click")}catch(t){}this.close(!0)}}),gui.App.argv.length)for(var n=gui.App.argv.splice(0,gui.App.argv.length),i=0,s=n.length;s>i;i++)_dg104.openTabFile(n[i]);gui.App.on("open",e),window.onhashchange=function(){var e="";location.hash&&(e=location.hash.slice(1)),G.send("hashchanged",e)}}),$(document).ready(function(){function e(){var e=$("#track iframe")[0].contentWindow.trackEvent;e&&($(".nav-head").on("click","ul.dropdown-menu li a",function(){var t;t=$(this).closest("ul").hasClass("dropdown-submenu")?$(this).closest("ul").prev("a").clone():$(this).clone(),t.children("span").remove(),e(["_trackEvent","editor_head","head_click","nav_head:"+t.text()])}),$(document.body).on("click","ul.tree-contextmenu li a",function(){e(["_trackEvent","editor_resource_tree","resource_tree_click","resource_tree:"+$(this).text()])}),$(document.body).on("click",".resource-nav span",function(){e(["_trackEvent","editor_resource_tree","resource_nav_click","resource_nav:"+$(this).text()])}),$(document.body).on("click",".all-resource-btn",function(){e(["_trackEvent","editor_resource_tree","resource_project_active","resource_project:active"])}),$(".content").on("click",".linemark-button",function(){e(["_trackEvent","editor_mark","linemark_click","linemark:linemark"])}),$(".content").on("click",".linemark li div",function(){e(["_trackEvent","editor_mark","linemark_click","linemark:navigate"])}),$(".nav-shortcut").on("click",".filetool-section input",function(){e(["_trackEvent","editor_filetool","filetool_click","filetool:"+$(this).attr("func")])}),$(".content").on("click",".callstack li",function(){e(["_trackEvent","editor_callstack","callstack_click","callstack:click"])}),G.receive("filemode",function(t){e(["_trackEvent","editor_language","language_open","filemode:"+t])}),e(["_trackEvent","editor_platform","platform_open","platform:"+platforms.specific]),e(["_trackEvent","version","IDE","IDE:"+gui.App.manifest.version]),_dg106.editor.commands.on("afterExec",function(t){t.command.bindKey&&"string"!=typeof t.command.bindKey&&"saveFile"!=t.command.name&&e(["_trackEvent","shortcut","shortcut_press","shortcut:"+t.command.name])}))}var t='<div id="track" style="display:none;"><iframe src="http://www.debuggap.com/tooltrack/editor.html" style="display:none;"></iframe></div>';$(document.body).append(t),$("#track iframe")[0].onload=e})}();